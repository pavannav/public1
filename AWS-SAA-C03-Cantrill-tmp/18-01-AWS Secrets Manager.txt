Welcome back. In this lesson, I want to introduce the AWS Secrets Manager and it's often one that gets confused with the SSM Parameter Store.
Inside the Parameter Store, you can create secure strings which allow you to store passwords and so logically it's confusing.
So when should you use the Parameter Store versus the Secrets Manager?
So let's take a look at that and make sure that you're 100% comfortable with selecting between both of these products for the exam.
So for Secrets Manager, the functionality that the product provides and the way that it's architected, they're both pretty easy to understand.
For the exam though, the main thing to lock in is when you should use Secrets Manager versus Parameter Store.
So let's get that out of the way. It shares functionality with Parameter Store.
So that's the starting point. Don't worry too much if for certain scenarios you can't really pick between them
because for certain things you can use either and achieve the same result.
Secrets Manager though, as the name suggests, is designed specifically for secrets.
So this means things like passwords and API keys.
So in the exam, if you see those keywords, so API keys or passwords, then you should default to Secrets Manager.
Secrets Manager is usable from the console, the CLI, the API and software development kits.
It's actually designed architecturally to be integrated inside other applications.
So that's one of the most common use cases that Secrets Manager is integrated with other applications.
Another key differentiator of Secrets Manager is that it actually supports the automatic rotation of secrets.
This uses Lambda, essentially, and for certain AWS products such as RDS, Secrets Manager supports direct integration.
So as well as being able to periodically change a secret that's stored inside Secrets Manager,
the product can also make sure that any authentication built into that product, such as RDS, is also changed.
So it's kept synchronized with Secrets Manager.
So if Lambda is invoked and changes a secret, so rotates a secret, then the password inside an RDS instance can also be changed.
And that integration is only supported for a certain limited set of products, and RDS is one of those products.
So in the exam, if you see any mention of rotating secrets, and more specifically, rotating secrets with RDS,
then it's almost certain that Secrets Manager is the right answer.
So the product at a fundamental level, just like with Parameter Store, lets you store secrets.
But in this case, this product is specifically designed and focuses on the storage and rotation of these secrets.
So the product keeps them safe, they're encrypted at rest, it integrates with IAM, so you can use IAM permissions to control access to the secrets,
it rotates them, and clients can use Secrets Manager to access the secrets and then use these to communicate with, say, a database in a safe and secure way.
So let's have a look visually at an example architecture that involves Secrets Manager.
I want to use an example of a web application which allows you to share funny images showing happy things.
So you guessed it, we're talking about Categram.
Categram uses the Secrets Manager SDK, so the SDK is part of the application, and it uses this SDK to retrieve database credentials.
So the SDK uses IAM credentials for authorization, generally a role, but it might also use access keys, even though this is less ideal.
These credentials are used to interact with Secrets Manager and retrieve the secrets for the database that the application uses.
So once the application has these secrets, it can use them to securely access the database.
Now so far all of this functionality could also be provided using the SSM Parameter Store.
It has the capability to store secure strings, and we could use these secure strings which are encrypted to store any database connectivity information.
What sets the Secret Manager apart is that periodically the Secrets Manager can invoke a Lambda function to rotate credentials.
Now the Lambda function will require permissions to do this, and it gets those permissions from an execution role,
and it will use these permissions both to update the secret that is stored within Secrets Manager,
but also if you use supported products such as RDS, then the actual authentication information inside RDS can also be updated
and kept in sync with the secrets that are inside the Secret Manager product.
So if you're using a supported integrated product, then everything is managed end-to-end by Secrets Manager.
It can handle the rotation of credentials, it can handle the update of the products which use those credentials,
and as long as the application keeps checking in with Secrets Manager,
it can always ensure that it has access to the most updated versions of those secrets.
Now it's also worth mentioning that secrets are secured using KMS,
so you never risk any leakage via physical access to the AWS hardware,
and KMS also ensures role separation, which means that you need permissions both to KMS and to Secrets Manager
in order to access secrets and decrypt them.
With a specific focus on the exam, if you see any questions where you suspect that Secrets Manager might be involved,
you need to do keyword analysis.
So you need to determine if the question mentions anything in the area of secrets,
you need to check if the question mentions anything to do with rotation,
and if it mentions either of them or both of them, and if it also mentions a product such as RDS,
then you're almost certain to be using Secrets Manager for the correct answer.
So the key differentiating point between Secrets Manager and the Parameter Store
tends to be whether it explicitly mentions secrets, whether it talks about rotation,
and whether it talks about integration with specific products, specifically RDS.
Now most questions in the exam won't present you with a situation where you have to pick between Secrets Manager and the Parameter Store.
Generally the question will present a scenario, and you will either have Parameter Store or Secrets Manager as an answer.
It's very rare that you have both.
If you do have both, then you need to be looking for keywords around rotation, integration, and the specific mention of secrets,
and if you see any of those, it's likely that Secrets Manager will be the correct answer versus the Parameter Store.
If you need to store anything but secrets, so hierarchical configuration information,
maybe the configuration for the CloudWatch agent, anything of that nature,
that tends to be the type of situation where you would use the Parameter Store.
If it's just secrets, if it's rotation, if it's product integration, then it's Secrets Manager.
With that being said, that's everything that I wanted to cover in this architectural theory lesson.
Go ahead, complete the video, and then when you're ready, I'll look forward to you joining me in the next.
