Welcome back and in this video I want to talk about another product within AWS, Kinesis Data Streams.
So let's just jump in and get started.
Kinesis is a service that a lot of people I talk to confuse with SQS.
There are even exam questions which test your ability to select between the two.
Now this shouldn't be a difficult thing to do because they're actually very different products designed for different situations.
Kinesis is a scalable streaming service.
Now what I mean by this is that it's designed to ingest data, lots of data, from lots of devices or applications.
Producers send data into a Kinesis stream.
The stream is the basic entity of Kinesis and it can scale from low levels of data throughput to near infinite amounts of data.
Now Kinesis is a public service and it's highly available in a region by design.
You don't need to worry about replication or providing access from a network perspective.
Like other application services within AWS, all of this is handled as a service.
Kinesis streams provide a level of persistence.
You have a default 24 hour rolling window.
So when data is ingested by a Kinesis stream from a producer, it's accessible for 24 hours by default from that point.
So data which is 24 hours and one second old is discarded.
Now as a product it includes storage for that amount of data.
So however much you ingest within that 24 hour period, the storage is included.
And this window can be increased up to a maximum of 365 days for additional costs.
Kinesis supports lots of producers pushing data into a stream, but also multiple consumers reading data from that same stream.
And consumers can access data from anywhere within the rolling window, for example the default 24 hours.
And each of these consumers might access this data at different levels of granularity.
So maybe looking at data every second or looking at data points once per minute or once per hour.
This makes Kinesis great for things like analytics and dashboards.
Now visually the product architecture looks like this.
On the right we have producers and these might be things like EC2 instances, on-premises servers, mobile applications or devices and even things like IoT sensors.
On the left we have consumers, again these could be on-premises servers running software to access Kinesis, EC2 instances or even Lambda functions which can be configured to invoke when data is added to the stream.
In the middle is the stream itself and it's into this that producers send data, so the stream ingests this data.
And it's from this that consumers read the data.
Now the way that a Kinesis stream scales is by using a shard architecture.
A stream starts off with one shard and as additional scale is required shards are added to the stream.
Now each shard provides its own capacity, 1 MB per second of ingestion capacity and 2 MB per second of consumption.
The more shards a stream has the more expensive it is and the more performance that it provides.
Now what also impacts the price is the data window.
As I mentioned previously by default a stream provides a 24 hour window and this can be increased up to 365 days for additional cost.
And remember the window is also persistent so a 365 day window means 365 days worth of data stored by Kinesis.
The way that the data is stored on a stream is via Kinesis data records and these have a maximum size of 1 MB.
Kinesis data records are stored across shards meaning the performance scales in a linear way based on the number of shards.
Kinesis also has a related product called the Kinesis Data Firehose and there will be a separate video discussing this in more detail.
This connects to a Kinesis stream and can move the data which arrives onto a stream en masse into another AWS service, an example being S3.
So if you have a fleet of sensors which stream data into Kinesis and that's used for real time analysis but if you also need to store this longer term
maybe to analyze it using a different AWS product such as EMR which is a big data analytics tool then you can put that data into S3 using Kinesis Firehose.
Now I just want to spend a few moments more comparing SQS and Kinesis so that you understand the differences from a conceptual level.
Now one of the common areas of confusion is this difference between these two products.
When should you pick SQS versus Kinesis?
Well if you're in the exam and you're reviewing one particular question then you need to review it through this lens.
Is the question about the ingestion of data or is it about worker pools decoupling or does it mention asynchronous communications?
Well if it's about the ingestion of data it's going to be Kinesis.
If it's about any of the others then assume it's SQS first and only change your mind if you have strong reasons to do so.
SQS generally has one thing or one group of things sending messages to the queue.
This might be something like a web tier inside an auto scaling group.
Generally you won't have hundreds or thousands of sensors sending to an SQS queue.
It's not designed for that type of workflow.
Additionally you'll generally only have one consumer or group of consumers reading from the queue, generally a worker tier.
SQS queues are generally used for decoupling application components.
They allow asynchronous communications where the sender and receiver don't need to be aware of each other and don't care about each other.
SQS also doesn't really provide the concept of persistence.
Messages on a queue are temporary.
Once they're received and processed the next step is deletion at which point they're gone forever.
There's no concept of a time window within SQS queues.
Now contrast this to Kinesis.
It's designed for huge scale ingestion of data.
Lots of things sending data into a stream at potentially super high data rates.
And it's designed for multiple consumers, each of which might be consuming data at different rates.
Kinesis is designed for ingestion, analytics, monitoring, application clicks or mobile clickstreams.
If you think for a minute about the two products they aren't all that similar.
Either in function or in terms of the ideal architecture.
Try and make sure that before you go into the exam you really clearly see the distinction between these two products.
There's always going to be one or two questions asking you about either of these products and generally one which asks you to pick between them for a given scenario.
Now that's everything that I wanted to cover in this video at the high level about Kinesis data streams.
Thanks for watching, go ahead and complete the video and when you're ready I'll look forward to you joining me in the next.
