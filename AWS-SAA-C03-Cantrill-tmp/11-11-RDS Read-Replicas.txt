Welcome back! In this video I want to talk about RDS read replicas. Now read replicas provide a few main benefits to us as Solutions Architects or Operational Engineers.
They provide performance benefits for read operations, they help us create cross-region failover capability, and they provide a way for RDS to meet really low recovery time objectives, just as long as data corruption isn't involved in a disaster scenario.
Now let's step through the key concepts and architectures because they're going to be useful for both the exam and the real world.
Read replicas, as the name suggests, are read-only replicas of an RDS instance. Unlike Multi-AZ, where you can't by default use the standby replica for anything, you can use read replicas but only for read operations.
Now Multi-AZ running in cluster mode, which is the newer version of Multi-AZ, is like a combination of the old Multi-AZ instance mode together with read replicas.
But, and this is really important, you have to think of read replicas as separate things. They aren't part of the main database instance in any way.
They have their own database endpoint address and so applications need to be adjusted to use them.
An application, say WordPress, using an RDS instance will have zero knowledge of any read replicas by default.
Without application support, read replicas do nothing. They aren't functional from a usage perspective. There's no automatic failover, they just exist off to one side.
Now they're kept in sync using asynchronous replication. Remember Multi-AZ uses synchronous replication, and that means that when data is written to the primary instance, at the same time as storing that data on disk on the primary, it's replicated to the standby.
And conceptually think of this as a single write operation, both on the primary and on the standby.
With asynchronous, data is written to the primary first, at which point it's viewed as committed, then after that it's replicated to the read replicas.
And this means in theory there could be a small lag, maybe seconds, but it depends on network conditions and how many writes occur on the database.
For the exam, for any RDS questions, and exclude Aurora for now, remember that synchronous means Multi-AZ, and asynchronous means read replicas.
Read replicas can be created in the same region as the primary database instance, or they can be created in other AWS regions, known as cross-region read replicas.
If you create a cross-region read replica, then AWS handle all of the networking between regions, and this occurs transparently to you, and it's fully encrypted in transit.
Now why do read replicas matter? Well there are two main areas of importance that I want you to think about.
First is read performance and read scaling for a database instance.
So you can create five direct read replicas per database instance, and each of these provides an additional instance of read performance.
So this offers a simple way of scaling out your read performance on a database.
Now read replicas themselves can also have their own read replicas, but this means that lag starts to become a problem.
Because asynchronous replication is used, there can be a lag between the main database instance and any read replicas,
and if you then create read replicas of read replicas, then this lag becomes more of a problem.
So while you can use multiple levels of read replicas to scale read performance even more, lag does start to become even more of a problem.
So you need to take that into consideration. Additionally, read replicas can help you with global performance improvements for read workloads.
So if you have read workloads in other AWS regions, then these workloads can directly connect to read replicas
and not impact the performance of the primary instance in any way.
In addition, read replicas benefit us in terms of recovery point objectives and recovery time objectives.
So snapshots and backups improve RPOs. The more frequent snapshots occur and the better backups are,
this offers improved recovery point objectives because it limits the amount of data which can be lost.
But it doesn't really help us for recovery time objectives because restoring snapshots takes a long time,
especially for large databases. Now read replicas offer a near zero RPO,
and that's because the data that's on the read replica is synced from the main database instance.
So there's very little potential for data loss, assuming we're not dealing with data corruption.
Read replicas can be promoted quickly. They offer a near zero RTO.
So in a disaster scenario where you have a major problem with your RDS instance, you can promote a read replica,
and this is a really quick process. But, and this is really important,
you should only look at using read replicas during disaster recovery scenarios when you're recovering from failure.
If you're recovering from data corruption, then logically the read replica will probably have a replica of that corrupted data.
So read replicas are great for achieving low RTOs, but only for failure and not for data corruption.
Now read replicas are read only until they're promoted, and when they're promoted, you're able to use them as a normal RDS instance.
They're also a really simple way to achieve global availability improvements and global resilience,
because you can create a cross-region read replica in another AWS region and use this as a failover region if AWS ever have a major regional issue.
Now at this point, that's everything I wanted to cover about read replicas.
If appropriate for the exam that you're studying, I might have another lesson which goes into more technical depth,
or a demo lesson which allows you to experience this practically.
If you don't see either of these, then don't worry, they're not required for the exam that you're studying.
At this point though, that's everything I'm going to cover, so go ahead and complete the video,
and when you're ready, I'll look forward to you joining me in the next.
