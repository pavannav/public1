Welcome back. In this lesson, it's time to introduce another really essential AWS service, the Elastic Compute Cloud, or EC2.
EC2 is a service that you'll need to know really well for the exam and certainly if you design any real-world AWS solutions,
because it's pretty much the default compute service within AWS.
EC2 provides access to virtual machines known as instances.
If you need to deploy any form of compute which requires an operating system, a runtime environment, database dependencies, application and application interfaces,
and if you need to manage all of them, then EC2 is the service to do that from.
EC2 should pretty much be the default starting point for any compute requirement in AWS.
Now let's quickly review some important features that EC2 provides before we talk about some important architectural points.
So EC2 is IaaS. It's infrastructure as a service. It provides access to virtual machines known as EC2 instances.
Because it's IaaS, your unit of consumption is the instance.
And an instance is just an operating system configured in a certain way with a certain set of allocated resources.
Now EC2 is a private AWS service, which as you now know means that by default it runs in the private AWS zone.
Specifically, an EC2 instance is configured to launch into a single VPC subnet.
You set it when you launch the instance. And when you launch the instance you also have to configure any public access,
should you want that, because it is by default a private service.
If you do want to allow public access for an EC2 instance, then the VPC that it's running within needs to support that public access.
With the default VPC, as you found out in the previous lesson, this is configured for you.
If you use a custom VPC, which we haven't covered yet, then you need to handle that configuration.
Now because an instance is launched into a specific subnet, and because a subnet is in a specific availability zone,
it means that EC2 is AZ resilient. If the AZ that an instance is launched into fails, then the instance itself will likely fail.
Remember this right from the start, because it will help you as you move through the course, and definitely when you're answering exam questions.
When you launch an instance, you can choose from various sizes and capabilities for that instance.
These choices influence the resources that the instance gets, as well as any extra capabilities such as GPUs,
more advanced storage or networking, or any special purpose processors.
And you can change some of this afterwards as well, so for some of the decisions, you can both set when you launch the instance as well as afterwards.
Now because EC2 is IaaS, you as a consumer manage the operating system and upwards on the infrastructure stack,
meaning the AWS handle the virtualization, physical hardware, networking, storage, and facilities.
EC2 offers on-demand billing, and this is either by the second or by the hour, depending on the software that is launched with the instance.
You only pay for what you consume, so this is resources that are used while the instance is operational.
There are a few components to an instance charge. There is the charge for running the instance, so an amount for CPU and memory that the instance consumes.
There's a charge for the storage that the instance uses, and then extras for any commercial software that the instance is launched with.
Instances can use a number of different types of storage, and two popular types are storage that's on the local host, so the EC2 host that the instance runs on,
as well as another AWS service called Elastic Block Store, or EBS, which is network storage made available to the instance.
Now an EC2 instance has an attribute called a state. The state of the instance provides an indication into its condition.
Just like a computer can be powered on or powered off, an instance can be in one of a few states.
The most important states to remember at this point are running, stopped, and terminated.
There are some states in between those, such as stopping or shutting down and pending, but at this stage just focus on these three, so running, stopped, and terminated.
It's also important to understand the relationship between these states. When you launch an instance after it finishes provisioning, it moves into a running state.
And instances can be moved from running to stopped if you shut down the instance, or they can be moved from stopped to running when you start the instance up again.
These operations are used when you have no short-term need of an instance. It's just like switching off an appliance when you don't need it.
An instance can also be terminated, but this is a one-way change. If you terminate an instance either when it's running or stopped, that's it, it's terminated.
This is a non-reversible action. The instance is fully deleted.
Now the reason why these states matter so much is they influence the charges for the instance.
At a high level, an instance is composed of CPU, memory, disk, and networking.
The CPU determines how much processing can be achieved. The memory is a super-fast area to store data that's currently been worked on by the instance.
The disk, generally provided by EBS, is where more medium-term data is stored.
And the networking is how the instance communicates with other entities in AWS and beyond.
Now when an instance is in the running state, you're being charged for all four of these categories.
Now this makes sense. The instance is running on a physical host, so it's consuming CPU capacity even while idle.
It uses memory even when no processing occurs. The operating system and its data is stored on disk,
which is allocated to you regardless of whether it's being used, and some data transfer occurs,
which means the networking is generally always used while the machine is running.
When an instance is stopped, though, things are slightly different.
Being in the stopped state means that no CPU resources are being consumed.
And likewise, no memory is being used by the instance.
When the instance is stopped, you're not being charged any costs for the running of that instance because it's not consuming resources.
The instance also doesn't generate any network data because it's not running, and so generally you have no network charges.
Now the key point that tends to confuse most people, especially in exam questions,
is that storage is still allocated to the instance regardless of whether it's in a running or a stopped state.
The storage made available to the instance, for example, which has the operating system on it together with any applications,
that is still used if the instance is in a stopped state.
So you will still see charges on your bill for EBS storage even if the instance is stopped.
So that's really important to understand. The stopped instance still generates storage charges.
The only way to truly have no EC2 costs for an instance is to terminate that EC2 instance.
And when you do that, not only does it stop the resource usage, so CPU, memory and networking,
but it also deletes the disk so you don't have any storage charges.
But you need to pay special care and attention because it is not reversible.
When you terminate an instance, it stops it running but also deletes any allocated storage.
Now let's move on because I have one more core concept that I want to show you before we move on to a demo.
An AMI, or Amazon Machine Image, as the name suggests, is an image of an EC2 instance.
Now an AMI can be used to create an EC2 instance or an AMI can be created from an EC2 instance.
In the demo lesson, which we'll do together next, you'll see how we can create an EC2 instance
and how that EC2 instance is created from an AMI which AWS supply.
If you have any on-premises infrastructure experience, an AMI is similar in many ways to a server image
which can be used to create virtual machines or a USB device which is used to install Windows, macOS or Linux.
An AMI contains a few important things which you should be aware of.
Firstly, an AMI contains attached permissions and these permissions control which accounts can and can't use the AMI.
The AMI can be set as a public AMI in which case everyone is allowed to launch instances from the AMI
and this is how the Linux and Windows images that AWS provides are set to.
The second type is the owner of an AMI is implicitly allowed to create EC2 instances from the AMI
as the owner, he or she, owns it and so can control it fully.
And finally, you can add explicit permissions to the AMI
where the owner explicitly grants access to the AMI for specific AWS accounts.
So the AMI is either private so only the owner can make use of it
or you can explicitly add other AWS accounts so they're allowed access
or it can be set to public where everyone is allowed.
As well as permissions, an AMI handles two other important things.
It contains the boot volume of the instance, so this is the C drive in Windows or the root volume in Linux.
It's the drive that boots the operating system.
It can contain other volumes too, so extra drives, but it will always have at least one, the boot volume.
It also provides what's known as a block device mapping
and this is a configuration which links the volumes that the AMI has
and how they're presented to the operating system.
So it determines which volume is the boot volume and which volume is a data volume.
The way that this works is that the operating system expects to receive volumes presented to it
as well as an ID, a device ID, and the block device mapping links the volume
to the device ID that the operating system expects.
It's essentially a mapping between volumes and how the operating system sees them
and I'll demo those in the demo lesson which immediately follows this one.
Now I will be talking about AMIs in much more detail later in the course in the EC2 section
because it's really important that you understand exactly how they work.
For now it's just important that you're aware of them because we'll be using them in the next lesson.
OK, so let's move on to the last bit of theory. It's almost time for a demo.
Initially in the course we'll need to connect to EC2 instances that we launch.
Now EC2 instances can run different operating systems.
They can run a distribution or a version of Linux as well as various different versions of Windows.
You connect to Windows instances using RDP, the Remote Desktop Protocol,
and this runs on port 3389.
It's not strictly required to remember that for the exam,
but do your best to try and remember these important port numbers.
So 3389 is the Remote Desktop Protocol, which is used for Windows instances.
With Linux instances you use the SSH protocol, which runs on port 22.
When you're connecting to Linux instances, you log in or authenticate to that instance
using what's known as an SSH key pair.
So visually the way this works, depending on your operating system,
is from the Windows command prompt or from a Linux shell or from a third-party utility such as PuTTY,
you connect to the EC2 instance.
When you create an EC2 instance, you pick a key pair to use, either by creating one or using an old one.
When you create an SSH key pair, it's actually creating two parts of the same key.
The private part you can download once and only once.
So the expectation is that when you create an SSH key pair,
you download and keep the private copy of this key safe.
The public part, AWS keep, and when you select to use that key pair,
AWS place this public part on an instance.
The private part is how you authenticate to the instance.
So because the private part and the public part match,
if you are in possession of the private part,
then you can connect to an instance which has the public part on it.
Now the process is slightly different depending on whether it's a Linux instance or a Windows instance.
With a Linux instance, you're actually using this private and public key
to authenticate and connect to the instance.
If it's a Windows instance, then you need to provide this private key
to gain access to the local administrator password of the instance,
and then you connect to that instance using the remote desktop protocol,
using the local admin user and that password.
OK, so that's all the theory I wanted to cover at this stage.
Next, we're going to do a demo lesson.
I'm going to show you how to create an EC2 instance,
put it into the default VPC, give it a public IP version for IP address,
and then connect to it using the methods that we've just talked about.
So go ahead and finish off this video, and then when you're ready,
you can join me in the next demo lesson.
