Welcome back, and in this demo lesson you're going to create all of the subnets within the custom VPC for Animals for Life.
So we're going to create the subnets as shown on screen now.
We're going to be creating four subnets in each availability zone.
So that's the Web Subnet, the Application Subnet, the Database Subnet and the Reserved Subnet.
And we're going to create each of those four in availability zone A, B and C.
Now before we get started, attached to this lesson is a link to this document.
Now this is a list of all of the details of the subnets that you're going to create in this demo lesson.
So we've got a Reserved Subnet, a Database Subnet, an App Subnet and a Web Subnet.
And we've got each of those in availability zone A, B and C.
Now in terms of what this document contains, we have a subnet name, then we have the IP range that subnet will use,
the availability zone that that subnet is within and then this last value, and we'll talk about what this is very shortly.
This relates to IP version 6. Now you'll notice that for each subnet this is a unique value.
You're going to need this to configure the IP version 6 configuration for each of the subnets.
Now let's get started. So let's move to the AWS console and you need to be within the VPC console.
So if you're not already there, go ahead and type that in the search box at the top and then click to move to the VPC console.
And then click on Subnets. Once you've done that, go ahead and click on Create Subnet.
Now the newest version of the user interface allows you to create multiple subnets at a time.
And so we're going to create all four of the subnets in each availability zone.
So we'll do this three times, one for availability zone A, one for B and one for C.
So we'll get started with availability zone A and first we need to select the VPC to use.
So click in the VPC ID dropdown and select the Animals for Life VPC.
Once you've done that, we're going to start with subnet one of one. So let's move to the subnets document.
So it's these subnets that we're going to create and we'll start with the reserved subnet.
So copy the name of this subnet into your clipboard and paste it into subnet name.
Then change the availability zone to AZA. And then make sure IPv4 is set to manual and move back to the subnets document
and copy the IP range that we're going to use and paste that into this box.
Then scroll down again and make sure manual input is selected for IPv6.
Then click the dropdown and select the IPv6 range for the VPC.
Now the VPC uses a slash 56 IP version 6 range.
Because we need our subnets to fit inside this, we're going to make the individual subnet ranges much smaller.
So what I'll need you to do, and you'll need to do this each time, is to click on the down arrow
and you'll need to click on the down arrow twice.
The first time we'll change it to a slash 60 and the second time to a slash 64.
Now note in my case how I have 9, 6, 0, 0.
And if I click on this right arrow, it increments this value by one each time.
Now this value corresponds to the value in the subnets document. So in this case, 0, 0.
By changing this value each time, it means that you're giving a unique IP version 6 range to each subnet.
So in this case, start off by leaving this set to 0, 0.
And once you've done that, you can click on add new subnet.
And we're going to create the next subnet. So in this case it's sn-db-a.
So enter that name. Change the availability zone to A.
Manual input for IPv4.
Copy the IP range for db-a into your clipboard. Paste that in.
Manual for IP version 6.
Change to the VPC range in the dropdown.
Click the down arrow twice to set this to slash 64.
And then change this value to 0, 1.
And again, this matches the IPv6 value in the subnets document.
Then we'll do the same process for the third subnet. So click on add new subnet.
This time the name is sn-app-a. Enter that.
Availability zone A.
Manual for IPv4. And then paste in the IP range.
Manual for IPv6. And select the VPC range.
And then change the subnet block to slash 64 by clicking the down arrow twice.
And then click the right arrow twice to set 0, 2 as the unique value for the subnet.
And again, this matches the value in the subnets document.
Then lastly we're going to do the same thing for the last subnet in availability zone A.
So click on add new subnet. This time it's web-a.
So copy and paste that into the subnet name box.
Set availability zone A. Manual for IPv4.
Copy and paste the range from the subnets document.
Manual for IPv6.
Select the IPv6 range for the VPC.
Click the down arrow twice to set the appropriate size for the subnet IPv6 range.
And then click on the right arrow to change this value to 0, 3.
Now that's all of the subnets created. All four of them in availability zone A.
So we can scroll all the way down to the bottom and click on create subnet.
And that's going to create all four of those subnets.
And we can see those in this list.
Now we're going to follow that same process for availability zone B.
So click on create subnet.
Change the VPC to the Animals for Life VPC.
And now we're going to start moving through quicker.
So first we're going to do the reserved B subnet.
So copy the name, paste that in.
Set the availability zone this time to B.
Manual for IPv4. Paste in the range.
Manual for IPv6.
Select the VPC range in the drop down.
Click on the down arrow twice to set to slash 64.
And then click on the right arrow and set 0, 4 as the unique value.
Scroll down, click add new subnet.
Next is DBB.
Enter that. Availability zone B.
Manual for IPv4.
Enter the appropriate range.
And just take note of the IPv6 value because then we don't have to keep switching backwards and forwards to this document.
In this case it's 0, 5.
Paste in the IPv4 range.
Manual for IPv6.
Select the VPC range in the drop down.
Down arrow twice.
And then the left arrow and set 0, 5 which is the unique value for this subnet.
Click add new subnet.
This time it's app B.
Enter that name.
Availability zone B.
Manual for IPv4.
You'll need to enter the IP range for app B.
And again pay attention to the fact that the unique value for this subnet is 0, 6.
Manual for IPv6.
Select the VPC range in the drop down.
Down arrow twice.
Right arrow until it says 0, 6.
And then add new subnet again and we're going to do the last one.
This time it's web B.
Enter that in the name.
Availability zone B in the drop down.
Manual for IPv4.
Copy and paste the IP range.
And pay attention to 0, 7 which is the IPv6 unique value.
So enter the IPv4 subnet range in this box.
Manual for IPv6.
Select the VPC range in the drop down.
Down arrow twice.
And then right arrow until it says 0, 7.
And now we've done all four subnets in A, Z, B.
So click on create subnet.
And then we're going to do this one last time for availability zone C.
So click on create subnet.
Select the animals for life VPC in the drop down.
And we're going to follow the same process.
So for subnet 1 it will be SN reserved hyphen C.
Availability zone C.
You'll need to enter the IPv4 range.
Pay attention to the IPv6 unique value which is 0, 8.
Paste in that range in the box.
Manual for IPv6.
Select the VPC range.
Down arrow twice to set to slash 64.
And then right arrow until it says 0, 8.
Scroll down, add a new subnet.
Next is DBC.
So enter that.
Availability zone C.
And do the same thing as before.
We'll need the IP range and the IPv6 unique value.
So 0, 9.
Enter that.
Manual for IPv6.
Select the VPC range in the drop down.
Down arrow twice.
And then click the right arrow until 0, 9 is selected.
Add a new subnet.
Then the application subnet.
Copy that.
Paste it in.
Availability zone C.
Get the IPv4 range and the unique value for IPv6.
Now note this is hexadecimal.
So 0, A directly follows 0, 9.
So pay attention to that.
Go back.
Paste in the IPv4 range.
Manual for IPv6.
Select the VPC range.
Down arrow twice to select the IPv6 unique value.
Down arrow twice to select slash 64.
And then right arrow until you get 0, A.
Then one last time.
Click on add new subnet.
Go back to the subnets document.
Web C.
Availability zone C.
Get the IPv4 range and note the unique IPv6 value.
Paste that in.
Select the IPv6 range for the VPC.
Down arrow twice to select slash 64.
And then right arrow all the way through to 0, B.
And at that point you can go ahead and click on create subnet.
And that's created all four subnets in availability zone C.
And all of the subnets now that are within the animals for life VPC.
At least those in AZ-A, AZ-B and AZ-C.
So again we're not going to create the ones in AZ-D which are reserved for future growth.
Now there's one final thing that we need to do to all of these subnets.
So each of these subnets is allocated with an IPv6 range.
However, it's not set to auto-allocate IPv6 addressing to anything created within each of these subnets.
Now to do that go ahead and select sn-app-a.
Click on actions.
And then edit subnet settings.
And I want you to check the box to say enable auto-assign IPv6 addresses.
Once you've done that scroll to the bottom and click on save.
So that's one subnet that you've done that for.
Next I want you to do it for app B.
Follow the same process, actions, edit subnet settings.
Auto-assign IPv6, click on save.
Notice how we're not touching the IPv4 setting.
We'll be changing that as appropriate later.
Select sn-app-c and again edit subnet settings.
Enable auto-assign IPv6 and click on save.
Then we're going to do the same for the database subnets.
So DBA, edit subnet settings.
Enable IPv6 and save.
Then DBB, check this box, save.
Then DBC, edit subnet settings.
Check this box, save.
Now we'll do the reserved. So reserved A.
Then reserved B.
And then reserved C.
And then finally we're going to do the web subnet.
So we'll start with A.
Again make sure you're only changing the IPv6 box.
Save that.
Do the same with web B.
And then once that's done we'll scroll down and do the final subnet.
So web C, same process, IPv6 and save.
And at this point you've gone through the very manual process
of creating 12 subnets across three availability zones
using the architecture that's shown on screen now.
Now in production usage and in the real world you would automate this process.
You wouldn't do this manually each and every time
but I think it's important that you understand how to do this process manually
so you can understand exactly what to select when configuring automation
to achieve the same end goal.
So whenever I'm using automation I always like to understand how it works manually
so that I can fully understand what it is that that automation is doing.
Now at this point that is everything that I wanted to cover in this demo lesson.
We're going to be continually evolving this design as we move through this section of the course
but at this point that is everything I wanted to do
so go ahead and complete this video and when you're ready
I'll look forward to you joining me in the next.
