Welcome back, and in this video I want to talk about geolocation routing, which is another routing policy available within Route 53.
Now this is going to be a pretty brief video, so let's jump in and get started.
In many ways, geolocation routing is similar to latency.
Only, instead of latency, the location of customers and the location of resources are used to influence resolution decisions.
With geolocation routing, when you create records, you tag the records with the location.
Now this location is generally a country, so using ISO standard country codes.
It can be continents, again using ISO continent codes, such as SA for South America in this case, or records can be tagged with default.
Now there's a fourth type, which is known as a subdivision.
In America, you can tag records with the state that the record belongs to.
Now when a user is making a resolution request, an IP check verifies the location of the user.
Depending on the DNS system, this can be the user directly or the resolver server, but in most cases these are one and the same in terms of the user's location.
So we have the location of the user, and we have the location of the records.
What happens next is important, because geolocation doesn't return the closest record, it only returns relevant records.
When a resolution request happens, Route 53 takes the location of the user and it starts checking for any matching records.
First, if the user doing the resolution request is based in the US, then it checks the state of the user,
and it tries to match any records which have a state allocated to them.
If any records match, they're returned and the process stops.
If no state records match, then it checks the country of the user.
If any records are tagged with that country, then they're returned and the process stops.
Then it checks the continent.
If any records match the continent that the user is based in, then they're returned and the process stops.
Now you can also define a default record, which is returned, if no record is relevant for that user.
If nothing matches though, so there are no records that match the user's location, and there's no default record,
then a no answer is returned.
So to stress again, this type of routing policy does not return the closest record,
it only returns any which are applicable, or the default, or it returns no answer.
So geolocation is ideal if you want to restrict content, for example, providing content for the US market only.
If you want to do that, then you can create a US record, and only people located in the US
will receive that record as a response for any queries.
You can also use this policy type to provide language-specific content,
or to load balance across regional endpoints based on customer location.
Now one last time, because this is really important for the exam and for real-world usage,
this routing policy type is not about the closest record.
Geolocation returns relevant locations only.
You will not get a Canadian record returned if you're based in the UK and no closer records exist.
The smallest type of record is a subdivision, which is a US state.
Then you have country, then you have continent, and finally, optionally, a default record.
Use the geolocation routing policy if you want to route traffic based on the location of your customers.
Now it's important that you understand, which is why I've stressed this so much,
that geolocation isn't about proximity, it's about location.
You only have records returned if the location is relevant.
So if you're based in the US but are based in a different state than a record, you won't get that record.
If you're based in the US and there is a record which is tagged as the US as a country,
then you will get that record returned.
If there isn't a country-specific record, but there is one for the continent that you're in,
you'll get that record returned.
And then the default is a catch-all.
It's optional. If you choose to add it, then it's returned if your user is in a location
where you don't have a specific record tagged to that location.
Now that's everything that I wanted to cover in this video.
Thanks for watching. Go ahead and complete the video.
And when you're ready, I look forward to you joining me in the next.
