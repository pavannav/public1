Welcome to this lesson where I'm going to be talking about S3 Access Points, which is a feature of S3 which improves the manageability of S3 buckets,
especially when you have buckets which are used by many different teams or users, or when buckets store objects with a wide range of functions.
Now we have a good amount to cover, so let's just jump in and get started.
S3 Access Points simplify the process of managing access to S3 buckets and objects.
I want you to imagine an S3 bucket with billions of objects using many different prefixes.
Imagine this bucket is accessed by hundreds of different teams within the business.
Now by default you would have one bucket with one really complex bucket policy. It would be hard to manage and prone to errors.
Access points allow you to conceptually split this. You can create many access points for a bucket,
and each of these can have different policies, so different access controls from a permissions perspective.
But also, each access point can be limited in terms of where they can be accessed from, so for example a VPC or the internet.
Every access point has its own endpoint address, and these can be given to different teams.
So rather than using the default endpoint for S3 and accessing the bucket as a whole,
users can use a specifically created access point along with that specific endpoint address,
and get access to part of that bucket, or the whole bucket, but with certain restrictions.
Now you can create access points using either the console UI, or you can use the CLI or API using create-access-point.
And it's important that you remember this command. Please try and remember create-access-point.
Now it's going to be easier for you to understand this architecture if we look at it visually.
Let's explore how everything fits together using an architecture diagram, and we're going to use a typical example.
Let's say that we have an S3 bucket, and this bucket stores sensitive health information for the Animals for Life organization.
Now this includes health information about the animals, but also the staff working for the business,
such as medical conditions and any vaccination status.
Now we have three different sets of staff. We have admin staff, field workers, and vet staff.
The admin staff look after the organization's employees.
The field workers actually visit other countries doing wildlife studies and helping animals,
and then the vet staff look after the medical needs of any animals which the business takes care of.
Now in this example, the business are also using a VPC with some instances and other resources performing data analysis functions.
If we weren't able to use access points, then we'd have to manage the bucket as a monolithic entity,
managing a large and complex bucket policy to control access for identities within this account and potentially other accounts.
And this can become unwieldy very quickly.
One option that we have is to use access points, and you can conceptually think of these as mini buckets or views on the bucket.
So we might have three access points for our three types of users, and then one for the VPC.
Now each of these access points will have a unique DNS address for accessing it, and it's this DNS address that we would give to our staff.
But more than this, each access point also has its own policy,
and you can think about this as functionally equivalent to a bucket policy,
in that it controls access to the objects in a bucket when using that access point.
So this can control access to certain objects, prefixes or certain tags on objects, and so it's super powerful.
So now that we have a unique DNS name and a unique policy,
essentially we have mini buckets which are independently controlled,
and this makes it much easier to manage the different use cases for the main bucket,
and our staff can access it via the access points.
From the VPC side, access points can be set to only allow a VPC origin,
which means that the access point is tied to a specific VPC.
This will need a VPC endpoint in the VPC, and the two can be tied together
so that the S3 endpoint in the VPC can be configured to only allow access via the S3 access point.
Now one really crucial thing to understand permissions-wise
is that any permissions defined on an access point need to be also defined on the bucket policy.
So in this example, if the VET staff were granted access via an access point policy,
then the same would need to also be granted via the bucket policy.
Now you can do delegation where on the bucket policy you grant wide open access via the access point.
So as long as the access point is used, any action on that bucket's objects is allowed,
and then you define more granular control over access to objects in that bucket using the access point policies,
and that's a pretty common permissions architecture to make things simpler to manage.
Now I've included a link attached to this lesson with more details on permissions delegation
together with some example access point policies.
You won't need this for the exam, but if you do want to do a bit of extra reading,
do make sure you check out the links included with this lesson.
Now at this point, that's everything I wanted to cover.
You just need to have an overview of how this works.
At this point though, that's everything, so thanks for watching.
Go ahead and complete this video, and when you're ready, I'll look forward to you joining me in the next.
