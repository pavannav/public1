Welcome back, and in this lesson I want to talk through another type of storage, this time instant store volumes.
It's essential for all of the AWS exams and real-world usage that you understand the pros and cons for this type of storage.
It can save money, improve performance, or it can cause significant headaches, so you have to appreciate all of the different factors.
So let's just jump in and get started, because we've got a lot to cover.
Instant store volumes provide block storage devices, so raw volumes which can be attached to an instance,
presented to the operating system on that instance, and used as the basis for a file system, which can then in turn be used by applications.
So far they're just like EBS, only local, instead of being presented over the network.
These volumes are physically connected to one EC2 host, and that's really important.
Each EC2 host has its own instant store volumes, and they're isolated to that one particular host.
Instances which are on that host can access those volumes, and because they're locally attached,
they offer the highest storage performance available within AWS, much higher than EBS can provide, and more on why this is relevant very soon.
They're also included in the price of any instances which they come with.
Different instance types come with different selections of instant store volumes,
and for any instances which include instant store volumes, they're included in the price of that instance, so it comes down to use it or lose it.
One really important thing about instant store volumes is that you have to attach them at launch time, and unlike EBS, you can't attach them afterwards.
I've seen this question come up a few times in various AWS exams about adding new instant store volumes after instance launch,
and it's important that you remember that you can't do this. It's launch time only.
Depending on the instance type, you're going to be allocated a certain number of instant store volumes.
You can choose to use them or not, but if you don't, you can't adjust this later.
This is how instant store architecture looks. Each instance can have a collection of volumes which are backed by physical devices on the EC2 host which that instance is running on.
So in this case, host A has three physical devices, and these are presented as three instant store volumes, and host B has the same, three physical devices.
Now in reality, EC2 hosts will have many more, but this is a simplified diagram.
Now on host A, instance 1 and 2 are running, instance 1 is using one volume, and instance 2 is using the other two volumes, and the volumes are named ephemeral 0, 1 and 2.
Roughly the same architecture is present on host B, but instance 3 is the only instance running on that host, and it's using ephemeral 1 and ephemeral 2 volumes.
Now these are ephemeral volumes, they're temporary storage. As a solutions architect, or a developer, or an engineer, you need to think of them as such.
If instance 1 stored some data on ephemeral volume 0 on EC2 host A, let's say a cat picture, and then for some reason the instance migrated from host A through to host B,
then it would still have access to an ephemeral 0 volume, but it would be a new physical volume, a blank block device.
So this is important if an instance moves between hosts, then any data that was present on instance store volumes is lost, and instances can move between hosts for many reasons.
If they're stopped and started, this causes a migration between hosts, or another example is if host A was undergoing maintenance, then instances would be migrated to a different host.
When instances move between hosts, they're given new blank ephemeral volumes, data on the old volumes is lost, they're wiped before being reassigned, but the data is gone.
And even if you do something like change an instance type, this will cause an instance to move between hosts, and that instance will no longer have access to the same instance store volumes.
This is another risk to keep in mind. You should view all instance store volumes as ephemeral.
The other danger to keep in mind is hardware failure. If a physical volume fails, say the ephemeral 1 volume on EC2 host A, then instance 2 would lose whatever data was on that volume.
These are ephemeral volumes, treat them as such, they're temporary data, they should not be used for anything where persistence is required.
Now the size of instance store volumes and the number of volumes available to an instance vary depending on the type of instance and the size of instance.
Some instance types don't support instance store volumes, different instance types have different types of instance store volumes,
and as you increase in size, you're generally allocated larger numbers of these volumes, so that's something that you need to keep in mind.
One of the primary benefits of instance store volumes is performance. You can achieve much higher levels of throughput and more IOPS by using instance store volumes versus EBS.
I won't consume your time by going through every example, but some of the higher-end figures that you need to consider are things like if you use a D3 instance,
which is storage-optimized, then you can achieve 4.6 GB per second of throughput, and this instance type provides large amounts of storage using traditional hard disks,
so it's really good value for large amounts of storage. It provides much higher levels of throughput than the maximums available when using HDD-based EBS volumes.
The i3 series, which is another storage-optimized family of instances, these provide NVMe SSDs, and this provides up to 16 GB per second of throughput,
and this is significantly higher than even the most high-performance EBS volumes can provide, and the difference in IOPS is even more pronounced versus EBS,
with certain i3 instances able to provide 2 million read IOPS and 1.6 million write IOPS when optimally configured.
In general, instance store volumes perform to a much higher level versus the equivalent storage in EBS.
I'll be doing a comparison of EBS versus instance store elsewhere in this section, which will help you in situations where you need to assess suitability, but these are some examples of the raw figures.
Now, before we finish this lesson, just a number of exam power-ups.
Instance store volumes are local to an EC2 host, so if an instance does move between hosts, you lose access to the data on that volume.
You can only add instance store volumes to an instance at launch time. If you don't add them, you cannot come back later and add additional instance store volumes,
and any data on instance store volumes is lost if that instance moves between hosts, if it gets resized, or if you have either host failure or specific volume hardware failure.
Now, in exchange for all of these restrictions, of course, instance store volumes provide high performance, so it's the highest data performance that you can achieve within AWS.
You just need to be willing to accept all of the shortcomings around the risk of data loss, its temporary nature, and the fact that it can't survive through restarts or moves or resizes.
It's essentially a performance trade-off. You're getting much faster storage as long as you can tolerate all of the restrictions.
Now, so generally, when you're provisioning an instance which does come with instance store volumes, there is no advantage to not utilizing them.
You can decide not to use them inside the OS, but you can't physically add them to the instance at a later date.
Just to reiterate, and I'm going to keep repeating this throughout this section of the course, instance store volumes are temporary.
You cannot use them for any data that you rely on or data which is not replaceable, so keep that in mind.
It does give you amazing performance, but it is not for the persistent storage of data.
But at this point, that's all of the theory that I wanted to cover, so that's the architecture and some of the performance trade-offs and benefits that you get with instance store volumes.
Go ahead and complete this video, and when you're ready, join me in the next, which will be an architectural comparison of EBS and instance store, which will help you in exam situations to pick between the two.
