Welcome back. In this lesson, I want to introduce Virtual Private Clouds, known as VPCs.
VPC is the service you will use to create private networks inside AWS that other private services will run from.
VPCs are also the service which is used to connect your AWS private networks to your on-premises networks when creating a hybrid environment.
Or it's the service which lets you connect to other cloud platforms when you're creating a multi-cloud deployment.
Now you'll get lots of networking and VPC-related questions in the exam, so it's a service that you really need to understand.
This lesson is going to be an introduction, just to get you across the basic concepts.
And then later in the course, I'll add all the detailed information that you'll need for the exam.
OK, let's jump in and get started.
So first, let's cover some key points.
A VPC, or Virtual Private Cloud, is a virtual network inside of AWS.
When you create a VPC, you are doing so within an AWS account, and specifically within a region of that AWS account.
VPCs are regional services, meaning they're regionally resilient.
VPCs operate from multiple availability zones in a specific AWS region.
Now that you've done the AWS infrastructure lesson, this should make a lot more sense.
Now a VPC, by default, is private and isolated.
Services deployed into the same VPC can communicate, but the VPC is isolated from other VPCs and from the public AWS zone and public internet.
That's, of course, unless you configure otherwise.
Now there is one exception to this, the default VPC.
There are two types of VPC available inside a region.
The default VPC, of which there is a maximum of one per region, and custom VPCs.
Now you can only have one default VPC per region.
I'm going to stress that point, because it really is important for the exam.
One default VPC per region, but you can have many custom VPCs in a region.
Custom VPCs, as the name suggests, are custom, so you can configure them in any way that you want,
as long as you stay within the rules and limits of VPCs, which I will be covering later in the course.
Custom VPCs require that you configure everything end-to-end in detail, and they're also 100% private by default.
You'll use custom VPCs in almost all serious AWS deployments, because you can configure them exactly how you need.
They can be configured in a variety of sizes and structures.
They can be linked with other VPCs and even configured to communicate with other cloud platforms and your on-premises networks.
Default VPCs are initially created by AWS, and there is one per region created by default.
They come pre-configured in a very specific way, and all of the networking configuration is handled on your behalf by AWS.
But because of that, they're a lot less flexible than custom VPCs.
In this lesson, I want to focus on VPC architecture and the default VPC.
Later on in the course, I'll have a specific set of sections which cover custom VPCs in much more depth.
So let's have a look at a quick visual summary.
VPCs are created within an AWS account, more specifically than that within an AWS region.
Let's use US East 1 as an example.
A region can have multiple custom VPCs created within it, and unless you configure it otherwise,
there is no way for VPCs to communicate outside of their specific private network.
So there is a boundary on the edge or the perimeter of a VPC, and no traffic can cross that boundary unless you specifically allow it.
So a custom VPC by default is entirely private.
I mentioned at the start of the lesson that VPCs are regionally resilient, and it's important that you know how that works.
With this example, we're based in US East 2, and for now we're talking about the default VPC inside this region.
Every VPC is allocated a range of IP addresses called the VPC CIDR,
and the VPC CIDR defines the start and end range of IP addresses that the VPC can use.
Everything inside a VPC uses the CIDR range of that VPC.
If anything needs to communicate with a VPC, and assuming you allow it, it needs to communicate to that VPC CIDR.
Any outgoing connections will initially originate from somewhere in that VPC CIDR, so it's just the IP address range of the VPC.
Now, custom VPCs can have multiple CIDR ranges, but the default VPC only gets one, and it's always the same.
It's 172.31.0.0.16.
Now, this is one of the strengths of the default VPC. It's always configured in the same predictable way.
Because you've now completed the AWS infrastructure lesson, you'll know that a region has multiple availability zones.
In this case, US East 2A, 2B and 2C. Each of those is an independent pool of infrastructure.
The way in which a VPC provides resilience is that it can be subdivided into subnets, which is short for subnetworks.
Each subnet inside a VPC is located in one availability zone. This is set on creation and can never be changed.
With the default VPC, it's always configured in the same way.
It's pre-configured to have one subnet in every availability zone in that region.
So with this example of US East 2, that's a subnet in availability zone US East 2A, 2B and 2C.
Now, each of these subnets use part of the VPC's range of IP addresses, its CIDR range.
These cannot be the same as other subnets in the VPC, and they can't overlap with any of the subnets inside the VPC.
Think of this like carving a big cake, so the cake represents the VPC into smaller pieces, which represent the subnets.
Now, the IP ranges that the subnets are given, these also define the start and end IP addresses, which any private services inside those subnets will use.
So this is how a VPC is resilient. It's deployed into a region and it's broken down into subnets.
Each subnet is inside one availability zone, so if that availability zone fails, then the subnet in that availability zone also fails.
But any of the other subnets inside the VPC that are located in other availability zones, they'll continue to operate normally, as long as the other availability zones are unaffected.
Now, there's a whole section later in the course on VPC's. For now, I just want you to have a high level understanding and know enough about the default VPC that any of the lessons in this section of the course will make sense.
So let's quickly review some facts about the default VPC before we move across to a quick demo.
So these facts are specific to the default VPC only. So there can only be one default VPC per region. That's a maximum.
You can delete the default VPC and recreate it. So a region, in theory, could have zero default VPCs.
It's worth mentioning that some services inside AWS assume that the default VPC will be present, so I do tend to leave the default VPCs active in my regions, but tend not to use them for anything production related, because they're too inflexible.
One of the strengths and weaknesses of the default VPC is that its side-arrange is always 172.31.0.0.16, and this is the same in every region.
Default VPCs always have the same predictable structure, but this structure can't be changed, and so it's pretty limiting for any production deployments.
Now the number of IP addresses available to the default VPC is fairly large, because it uses a slash 16 slider.
Inside every default VPC, a smaller slash 20 subnet is created in every availability zone in that region.
So in some regions that might be three, in some other regions it might be four. It varies based on the number of AZs in that region.
Now the higher that the side-arrange slash number is, the smaller the network is.
A slash 17, for example, is half the size of a slash 16, so two slash 17s will fit into one slash 16.
That means that 16 slash 20 subnets can fit into the slash 16 that the VPC uses.
So whatever region you pick, there's going to be plenty of spare capacity, enough for up to 16 availability zones.
The default VPC comes with a few things pre-configured, and don't worry, I'll cover exactly what these do in the VPC section of the course.
But for now, in summary, you're provided with an internet gateway, which allows the VPC to communicate with the internet and vice versa,
a default VPC security group and network ACL or NACL are also created, and these are security features to limit incoming and outgoing data transfer.
By default, anything placed in the default VPC subnets is assigned a public IP version 4 address.
Remember in the lesson where I covered private and public services, I said how some private services can be made public
by projecting parts of themselves into the AWS public zone, and this is an example of that.
The subnets are configured to provide anything that is deployed into those subnets with public IP addresses, and these are in the public zone.
So this is something that is specific to the default VPC only, it comes pre-configured this way.
If you deploy any services into the default VPC, by default they do have public IP version 4 addressing.
OK, so let's move on and see how the default VPC is created and how it looks inside the console.
It's time for a demo.
OK, so I'm logged into the AWS console using the general AWS account, and I'm going to move across to the VPC area of the console.
So this is a freshly created AWS account, and I've not used it to deploy any services.
So the configuration that it's in now is exactly how accounts come when first created.
So I'll move across to your VPCs, and we'll notice that we've got this one single VPC entry, and this is the default VPC.
If we just scroll across to the right here, we can see in this column it says default VPC and yes, so that's how we know that it's the default VPC.
In addition to that, we can tell that it's the default VPC because it's using this standard IP version 4-sider of 172.31.00.16.
I'll just move across to subnets, and we'll notice how we've got six subnets that have been created inside this default VPC.
Now I'm using the Northern Virginia region. This is the region that I'm going to use by default throughout this course.
And this region has six availability zones, so it has one A, one B, one C, one D, one E, and one F.
So inside this default VPC, we've got a total of six subnets, one in each availability zone.
So this is standard. You'll see that the number of subnets differs depending on the region that you use.
If I use the region dropdown and change to US East 2, which was the region that I was using in the example for the theory-based portion of this lesson,
you'll note how the number of subnets changes from six to three, and that's because US East 2 has three active availability zones.
So we can see US East 2A, US East 2B, and US East 2C. I'm only going to do that temporarily, so I'm going to move back to Northern Virginia.
Now I mentioned in the theory part of the lesson that we do have various bits of networking that are created with this default VPC.
So we've got an internet gateway that's been created, we've got a VPC default network ACL,
as well as a default security group that's also created for the default VPC.
Now default VPCs can be deleted, so if I select the default VPC and then move down to delete VPC,
I'll have to acknowledge the deletion of all of the associated resources.
Once done, I'll click on delete VPC, and that will proceed to delete all of the network configurations,
so the internet gateway, the default security group, the default network ACL, and finally the VPC itself.
Now clicking on create VPC is where I would click to create custom VPCs.
To recreate the default VPC, you need to go to actions and create default VPC.
Now this is something that historically you needed to log a support ticket with the AWS support team,
and they would create it on your behalf, but you can now do that from within the AWS console.
So I'll go ahead and click on create, and that'll begin the creation process for the default VPC.
And note how this newly created default VPC didn't ask me for any configuration information,
but it's using the same static VPC side arrange,
and it's going to have created the same number of subnets, one in each availability zone.
And that's pretty much everything I wanted to cover in this lesson.
I wanted to give you just an overview of the default VPC,
as well as this static consistent structure that gets created along with it.
Now very soon in the course we'll be switching over to using custom VPCs,
because it is best practice not to use the default VPC.
And once we start reviewing the information in the course scenario,
so that's the Animals for Life organization,
you'll note pretty quickly why we can't use the default VPC,
and I'll be explaining that a little bit further on in the course.
For now, that's everything I wanted to cover.
So go ahead, mark this video as complete, and when you're ready, join me in the next.
