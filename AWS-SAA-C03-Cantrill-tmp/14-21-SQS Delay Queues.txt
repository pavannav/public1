Welcome back, and in this lesson I want to cover a feature of SQS called Delay Cues,
and this is going to be a quick topic, it's just something that you'll need to understand
for the exam, and it might come in useful for the real world, so let's just jump in
and get started.
Delay cues at a high level allow you to postpone the delivery of messages to consumers.
Now as a refresher, by now you'll understand the concept of a visibility timeout.
The concept is simple enough but we'll use this as an opportunity for a quick refresher.
So we start with an SQS cue, and inside this cue we send a single message which is added
to the cue using the send message operation.
Once a message is in the cue, messages can be polled using receive message, and while
the message is being processed, the visibility timeout takes effect.
During this time, any further receive message calls will return no results.
During this processing period, either the process will complete and the message will
be explicitly deleted or not.
If not, this suggests a failure in processing and the message will reappear on the cue.
Now the visibility timeout period is configurable.
The default is 30 seconds and the valid range is 0 seconds through to 12 hours, and this
value can be changed on a per cue or per message basis, in which case it's changed
with the change message visibility operation.
Now the critical thing to understand about visibility timeout is that messages need to
appear on the cue and be received before this visibility timeout occurs.
So this is used to allow automatic reprocessing.
So you receive messages from a cue and you begin processing.
If that processing fails and the application doing it crashes, it might not be in a position
where it can tell the cue that processing has failed, and so visibility timeout means
that after a certain configurable duration, that message will reappear in the cue and
can be processed again.
So visibility timeout is generally used for error correction and automatic reprocessing.
Now a delay cue is significantly different.
With a delay cue, we configure a value called delay seconds on that cue.
Now this means that messages which are added to the cue will start off in an invisible
state for that period of time.
So when messages are added, they're conceptually parked or invisible for that duration of
time.
They're not available on the cue.
During this delay seconds period, any receive messages operation will return nothing.
Once the period expires, the message will be visible on the cue.
Now the default is zero, and for a cue to be a delay cue, it needs to be set to a non-zero
value, and the maximum is 15 minutes.
You can also use message timers to configure this on a per message basis, and this has
the same minimum of zero and maximum of 15 minutes.
But it is important to know that you can't use this per message setting on FIFO cues.
It's not supported.
Delay cues in a way are similar to visibility timeouts because both features make messages
unavailable to consumers for a specific period of time.
But the difference between the two is that for delay cues, a message is hidden automatically
when it's first added to the cue.
Using visibility timeouts, a message is initially visible, and it's only hidden after it's
consumed from the cue and automatically reappears if that message isn't deleted.
So delay cues are generally used when you need to build in a delay in processing into
your application.
Maybe you need to perform a certain set of tasks before you begin processing a message,
or maybe you want to add a certain amount of time between an action that a customer
takes and further processing of the message that represents that action.
Visibility timeouts are used to support automatic reprocessing of problematic messages, so it's
important to understand that these two are completely different features.
Now with that being said, that is everything I wanted to cover in this lesson.
I'll make sure I include some links attached to this lesson which provide additional information,
but this is what you'll need to understand for the exam and to get started in the real
world.
At this point though, you can go ahead and complete the video, and when you're ready,
I'll look forward to you joining me in the next lesson.
