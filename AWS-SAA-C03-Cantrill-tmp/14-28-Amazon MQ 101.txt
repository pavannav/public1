Welcome back, and in this lesson I want to very briefly touch on Amazon MQ.
Amazon MQ is a product which is almost like a merge between SQS and SNS, but using open standards.
Now it's something that you need to understand for the exam, so let's jump in and get started.
And I'm going to keep this as brief as possible.
To understand when you would use Amazon MQ, it's good to put it into context versus the other AWS products which are similar.
SNS and SQS are AWS services which utilise AWS APIs.
SNS provides topics, which are one to many communication channels,
and SQS provides queues, which are one to one communication channels.
Now while queues can have multiple compute things adding to the queue and removing from it,
conceptually it's the same worker group at each side, so it's one to one communications.
And queues are generally used to allow different components of an application to be decoupled.
Now both of these services, so SNS and SQS, are both public services within AWS,
meaning they can be accessed from anywhere which has network connectivity to the public endpoint for those services.
They're also both highly scalable and integrated with AWS from an API's perspective,
but also other AWS products can directly use them.
Now the problem is that larger organisations might already use topics and queues,
meaning they might already have an on-premise messaging system.
And this on-premise messaging system, or queuing system, might already use certain industry standards.
That organisation might want to migrate that existing system into AWS,
and if that's the case, SNS and SQS won't work without application modification.
To migrate an existing messaging system or queuing system into AWS without application modification
means that we need a standards compliant solution.
Amazon MQ is an open source message broker.
It's based on a managed implementation of Apache Active MQ,
which is one of the most common enterprise message broker solutions.
If you need a system which supports the JMS API or protocols such as AMQP, MQTT, OpenWire or Stomp,
then this means that you need Amazon MQ.
Now the product provides both queues and topics,
so it provides both one-to-one and one-to-many messaging architectures,
and it does so within the same product.
Now it's a managed service, but not managed in the same way that SNS and SQS are.
With Amazon MQ, you're provided with message broker servers,
and these can either be a single instance for test development,
or if you're cost-conscious, or a highly available pair for production usage.
One critical thing to understand about Amazon MQ is that unlike SQS and SNS,
it's not a public service.
It runs in a VPC, and so private networking or holes in a firewall are required for anyone who needs to access it.
And it also doesn't have native AWS integration,
so you can't use it with other AWS products and services in the same way as SNS and SQS,
because other services expect to use SNS and SQS.
So you do have to keep in mind both the strengths and the limitations of this product,
and in the exam you will be expected to be able to identify the types of situation
when you would select to use Amazon MQ,
and I'll be touching upon that towards the end of this lesson.
Now this is an architecture of SNS which you've seen before.
Publishers add messages to a topic, subscribers get those messages delivered,
and SNS as a service runs in the public AWS zone,
so it's accessible anywhere which has a network connection.
This is how SQS functions.
Again, messages can be added to a queue and received at the other side of that queue,
and once again it's an AWS public service,
meaning it's accessible anywhere which has a network connection with connectivity to the public SQS endpoint.
So visually, this is how a typical Amazon MQ deployment might look.
You might have an existing on-premises environment with an existing messaging infrastructure.
In this example, a message producer interacts with an on-premise implementation of ActiveMQ.
Now if you want to migrate this into AWS or begin a period of coexistence,
then you need an AWS environment, and let's say we have one with two availability zones,
and let's say into this environment you provision a highly available pair of Amazon MQ servers
which would deploy a primary and standby and use EFS for shared storage between the two by default.
This means data is replicated between availability zones and between the brokers.
Now the really, really crucial thing to understand for the exam is that Amazon MQ is not a public service,
and this means that you need a private network connection between your on-premises environment and AWS.
Now this could be a virtual private network or it could be a direct connect.
This private networking means that the on-premises broker and the AWS managed pair
can communicate over this connection.
And this is what allows any migrated application to communicate with those brokers
using standard protocols and integrate with the on-premises implementation.
Now before we finish, I want to go through a few considerations that you should be aware of for the exam.
So your default position should be to use SNS or SQS for most new implementations where you require topics or queues.
You should always select to use SNS or SQS if you need topics or queues and AWS integration is required.
So if you want to take advantage of other AWS services for logging or permissions or encryption,
or if you're using other AWS services which expect SNS and SQS to exist,
then this is a good reason to pick SNS or SQS.
You should choose Amazon MQ if you need to migrate from an existing system with little to no application change,
and especially if you need to utilize APIs such as JMS or protocols such as AMQP, MQTT, OpenWire and Stomp.
Remember though, if you do decide to use Amazon MQ, and this is really important, I've seen it in a number of exam questions,
you need to make sure that you do have the appropriate private networking configured.
Amazon MQ is not a public service.
It occupies a VPC and anything which accesses the service needs to have access to that networking inside the VPC.
Now again, you don't need to have extensive knowledge of this product for the exam.
I have started to see more and more questions crop up dealing with hybrid style scenarios where an existing system exists on premises
and you need to migrate from it into AWS or establish coexistence with that existing system.
And for both of those type of architectures, Amazon MQ is an excellent solution.
With that being said though, that's everything I wanted to cover in this lesson, so go ahead, complete the lesson,
and when you're ready, I'll look forward to you joining me in the next.
