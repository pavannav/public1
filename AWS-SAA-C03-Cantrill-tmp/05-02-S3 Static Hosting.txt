Welcome back. In this lesson I want to talk about a feature of S3, which I use all the time, both personally and when I'm doing consulting work for clients.
And that is S3 static website hosting.
Until this point we've been accessing S3 via the normal method which is using the AWS APIs.
You might not have realised that, but that's how the AWS CLI tools and the console UI work behind the scenes.
For instance, to access any objects within S3, we're using the S3 APIs and assuming we're authenticated and authorised, we use the get object API call to access those resources.
Now accessing S3 using APIs, that's useful in certain situations because it's secure and flexible.
But using static website hosting can make S3 infinitely more useful because it allows access via standard HTTP by individuals using a web browser.
So you can use it to host almost anything. For example, a simple blog.
Using static website hosting is pretty simple. You enable it and in doing so you have to set an index document and an error document.
When you're using a website, if you access a particular page, say for example catsareamazing.html, then you will get access specifically to that page.
If you don't specify a page, for example netflix.com, you get what's called an index page, which is a default page returned to you when you aren't asking for anything specific.
This is the entry point to most websites. So when enabling static website hosting on an S3 bucket, we have to point the index document at a specific object in the S3 bucket.
The error document is the same, but it's used when something goes wrong. So if you access a file which isn't there or there is another type of server-side error, that's when the error document is shown.
Now both of these need to be HTML documents because the static website hosting feature delivers HTML files.
When you enable this feature on a bucket, AWS creates a static website hosting endpoint.
And this is a specific address that the bucket can be accessed from using HTTP.
Now the exact name of this endpoint is influenced by the bucket name that you choose and the region that the bucket is in.
You don't get to select this name, it's automatically generated by those two things.
Now you can use your own custom domain for a bucket, but if you do want to do that then your bucket name matters.
You can only use a custom domain with a bucket if the name of the bucket matches the domain.
So if I wanted to have a website called top10.animalsforlife.org, then my bucket name would need to be called top10.animalsforlife.org.
And that's why I mentioned at the start of the course to get into the habit of reserving your website names by creating S3 buckets using those names.
So static website hosting is great for things like hosting static websites such as blogs, but it's also good for other things.
Let's take a look at two common examples.
There are two specific scenarios which are perfect for S3, offloading and out of band pages.
With offloading, let's say you have a website which has a top10 leaderboard of all of the best animals and it runs on a compute service.
Let's assume this is EC2 for now.
The compute service does a few things. It delivers a dynamic HTML page and it delivers static media.
In this example, images. That dynamic HTML page might need access to a database, so that's not suitable for static S3 hosting.
But the static media, that's sitting there waiting to be delivered.
And in most cases it probably makes up over 95% of the data volume that the compute service is delivering and likely almost all of the storage space.
Compute services tend to be relatively expensive, so we can offload a lot of this to S3.
What we can do is we can take all of the images, so all of the media that the compute service hosts,
and we can move that media to an S3 bucket that uses static website hosting, so one which has static website hosting enabled.
Then, when the compute service generates the HTML file and delivers this to the customer's browser,
this HTML file points at the media that's hosted on the S3 bucket.
So the media is retrieved from S3, not the compute service.
S3 is likely to be much cheaper for the storage and delivery of any media versus a compute service.
S3 is custom designed for the storage of large data at scale,
and so generally whenever you've got an architecture such as this, you should always consider offloading any large data to S3.
Now the other benefit that I wanted to specifically highlight is out-of-band pages.
Now out-of-band is an old telecommunications term.
In an IT context, it generally means a method of accessing something that is outside of the main way.
So for example, you might use out-of-band server management,
and this lets you connect to a management card that's in a server using the cellular network.
That way, if the server is having networking issues with the normal access methods of the normal network,
then you can still access it.
In the context of this example, so top10.animalsforlife.org,
it might refer to an error or a status notification system.
For example, with this example, the favourite animals page for Animals for Life,
if that service was hosted on a compute service such as EC2,
and we wanted a maintenance page to show during scheduled or unscheduled maintenance periods,
it wouldn't make much sense to have this on the same server,
because if the server is being worked on, then it's inherently offline.
Additionally, putting it on a different EC2 instance is also risky,
because if EC2 itself has issues, it might not let us show the status page.
So what we do is we use out-of-band pages.
In this context, another service.
So if the server was offline for maintenance or it was experiencing stability or performance bugs,
then we could change our DNS and point customers at a backup static website hosted on S3,
and this could provide a status message or maybe the details for our business's support team.
Now the pricing structure for S3, once you understand it, is very simple,
but it's formed of a number of major components.
First, we've got the cost to store data on S3,
and this is generally expressed as a per gigabyte month fee.
So to store a gigabyte of data on S3 for one month, there's a certain cost.
And if you store data for less than one month, then you only pay that component.
And if you store less than one gig, you only pay that component.
So it's a per gig month charge.
Now there's also a data transfer fee.
So for every gigabyte of data that you transfer in and out of S3, there's a cost.
Now to transfer data into S3 is always free, so you're never charged for transferring data into S3.
To transfer data out of S3, there is a per gigabyte charge.
Now for storage and data transfer, they are both incredibly cheap.
It's some of the cheapest storage that's available, especially if you're storing large amounts of data.
But there is also a third component that you do need to be aware of,
and this is especially important when you're using static website hosting.
And this is that you're charged a certain amount for requesting data.
So every time you perform an operation, every time you get, every time you list, every time you put,
that's classed as an operation.
And different operations in S3 have different costs per 1,000 operations.
Now the reason I mention this is if you're using static website hosting,
you're generally not going to store a lot of data.
You're also generally not going to transfer a lot of data,
because what's stored in the S3 bucket is likely to be very small.
But if you have a large customer base, and if this out-of-band website or this offloading bucket
is actually being used heavily by a system, then you could be using a lot of requests,
and so you need to be aware of the request charge for S3.
Now in terms of what's provided in the free tier, you're given 5GB of monthly storage inside S3.
You're allowed 20,000 GET requests and 2,000 PUT requests.
So that will cover us for the demo lesson that we're going to do inside this course,
and probably most of the other activities that we'll do throughout the course.
But if you're going to use S3 for any real-world usage, then you will be billed for that usage.
I run a personal blog, Cantrell.io, and that runs from S3 using the static website hosting feature.
And because I post certification articles, it does get some fairly heavy use.
Now, in the entire time that I've rammed my personal blog,
I think the most that I've ever been charged for S3 usage is 17 cents in one month.
So when I talk about being charged for S3, I'm going to mention it whenever we go beyond this free tier,
but keep in mind that often I'm talking about really tiny amounts of money relative to the value that you're getting.
So you can store a lot in S3 and use it to deliver a lot of data,
and often be charged a really tiny amount of money.
Often something that isn't noticeable on the bill of a production AWS account.
Okay, that's enough on the theory of static website hosting, so now it's time for a demo.
And in this demo, we're going to be using S3 to create a simple static website.
Now I think this demo is going to be a useful one,
because it brings together a few of the theory concepts that I've been talking about over the last few lessons.
So go ahead, mark this video as complete, and when you're ready, you can join me in the next demo lesson.
