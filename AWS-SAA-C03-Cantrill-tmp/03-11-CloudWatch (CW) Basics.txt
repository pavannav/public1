Welcome back, and in this lesson I want to talk about CloudWatch.
CloudWatch is a core product inside AWS.
It's a support service which is used by almost all other AWS services,
especially for operational management and monitoring.
Now, CloudWatch performs three main jobs, and it's important that you understand all three.
So let's jump in and get started.
At a high level, CloudWatch is a product which collects and manages operational data on your behalf.
Operational data is any data generated by an environment either detailing how it performs,
how it nominally runs, or any logging data that it generates.
You can think of CloudWatch as three main products in one, so let's talk about those.
First is CloudWatch itself.
Now, this is a product which allows the collection of metrics,
monitoring of metrics, and actions based on metrics.
Metrics are simply data relating to AWS products, applications, or on-premises systems.
Some common examples are CPU utilization of EC2 instances,
disk space usage on an on-premises server,
or maybe the number of visitors per second to your website.
CloudWatch is a public service, and so it can be used for metric gathering
either inside AWS, within on-premises environments, or even within other cloud platforms.
If you have a public internet connection and permissions to add data to CloudWatch,
it can be used from almost anywhere.
One aspect of CloudWatch that you'll need to learn pretty quickly
is that some metrics are gathered natively by the product.
So generally, anything running in AWS, anything which is visible from within a product,
can be handled natively.
So for example, looking at CPU utilization on an EC2 instance, that's done by default.
Some types of metric collection need an extra piece of software called the CloudWatch Agent.
So examples might be to collect metrics outside of AWS in other cloud environments,
or within on-premises environments, you need to install the CloudWatch Agent.
Also, monitoring certain things inside products which aren't exposed to AWS needs the Agent.
For example, if you want to monitor which processors are running on an EC2 instance,
or the memory utilization of those processors, you'll need to install the CloudWatch Agent.
Later in the course, I'll have a demo lesson where you'll get to experience this yourself
by installing and configuring the Agent.
Now, whatever method is used, CloudWatch gathers and stores this data.
It gives you a UI, a command line interface, or an API interface to access that data.
And you'll have plenty of exposure to this just by using AWS and taking this course.
Now, the second part of CloudWatch is called CloudWatch Logs.
And this allows for the collection, monitoring, and actions based on logging data.
Now, this might be Windows event logs, web server logs, firewall logs, Linux server logs,
almost anything which is logged can be ingested by CloudWatch logs.
Now, as with the parent CloudWatch product, for on-premises infrastructure, custom logs,
or anything outside of what's exposed to AWS natively, then you'll need to install the CloudWatch Agent.
Then lastly, we've got CloudWatch Events.
And this functions as an event hub.
CloudWatch Events provides two powerful features.
Firstly, if an AWS service does something, maybe an EC2 instance is terminated, started, or stopped,
then CloudWatch Events will generate an event which can perform another action.
And the second type of thing that CloudWatch Events can do is to generate an event to do something
at a certain time of day or certain days of week.
Throughout the course, you're going to have plenty of experience using all of these three different
broad pieces of functionality that CloudWatch provides.
So CloudWatch itself, CloudWatch Logs, and CloudWatch Events.
In fact, you've already used one of the features of CloudWatch at the start of the course
when you configured a billing alarm.
For this lesson though, I just want to focus on CloudWatch
because I want to make sure that you understand all of the core concepts that the product offers.
Architecturally, this is what CloudWatch looks like.
On the left, we have the sources of data.
These can be AWS products and services, or they can be your own systems and applications
which use CloudWatch to store their operational data.
This data is injected into CloudWatch and it's managed as metrics.
And I'll go into more detail on exactly what a metric is very soon.
CloudWatch manages lots of metrics.
On this diagram, I've provided three examples.
CPU utilization, memory utilization, and disk utilization.
Based on what data CloudWatch stores, it can be viewed through the console, the CLI,
or CloudWatch can use this data and via alarms it can take actions
such as auto scaling the number of EC2 instances, maybe because the CPU load is increasing,
or as we saw earlier in the course, it can send the notification to the simple notification service
which sends you an email.
Now don't worry if you're not comfortable with what these services are and what they do.
All I want from this lesson is for you to understand the architecture.
You'll have plenty of exposure to the theory and implementing these in practice as you go through the course.
Now after this lesson, I've got a quick demo where I'm going to show you how CloudWatch works in practice.
But before we do that, I want to cover off the basics of the core concepts within CloudWatch.
Now because CloudWatch manages lots of different services, it needs a way of keeping things separated.
So the first concept I want to talk about is a namespace.
And you can think of a namespace as a container for monitoring data.
It's a way to keep things from becoming messy. It's a way to separate things into different areas.
Now namespaces have a name and this can be almost anything as long as it stays within a rule set for namespace names.
Now there's one exception and that's that all AWS data goes into an AWS namespace,
which is called AWS forward slash and then the service name.
So an example of this would be AWS forward slash EC2,
which is the namespace that's used for all metric data for EC2.
Now you can't use this style of naming. So AWS forward slash, that's reserved for AWS.
You can use CloudWatch for your own data and pretty much call namespaces anything you want within these rules that AWS have set out.
So if you're implementing, for example, a cat specific Instagram clone,
then you could easily create a namespace called Catagram.
Now namespaces contain related metrics. So let's take a look at exactly what a metric is.
Put simply, a metric is a collection of related data points in a time ordered structure.
So to give you a few examples, we might have CPU utilization, network in and out or disk utilization.
They're all metrics. If you imagine a set of servers logging data for CPU utilization, it will be time ordered.
It will start when you enable monitoring and it will finish when you disable it.
A metric though, and this is a fairly nuanced point to understand, a metric is not for a specific server.
CPU utilization is the metric and that metric might be receiving data for lots of different EC2 instances.
So we need something else. We need a way of identifying which things log data to a specific metric.
Before I talk about that thing, I want to talk about data points.
So let's take an example. Let's say we've got a metric called CPU utilization.
Every time any server measures its utilization and sends it into CloudWatch, that goes into the CPU utilization metric.
And each one of those measurements, so every time the server reports its CPU, that measurement is called a data point.
Now a data point in its simplest form consists of two things.
First, a timestamp, which includes the year, month, day, hour, minute, second, and time zone when the measurement was conducted.
And secondly, a value. In this case, 98.3, which represents 98.3% CPU utilization.
Now I mentioned earlier that the CPU utilization metric could contain data for many servers.
So how do we separate the data for these? Well, that's where dimensions are used.
Let's say we have three EC2 instances, instance A, B, and C.
And each of them is sending data points into the AWS EC2 namespace and the CPU utilization metric.
Let's say that each second the instances are sending one data point.
So this metric is receiving three data points per second, one from each of the EC2 instances.
Now as those instances are sending data into CloudWatch, they're of course specifying the namespace and the metric, and they're sending in data points.
We know that already. But what's also sent with those data points are dimensions.
And dimensions are name value pairs, which allow CloudWatch to separate things or provide different perspectives of things within a metric.
Now two very common examples of this. When sending data points into CloudWatch for CPU utilization of EC2,
AWS also send in the instance ID and the instance type as dimensions.
And this allows us to view data points for a particular instance, for example.
So we can look inside a given namespace, so AWS slash EC2, look inside a particular metric, which is CPU utilization.
And then we can use the dimension to look for all of the data points for a particular instance ID, essentially a particular instance.
So dimensions are really powerful. They can be used in a really simple way, but they're also very flexible.
Now CloudWatch also allows us to take actions based on metrics, and this is done using alarms.
Alarms as a concept are pretty simple. Alarms are created and they're linked to a specific metric.
Then, based on how you configure the alarm, it will take an action based on that metric.
So either things are OK, and that means that the criteria that you set, you deem they're not to be a problem.
So an alarm being in an OK state means that everything is OK.
But an alarm, based on the criteria that you set, can also move into an alarm state, and that means that something bad has happened.
It means that the metric in some way is not in a good state.
And based on that, you can define an action.
The action could be to send a notification to an SNS topic, or it can be something much more complex,
and we'll go into all of the different ways that alarms can be used as we go through the course.
You've already seen this in practice when you set up the billing alarm at the start of the course.
We created an alarm that had a criteria that if your monthly estimated bill was more than $10,
then the alarm would go into the alarm state and it would send an SNS notification, which would result in you getting an email.
So you've seen a simple version of this already.
Alarms can also be in a third state, which is called insufficient data,
and that's generally how alarms start before they've amassed enough data to assess whether they should be in an OK or an alarm state.
An insufficient data is fine, it just means that the alarm is gathering that data.
Now in the demo lesson, which immediately follows this one, we're going to make an EC2 instance.
Once we've provisioned the instance, we're going to let it run for a while,
and then we're going to create an alarm which performs an action if it's using more than 25% CPU.
Now during normal circumstances, this won't be the case.
The instance will generally be running with a fairly low usage.
So we'll be installing a utility called Stress, and Stress will generate artificial high CPU load.
And when we do that, we should get the alarm into an alarm state,
and we're going to step through exactly how that works and how it looks and how it performs,
and that will give you some good practical exposure to how CloudWatch works.
So that's everything I wanted to cover for this introductory theory.
I will be going into this in a lot more detail later on in the course,
but with this basic theory and the short demo which immediately follows,
you'll have just enough information that you'll know how the product works,
so we can expand on that later on in the course.
So thanks for watching, go ahead, complete this video,
and then when you're ready, you can join me in the demo lesson.
