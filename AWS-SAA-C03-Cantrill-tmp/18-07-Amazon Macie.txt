Welcome to this lesson where we're going to be covering Amazon Macie.
Now we have a lot to cover, so let's jump in and get started.
So what is Macie? Well, it's a data security and data privacy service.
You'll understand now the architecture of the simple storage service known as S3.
Small objects at scale. It can also be made public.
And for some time, it's been a constant source of risk within organizations
because of the fact that data can be leaked if the service is misconfigured.
So Macie is a service which can be used to discover, monitor and protect data
which is stored within S3 buckets.
It's critical if an organization wants to control the security of its data
that it needs to have an awareness of where that data is and what exactly it contains.
So once enabled and pointed at buckets within your AWS account or AWS accounts,
Macie can get to work discovering data.
And this might mean data which is classed as personally identifiable information or PII
or personal health information known as PHI as well as financial data and many other types of data.
Now these high-level categories include a huge range of data
which you personally will have day-to-day familiarity with.
Things like AWS access keys, SSH keys, PGP keys, or bank account numbers,
credit card numbers or expiry dates, health insurance numbers, birth dates,
driver's license numbers, national insurance numbers, passport numbers, addresses and much more.
It's the first job of Macie to identify and inventory this data.
So by using Macie you'll know what you have, what it contains and where it is.
Now the way that it does this is using data identifiers.
Think of these like rules which your objects and their contents are assessed against.
And there are two types of data identifiers.
Managed data identifiers and custom data identifiers.
Now managed data identifiers are built into the product.
They use a combination of criteria and techniques including machine learning and pattern matching
to analyze the data that you specify.
They're designed to detect sensitive data types for many countries and regions
including multiple types of personally identifiable information, personal health information and financial data.
And this type of identifier can be used to detect almost all common types of sensitive data
that you might need to manage within your organization.
Now you can also build custom data identifiers for your business.
These are proprietary so you can look for specific data which your business needs to identify and control.
An example, you might use a regular expression known as a REGEX
to search for certain patterns of specific text within your business,
maybe employee IDs or performance reports.
With Macy, you create discovery jobs which use these identifiers and look for anything matching on buckets.
If anything is found, these jobs generate findings and you can view these findings interactively
or they can be used as part of integrations with other AWS services.
For example, security hub or finding events can be generated and passed into EventBridge
and then they can be used for automatic event-driven remediation.
So it's a super powerful architecture.
Now one final thing which you need to understand before we review the architecture visually
is that Macy uses a multi-account architecture.
One account is the administrator account and that can be used to manage Macy within member accounts.
And this multi-account structure can be done either using AWS organizations or by explicitly inviting accounts.
And once invited, buckets across all accounts within the Macy organization can be evaluated in the same way.
Now let's just take a second to review the architecture visually.
We start with one or more S3 buckets and then the Macy service itself.
And then we create a discover job.
And within the discover job we can specify which buckets we want to analyze,
which means detecting and classifying data within those buckets.
The discovery job has a schedule, so this controls when it runs and how frequently it runs.
And then the job uses a combination of managed data identifiers and custom data identifiers.
And these are the things which actually identify and classify the types of data that Macy is locating.
So it's these things which are the important part of the whole process.
Now as an output to the discovery job, findings are generated.
And these can be viewed either using the console interactively or, and this is the more common use case,
they can be used with EventBridge in the form of event findings generation,
which can then be delivered to other AWS services.
And this is commonly used for integration or for event driven remediation.
In this example where a Lambda function can receive the event and can perform some kind of automatic fix based on the finding.
So at a high level, that's how the architecture looks.
And before we finish up with this lesson, I want to explore a number of other important elements of the service.
And we're going to start with looking in more detail at the managed and custom data identifiers.
To discover sensitive data within Amazon Macy, you create and run data discovery jobs.
A data discovery job analyzes objects within S3 buckets to determine whether the objects contain sensitive data.
And the way that it does this is via data identifiers.
First, we have managed data identifiers, and these are created and managed by AWS.
And as I mentioned earlier in this lesson, they can be used to identify a growing list of sensitive data types.
Now I've included a link attached to this lesson which details the full range of data which is matched by this type of identifier.
But it's things like various credentials, financial data, credit cards, bank details and more.
Things like health data or anything personally identifying such as addresses, passports, drivers licenses and much, much more.
It's a pretty comprehensive list, so it's worth checking out the link that's included with this lesson which gives a full overview.
In addition to this, anyone can create custom data identifiers.
Now the foundation of these are regular expressions which define a pattern to match within data.
This one, for instance, matches any data which contains the letters A through to Z and then a dash and then eight digits.
Anything that you can define using regular expressions, you can match using custom data identifiers.
And these are generally used for data patterns which are custom to your organization, as with this example of an employee ID.
You can optionally add keywords to custom data identifiers which must occur within a definable proximity to the pattern matched by the regular expressions.
And this definable distance is called the maximum match distance.
And then finally, you can also include ignore words.
So if the regex matches something but an ignore word is there in addition, it's ignored and doesn't match.
So keywords, maximum match distance and ignore words are all refiners.
They help you start with a regex pattern but influence how something is classified based on those refinements.
So these identifiers run in addition to built-in checks that Macy performs and then findings are generated.
And Macy will produce two types of findings, policy findings and sensitive data findings.
Macy generates policy findings when the policies or settings for an S3 bucket are changed in a way that reduces the security of the bucket or its objects, but crucially after Macy is enabled.
For example, if the default encryption on a bucket was enabled when you enabled Macy and then default encryption is later disabled on that bucket, then this is highlighted as a policy finding.
So that's an example of a policy finding. Macy generates the other type of finding which is a sensitive data finding when it discovers sensitive data in S3 objects that you configure it to analyze.
And it determines what is sensitive data based on the jobs and identifiers which you configure and which I've just stepped through.
So some examples of policy findings are S3 block public access disabled which is triggered if the block public access settings on a bucket are disabled.
Another is S3 bucket encryption disabled which is triggered logically when encryption on a bucket is disabled.
Another is S3 bucket public which is triggered when a bucket policy or ACL changes are made which make a bucket public.
And another is S3 bucket shared externally and this is triggered when a bucket policy or ACL allows an AWS account other than those within the Macy organization access to this bucket.
So these are all policy changes which Macy decides reduce the security of a bucket or objects in that bucket and so trigger policy findings.
So these are called policy findings and there are more of these and I've included a link attached to this lesson which details all of them and that's really worth a look through just to become familiar with all of the different things that Macy can identify.
Now examples of sensitive data findings include these and it's worth pointing out that there are many more of them.
Again I've included a comprehensive list which is attached to this lesson but for now let's just focus on these important examples.
First we have S3 object credentials and this matches any exposed SSH keys or AWS access keys that Macy can locate.
We've also got S3 object custom identifier and this matches anything defined within custom data identifiers.
We have S3 object financial which matches credit card numbers or bank account numbers and much more.
We have S3 object multiple which occurs when more than one thing is identified.
We have S3 object personal which covers personally identifiable information such as full names, mailing addresses, personal health information such as health insurance or medical identification numbers or combinations of those.
Now this isn't an exhaustive list. Again I've included a link attached to this lesson which gives you a full overview.
And that at a high level is Macy. It's a useful tool which you'll need to understand for the exam.
If you see any questions regarding the classification of data within S3, so identifying data, discovering data or reacting to sensitive data automatically, then Macy is probably the product to use.
Now that's everything I wanted to cover within this theory lesson. If you're doing any of my courses where practical knowledge of Macy is required, then there's going to be a demo lesson immediately following this one.
If not, then this theory is all that you'll need.
So at this point this is the end of the lesson. Thanks for watching. Go ahead and complete this video and when you're ready I'll look forward to you joining me in the next.
