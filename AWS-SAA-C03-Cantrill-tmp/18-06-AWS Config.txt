Welcome back and in this lesson I want to talk about AWS Config.
Now let's just jump in and get started because we've got a lot to cover.
AWS Config is an interesting service because people
often misunderstand what it does. This is especially important within
exam situations where you don't have the benefit of Google
and have to make architectural decisions quickly. Now AWS Config has two
main jobs. Its primary function is to record
changes over time on resources within an AWS account.
Once enabled, the configuration of every resource
in the account is monitored. Every time a resource's configuration changes
a configuration item is created which stores the configuration
of that resource at a specific point in time.
The information which is stored is the configuration
of the resource, the relationship to other resources
and who makes any changes. So for example if you had a security group
attached to an instance and you added a rule
to that security group, then it would track the pre-change state,
the post-change state, the fact that you changed it
and the fact that it was attached to that EC2 instance.
Now this makes AWS Config great for
auditing changes and for checking if resources
are compliant with standards defined by your organization.
The most important thing to understand about
AWS Config is that it doesn't prevent
changes happening. It's not a permissions product
or a protection product. Even if you define
standards for resources, it can check compliance
against those standards but it doesn't prevent you from breaching those standards
and creating non-compliant resources.
An example of compliance might be a certain set
of allowed ports within security groups. You can
add additional ports exposing an instance
to a certain amount of risk. Now AWS Config won't stop you
but that non-compliance, that additional port
will be identified. Now Config
is a regional service so when enabled it monitors changes within
a particular AWS region in a particular AWS account.
But it can be configured for cross-region
and cross-account aggregation. It can also generate notifications
via SNS and it can generate events
via EventBridge and Lambda when resources change
in terms of their compliance state. So while AWS Config
won't prevent you changing something, it can be used
for automatic remediation. Now the product stores all the configuration data and
changes in a consistent format
within the S3 Config bucket and the product allows you to access that data
so all of the configuration history of all of the resources
and you can interact with them directly from that bucket or using the AWS Config
APIs. Now there are two sides to AWS Config, the features which are standard
and the parts of the product which are optional. Now the standard part
is on the left and the optional part is on the right. So starting
on the left we have some account resources and we have
AWS Config. To use the product we have to enable it and this
enables the recorder functionality and this takes config information of all the
resources
and stores them in an S3 bucket, the Config bucket
and this is all part of the standard functionality provided
by the product. Now you could just enable all of this functionality
and leave this as it is. This would allow you to record
and review all changes to resources over time. Every time a change happens
a configuration item would be generated and
all of these for all resources would be stored in a standard format
in the Config bucket. But we can do a lot more with the product and this is where
the real power
of AWS Config comes from because we can use
Config rules. Now Config rules are either AWS managed ones
or you can define your own which uses Lambda.
What happens is that these rules evaluate
resources against a defined standard.
Resources based on these rules
are either compliant or non-compliant
based on if they meet criteria specified within the Config rule.
Now custom rules use Lambda to evaluate
if resources match criteria. The Lambda function does the evaluation using
whatever things that you can code
and then returns information back to AWS Config.
AWS Config can then notify or work with
other products for automatic remediation. For example
it can use SNS to send either a stream of changes
or compliance notifications and these will
either go to human operators or other applications to deal with.
In addition though you can integrate AWS Config
with EventBridge. So for any changes in the state of Config rules whenever
anything becomes compliant
or non-compliant this event can be sent to EventBridge
and then EventBridge can be used to invoke Lambda functions to perform
automatic remediation of any changes
so to fix the problems automatically. Now this
isn't strictly part of AWS Config. You're essentially using
EventBridge to send any events from AWS Config to targets to perform
this automatic remediation. You can also fix these type of Config changes
using SSM so AWS Config can integrate with Systems Manager
and apply fixes to remediate any issues.
But Lambda can be more flexible for account level things
whereas SSM can be effective for anything relating to the configuration
of instances. Now that's all of the theory that I wanted to cover
in this lesson. Go ahead and complete this lesson and then when you're ready
I look forward to you joining me in the next lesson.
