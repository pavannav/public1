Welcome back, and in this lesson I want to talk about auto-scaling groups and health checks.
Now this is going to be fairly brief, but it's something that's really important for the exam.
So let's jump in and get started.
Auto-scaling groups assess the health of instances within that group using health checks.
And if an instance fails a health check, then it's replaced within the auto-scaling group.
So this is a method of automatically healing the instances within the auto-scaling group.
Now there are three different types of health checks which can be used with auto-scaling groups.
We have EC2, which is the default.
We have ELB checks, which can be enabled on an auto-scaling group.
And then we have custom health checks.
Now with EC2 checks, which are the default, any of these statuses is viewed as unhealthy.
So essentially anything but the instance running is viewed as unhealthy.
So if it's stopping, if it's stopped, terminated, if it's shutting down, or if it's impaired,
meaning it doesn't have two out of two status checks, then it's viewed as unhealthy.
We also have the option of using load balancer health checks.
And for an instance to be viewed as healthy when this option is used,
the instance needs to be both running and it needs to be passing the load balancer health check.
Now this is important because if you're using an application load balancer,
then these checks can be application aware.
So you can define a specific page of that application that can be used as a health check.
You can do text pattern matching.
And this can be checked using an application load balancer.
So when you integrate this with an auto-scaling group,
the checks that that auto-scaling group is capable of performing become much more application aware.
Finally, we have custom health checks.
And this is where an external system can be integrated and mark instances as healthy or unhealthy.
So this allows you to extend the functionality of these auto-scaling group health checks
by implementing a process specific to your business or using an external tool.
Now I also want to introduce the concept of a health check grace period.
So by default, this is 300 seconds or five minutes.
And essentially, this is a configurable value,
which needs to expire before health checks will take effect on a specific instance.
So in this particular case, if you select 300 seconds,
then it means that a system has five minutes to launch the system,
to perform any bootstrapping,
and then any application startup procedures or configuration before it can fail a health check.
So this is really useful if you're performing bootstrapping with your EC2 instances,
which are launched by the auto-scaling group.
Now this is an important one because it does come up on the exam,
and it's often a cause of an auto-scaling group continuously provisioning and then terminating instances.
If you don't have a sufficiently long health check grace period,
then you can be in a situation where the health checks start taking effect
before the applications have finished configuring.
And at that point, it will be viewed as unhealthy, terminated,
and a new instance will be provisioned.
And that process will repeat over and over again.
So you need to know how long your application instances take to launch, bootstrap,
and then perform any configuration processes.
And that's how long you need to set your health check grace period to be.
Now that's everything I wanted to cover in this brief theory lesson.
I just wanted to make sure that you understand the options that you have available
for health checks within auto-scaling groups.
With that being said, go ahead and complete this video.
And when you're ready, I'll look forward to you joining me in the next.
