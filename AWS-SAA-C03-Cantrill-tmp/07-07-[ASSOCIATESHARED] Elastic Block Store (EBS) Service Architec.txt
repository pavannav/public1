Welcome back, and in this lesson I want to quickly step through the basics of the Elastic Block Store service known as EBS.
You'll be using EBS directly or indirectly constantly as you make use of the wider AWS platform,
and as such you need to understand what it does, how it does it, and the product's limitations.
So let's jump in and get started straight away as we have a lot to cover.
EBS is a service which provides block storage. Now you should know what that is by now.
It's storage which can be addressed using block IDs.
So EBS takes raw physical disks and it presents an allocation of those physical disks, and this is known as a volume.
And these volumes can be written to or read from using a block number on that volume.
Now volumes can be unencrypted or you can choose to encrypt the volume using KMS, and I'll be covering that in a separate lesson.
Now we see two instances when you attach a volume to them.
They see a block device, a raw storage, and they can use this to create a file system on top of it,
such as ext3, ext4, or xfs and many more in the case of Linux, or alternatively ntfs in the case of Windows.
The important thing to grasp is that EBS volumes appear just like any other storage device to an EC2 instance.
Now storage is provisioned in one availability zone. I can't stress enough the importance of this.
EBS in one availability zone is different than EBS in another availability zone and different from EBS in another AZ in another region.
EBS is an availability zone service. It's separate and isolated within that availability zone.
It's also resilient within that availability zone, so if a physical storage device fails, there's some built-in resiliency.
But if you do have a major AZ failure, then the volumes created within that availability zone will likely fail, as will instances also in that availability zone.
Now with EBS, you create a volume and you generally attach it to one EC2 instance over a storage network.
With some storage types, you can use a feature called multi-attach, which lets you attach it to multiple EC2 instances at the same time,
and this is used for clusters. But if you do this, the cluster application has to manage it,
so you don't overwrite data and cause data corruption by multiple writes at the same time.
You should, by default, think of EBS volumes as things which are attached to one instance at a time,
but they can be detached from one instance and then reattached to another.
EBS volumes are not linked to the instance lifecycle of one instance. They're persistent.
If an instance moves between different EC2 hosts, then the EBS volume follows it.
If an instance stops and starts or restarts, the volume is maintained.
An EBS volume is created, it has data added to it, and it's persistent until you delete that volume.
Now even though EBS is an availability zone-based service, you can create a backup of a volume into S3 in the form of a snapshot.
Now I'll be covering these in a dedicated lesson, but snapshots in S3 are now regionally resilient,
so the data is replicated across availability zones in that region and it's accessible in all availability zones.
So you can take a snapshot of a volume in availability zone A, and when you do so,
EBS stores that data inside a portion of S3 that it manages,
and then you can use that snapshot to create a new volume in a different availability zone,
for example, availability zone B, and this is useful if you want to migrate data between availability zones.
Now don't worry, I'll be covering how snapshots work in detail, including a demo later in this section.
For now, I'm just introducing them.
EBS can provision volumes based on different physical storage types,
SSD-based, high-performance SSD, and volumes based on mechanical disks,
and it can also provision different sizes of volumes and volumes with different performance profiles,
all things which I'll be covering in the upcoming lessons.
For now, again, this is just an introduction to the service.
The last point which I want to cover about EBS is that you'll build using a gigabyte-per-month metric,
so the price of one gig for one month would be the same as two gig for half a month and the same as half a gig for two months.
Now there are some extras for certain types of volumes, for certain enhanced performance characteristics,
but I'll be covering that in the dedicated lessons which are coming up next.
For now, before we finish this service introduction, let's take a look visually at how this architecture fits together.
So we're going to start with two regions.
In this example, that's US-E-1 and AP-S-2,
and then in those regions we've got some availability zones, AZA and AZB,
and then another availability zone in AP-S-2,
and then finally the S3 service which is running in all availability zones in both of those regions.
Now EBS, as I keep stressing, and I will stress this more, is availability zone based.
So in the cut-down example which I'm showing, in US-E-1,
you've got two availability zones and so two separate deployments of EBS, one in each availability zone,
and that's just the same architecture as you have with EC-2.
You have different sets of EC-2 hosts in every availability zone.
Now visually, let's say that you have an EC-2 instance in availability zone A.
You might create an EBS volume within that same availability zone and then attach that volume to the instance.
So critically, both of these are in the same availability zone.
You might have another instance which this time has two volumes attached to it,
and over time you might choose to detach one of those volumes and then reattach it to another instance in the same availability zone.
And that's doable because EBS volumes are separate from EC-2 instances.
It's a separate product with separate life cycles.
Now you can have the same architecture in availability zone B,
where volumes can be created and then attached to instances in that same availability zone.
What you cannot do, and I'm stressing this for the 57th time,
small print, it might not actually be 57 but it's close,
what I'm stressing is that you cannot communicate cross availability zone with storage.
So the instance in availability zone B cannot communicate with
and so logically cannot attach to any volumes in availability zone A.
It's an availability zone service, so no cross AZ attachments are possible.
Now EBS replicates data within an availability zone.
So the data on a volume, it's replicated across multiple physical devices in that AZ.
But, and this is important again, the failure of an entire availability zone
is going to impact all volumes within that availability zone.
Now to resolve that you can snapshot volumes to S3
and this means that the data is now replicated as part of that snapshot across AZs in that region.
So that gives you additional resilience.
And it also gives you the ability to create an EBS volume in another availability zone from this snapshot.
You can even copy the snapshot to another AWS region.
In this example, AP-SE-2.
And once you've copied the snapshot, it can be used in that other region to create a volume
and that volume can then be attached to an EC2 instance in that same availability zone in that region.
So that, at a high level, is the architecture of EBS.
Now depending on what course you're studying, there will be other areas that you need to deep dive on.
So over the coming section of the course, we're going to be stepping through the features of EBS
which you'll need to understand.
And these will differ depending on the exam.
But you will be learning everything you need for the particular exam that you're studying for.
At this point, that's everything I wanted to cover.
So go ahead, finish this lesson, and when you're ready, I look forward to you joining me in the next.
