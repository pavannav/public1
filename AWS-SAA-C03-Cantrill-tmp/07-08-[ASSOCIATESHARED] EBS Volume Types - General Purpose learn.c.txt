Welcome back and in this lesson I want to talk about two volume types available within AWS, GP2 and GP3.
Now GP2 is the default general purpose SSD based storage provided by EBS.
GP3 is a newer storage type which I want to include because I expect it to feature on all of the exams very soon.
Now let's just jump in and get started.
General purpose SSD storage provided by EBS was a game changer when it was first introduced.
It's high performance storage for a fairly low price.
Now GP2 was the first iteration and it's what I'm going to be covering first because it has a simple but initially difficult to understand architecture.
So I want to get this out of the way first because it will help you understand the different storage types.
When you first create a GP2 volume it can be as small as 1GB or as large as 16TB.
And when you create it, the volume is created with an IO credit allocation.
Think of this like a bucket.
So an IO is one input-output operation.
An IO credit is a 16KB chunk of data.
So an IO is one chunk of 16KB in one second.
If you're transferring a 160KB file, that represents 10 IO blocks of data.
So 10 blocks of 16KB.
And if you do that all in one second, that's 10 credits in one second.
So 10 IOPS.
When you aren't using the volume much, you aren't using many IOPS and you aren't using many credits.
During periods of high disk load you're going to be pushing volume hard and because of that it's consuming more credits.
For example during system boots or backups or heavy database work.
Now if you have no credits in this IO bucket, you can't perform any IO on the disk.
The IO bucket has a capacity of 5.4 million IO credits and it fills at the baseline performance rate of the volume.
So what does this mean?
Well every volume has a baseline performance based on its size, with a minimum.
So streaming into the bucket at all times is a 100 IO credits per second refill rate.
This means as an absolute minimum, regardless of anything else, you can consume 100 IO credits per second, which is 100 IOPS.
Now the actual baseline rate which you get with GP2 is based on the volume size.
You get 3 IO credits per second per GB of volume size.
This means that a 100 GB volume gets 300 IO credits per second refilling the bucket.
Anything below 33.33 recurring GB gets this 100 IO minimum.
Anything above 33.33 recurring gets three times the size of the volume as a baseline performance rate.
Now you aren't limited to only consuming at this baseline rate.
By default GP2 can burst up to 3000 IOPS.
So you can do up to 3000 input output operations of 16 KB in one second and that's referred to as your burst rate.
It means that if you have heavy workloads which aren't constant, you aren't limited by your baseline performance rate of three times the GB size of the volume.
So you can have a small volume which has periodic heavy workloads and that's okay.
What's even better is that the credit bucket, it starts off full, so 5.4 million IO credits.
And this means that you could run it at 3000 IOPS, so 3000 IO per second, for a full 30 minutes.
And that assumes that your bucket isn't filling up with new credits, which it always is.
So in reality you can run at full burst for much longer.
And this is great if your volumes are used initially for any really heavy workloads because this initial allocation is a great buffer.
The key takeaway at this point is if you're consuming more IO credits than the rate at which your bucket is refilling, then you're depleting the bucket.
So if you burst up to 3000 IOPS and your baseline performance is lower, then over time you're decreasing your credit bucket.
If you're consuming less than your baseline performance, then your bucket is replenishing.
And one of the key factors of this type of storage is the requirement that you manage all of the credit buckets of all of your volumes.
So you need to ensure that they're staying replenished and not depleting down to zero.
Now because every volume is credited with 3 IO credits per second for every GB in size, volumes which are up to 1 TB in size, they'll use this IO credit architecture.
But for volumes larger than 1 TB, they will have a baseline equal to or exceeding the burst rate of 3000.
And so they will always achieve their baseline performance as standard. They don't use this credit system.
The maximum IO per second for GP2 is currently 16,000, so any volumes above 5.33 recurring TB in size achieves this maximum rate constantly.
GP2 is a really flexible type of storage, which is good for general usage. At the time of creating this lesson, it's the default, but I expect that to change over time to GP3, which I'm going to be talking about next.
GP2 is great for boot volumes, for low latency interactive applications, or for dev and test environments, anything where you don't have a reason to pick something else.
It can be used for boot volumes, and as I've mentioned previously, it is currently the default.
Again, over time, I expect GP3 to replace this, as it's actually cheaper in most cases, but more on this in a second.
You can also use the elastic volume feature to change the storage type between GP2 and all of the others, and I'll be showing you how that works in an upcoming lesson if you're doing the SysOps or Developer Associate courses.
If you're doing the architecture stream, then this architecture theory is enough. At this point, I want to move on and explain exactly how GP3 is different.
GP3 is also SSD based, but it removes the credit bucket architecture of GP2 for something much simpler.
Every GP3 volume, regardless of size, starts with a standard 3000 IOPS, so 3016 KB operations per second, and it can transfer 125 MB per second.
That's standard regardless of volume size, and just like GP2, volumes can range from 1 GB through to 16 TB.
Now, the base price for GP3 at the time of creating this lesson is 20% cheaper than GP2, so if you only intend to use up to 3000 IOPS, then it's a no-brainer. You should pick GP3 rather than GP2.
If you need more performance, then you can pay for up to 16,000 IOPS and up to 1000 MB per second of throughput, and even with those extras, generally it works out to be more economical than GP2.
GP3 offers a higher max throughput as well, so you can get up to 1000 MB per second versus the 250 MB per second maximum of GP2.
So GP3 is just simpler to understand for most people versus GP2, and I think over time it's going to be the default. For now though, at the time of creating this lesson, GP2 is still the default.
In summary, GP3 is like GP2 and IO1, which I'll cover soon, had a baby. You get some of the benefits of both in a new type of general-purpose SSD storage.
Now the usage scenarios for GP3 are also much the same as GP2, so virtual desktops, medium-sized databases, low-latency applications, dev and test environments, and boot volumes.
You can safely swap GP2 to GP3 at any point, but just be aware that for anything above 3000 IOPS, the performance doesn't get added automatically like with GP2, which scales on size.
With GP3 you would need to add these extra IOPS, which come at an extra cost, and that's the same with any additional throughput.
Beyond the 125 MB per second standard, it's an additional extra, but still, even including those extras, for most things this storage type is more economical than GP2.
At this point, that's everything that I wanted to cover about the general-purpose SSD volume types in this lesson. Go ahead, complete the lesson, and then when you're ready, I'll look forward to you joining me in the next.
