Welcome back, and in this video I want to talk about the other type of hosted zone available within Route 53,
and that's Private Hosted Zones. So let's jump in and get started straight away.
A Private Hosted Zone is just like a Public Hosted Zone in terms of how it operates, only it's not public.
Instead of being public, it's associated with VPCs within AWS, and it's only accessible within VPCs that it's associated with.
You can associate a Private Hosted Zone with VPCs in your account using the Console UI, CLI and API,
and even in different accounts if you use the CLI and API only.
Everything else is the same, you can use them to create resource records, and these are resolvable within VPCs.
It's even possible to use a technique called Split View or Split Horizon DNS,
which is where you have public and private hosted zones of the same name,
meaning that you can have a different variant of a zone for private users versus public.
You might do this if you want your company intranet to run on the same address as your website,
and have your users be presented with your intranet when internal,
but the public website when anyone accesses from outside of your corporate network.
Or if you wanted certain systems to be accessible via your business's DNS, but only within your environment.
Now let's quickly step through how Private Hosted Zones work visually so that you have more of an idea of the end-to-end architecture.
So we start with a Private Hosted Zone, and as with public zones we can create records within this zone.
Now from the public internet our users can do normal DNS queries, so for things like Netflix.com and Katagram.io,
but the Private Hosted Zone is inaccessible from the public internet.
It can be made accessible though from VPCs.
Let's assume all three of these VPCs have services inside them and use the Route 53 Resolver, so the VPC plus 2 address.
Well any VPCs which we associate with the Private Hosted Zone will be able to access that zone via the Resolver.
Any VPCs which aren't associated will face the same problem as the user on the public internet on the left.
Access isn't available.
So Private Hosted Zones are great when you need to provide records using DNS, but maybe they're sensitive and need to be accessible only from internal VPCs.
Just remember, to be able to access a Private Hosted Zone, the service needs to be running inside a VPC, and that VPC needs to be associated with the Private Hosted Zone.
Now before I finish up this short lesson, let's talk about Split View or Split Horizon DNS.
Consider this scenario, you have a VPC running an Amazon Workspace, and to support some business applications, a Private Hosted Zone with some records inside it.
The Private Hosted Zone is associated with VPC1 on the right, meaning the Workspace could use the Route 53 Resolver to access the Private Hosted Zone.
For example to access the accounting records stored within the Private Hosted Zone.
Now the Private Hosted Zone is not accessible from the public internet, but what Split View allows us to do is to create a Public Hosted Zone with the same name.
This Public Hosted Zone might only have a subset of records that the Private Hosted Zone has, so from the public internet, access to the Public Hosted Zone would work in the same way as you would expect.
So via the ISP Resolver server, then through to the DNS root servers, from there to the .org TLD servers, and from there through to the Animals for Life name servers provided by Route 53.
Any records inside the Public Hosted Zone would be accessible, but records in the Private Hosted Zone which are not in the Public Hosted Zone, so accounting in this example, would be inaccessible from the public internet.
And this is a common architecture where you want to use the same domain name for public access and internal access, but with a different set of records available to each.
It's something that you'll need to be comfortable with as an architect designing solutions, a developer integrating DNS into your applications, or an engineer implementing this within AWS.
Now that's everything I want to cover on the theory of Private Hosted Zones, so go ahead and complete this video, and when you're ready, I look forward to you joining me in the next.
