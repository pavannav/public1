# 24.3 Step-03- [NEW]Pre-requisite check before implementing EKS DevOps Pipeline

Instructor: Welcome back.In previous lecture,we learned about what we are going to implementas part of this demo.And in this lecture,we will focus on prerequisite before goingand building the pipelines.DevOps pipelines for EKS.So the number one thing here is,whether you end environment is ready or not,you need to verify.One is EKS cluster,which we have created as part of previous demos,which is already present.We also need to verify AWS Load Balancer Controlleris running,and also external DNS controller is running.So now if you go here and verify, right?So if you go back to the terminal here,kubectl get pods-nand in namespace kube-system.So if you say,if you list the pods,you can see AWS Load Balancer Control is runningand in the default namespace, if you say kubectl get pods.So you should see your external DNS controlleris also running.So which means we are good.Now the next prerequisite we have here is,verify Kube Manifests working as expectedbefore implementing DevOps Pipelines.So the first thing here is,we'll go to 01-DevOps-Nginx-Deployment.yml, right?So this is the oneand ensure that we have two image sections here.This first one we will usewhen we are running it with DevOps pipelinesand we can comment that hereand we'll come uncomment the second one which is alreadya prebuilt Docker image present on GitHub packages.So this one we can use for testing the prerequisites.In prerequisite section,we can use a prebuilt Docker imageto test all our templates are working or not.Mainly our Kube manifestor working or not.So this is the image we are going to useand that's about here, the Step 01and in Step 02 you can see that verifyand update your Ingress manifest.So this is the ALB ingress manifestand here you can see inside this, right?So this ingress manifest is nothingbut if you go back here in our Load Balancer Controller,we have implemented it with multiple demos.We already know it is working as expectedbut if you want to double check, right?So you need to ensure that your external DNS names, right?So here the DNS names you needto update your domain, whatever is there.Here you need to update this file.In addition to that,you might have already created your certificate.In certificate manager,you might have already created your,we'll go hereand this is the Certificate Managerand you might have created a certificatewhen you are implementingthe AWS Load Balancer Controller section.So there you need to go and then get the ARNoff your certificate and update here.So these two changes you needto do in your ALB-IngressService.yml03-DevOps-Nginx-ALB-IngressService.yml.You need to update with,in your environment,in your cloud environment, what is your certificate ARNand what is your DNS name.So those two things you need to update.So that's all about step two,which is updating that Kube Manifest.After that,you can go ahead and then deploy and then verify.So we will go hereand we will go to11-NEW-DevOps-with-AWS-Developer-Tools-and-GitHuband inside that we'll go to GitHub files folderand there you'll have the Kube Manifest.So we'll say kubectl apply-fand Kube Manifest.So this should create a deployment nodeport serviceand also a ingress.Ingress means like which is a application load balanceror a ingress servicewith external DNS related controller also kickedin wherein it is going to automatically registerthe DNS names in our Route 53.So if I say kubectl get pods.Our pods should be running, kubectl get SVC.Our nodeport service should be createdand if I say kubectl get ingress,our ingress service also should be created.In addition to that, if I say kubectl get podsand then you can also verify the external DNS podrelated logs.So here to verify your external DNS pod related logs,you have the command hereand you can run that to verify the logs.So inside that you can seeit'll be adding this EKS DevOps Oneand EKS DevOps Two.Create it is saying.Means like it is creating the DNS recordin our AWS Route 53.So we can go to Route 53 and also verify the same thing.So we'll go here to Route 53and we can go to our Hosted zones.And in Hosted zones we'll go to Stack Simplify.And here you should find something relatedto EKS demoand wait.It should be EKS DevOps one and two.So that related things, you can find it here.EKS DevOps Oneand EKS DevOps Two related.DNS names it added successfully.Now let's come back hereand if you want you can also access your application.So I'll say,eksdevops1.stacksimplify.com/app1/index.html.Before accessing it, I'm going to copy itand I'll also go back to EC2 hereand go to the load balances sectionand verify if our a below, ingress can,whatever the ingress service we have deployed,whether it is in the active state or not.So still it is in the provisioning state,our application might not work.So let's wait for it to get completed.Means like once the load balancer is completed,we can go ahead and then verify.So our ingress service is active.So I'll go open new incognito windowand try to access our applicationand it should redirect to our directly HTTPS URLand you can see our application is accessibleand if you want we can also verify our certificate here.So that's about it.If you want you can also accessEKS DevOps Two with another domain name,whatever we have added.So with both domain names,we can try to access our application and it is accessible.So now we'll go ahead and then clean cleanup.So which means we have successfully testedthat our EKS cluster environment is working as expected.So we have a EKS clusterand we have the AWS Load Balancer Controller up and runningand we also have external DNS controller in our EKS cluster,which is a running and working.So entire integration is working,which means these three Kube Manifests are workingas expected and this should work when we even implementour EKS DevOps pipeline also.So now let's go backand clean up whatever we have implemented.So I'll say kubectl delete-fand kube-manifest.So this should delete all these things.And one more thing, what we need to do is,we'll go to our EKS DevOps hereand uncomment the image linewhich is required for DevOps pipelineand comment whatever we have used for testingor prerequisite.I'll also say here, prerequisite checks.For prerequisite checks we are using it.So for that purpose I updated accordingly.So I commented this and I have put container images thing.So this container image will be replacedby our new ECR Docker image,which we have pushed to ECR report.Then it is building the pipeline.At that point of time in the deploy phase,it is going to update this manifestwith that container image.So for that purpose we need to use that way.So we have completed the prerequisite section.If you want we can also go backand then verify our Route 53 records also cleanedup for EKS DevOps.So you can see nothing is presentwhen I search for EKS DevOps, they were not present.So this completes the prerequisite checkand this step is very important to ensurethat what we are building,so after completely building the pipelineand if there is some issue with these templatesand if it is not working,we might end up in troubleshooting pipeline codeinstead of our Kube Manifest.So for that purpose,I have added this additional prerequisite checkso that before moving on to pipelineand implementing, we have everything in working conditionor not, we have verified.So I'll see you in the next lecture.Until then, bye-bye.Thank you.