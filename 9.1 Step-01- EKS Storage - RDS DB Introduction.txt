# 9.1 Step-01- EKS Storage - RDS DB Introduction

-: Welcome back.In this lecture we are going to understandabout using RDS databaseas our underlying MySQL databasefor the applications which need to be deployedon elastic Kubernetes service.And how we are going to use it,we are going to look into.So before going inlike means like before goinginto implementing the RDS database for our applications,let's see what we have implementedin our previous sections, right?So in our previous section we have usedthe MySQL pod means like we used the MySQLcontainer to create a pod and it's equal and deployment.And then we used the MySQL cluster API serviceto expose it for our user management application so thatthis user management rest API application has the MySQLas a database inside the Kubernetes cluster itself.And for persistent storage, what we usedwe use the elastic block storewith storage classes, persistent volume claimsall these concepts we have applied.So now for learning all this is good, but when thinkingin production grade deploying applications, this is no good.Okay? So why it is not good, we are going to see here, okay.So even we can even use StatefulSet concepts tocreate a high availability related setups of MySQL.But there is going to be a huge amount of manual workwhich we need to do to implement all these things.We should also be a MySQL sideexpertor MySQL admin to implement all these things.Okay?So drawbacks of EBS, CSI and also MySQL DBas a pod inside a Kubernetes cluster, okay?This is on a very high level, right?So complex setup to achieve high availability.So even stateful services provided and the examplewhatever is provided is one MySQL masterand then multiple read replicas is the thingKubernetes documentation provides. Right?So with that said, so if you want to implementthat also there are a lot of scriptsand then very basic level of information providedin documentation and if you implement it andhow we are going to handle italso becomes other issues for us.Okay? So another important thing means likefrom MySQL side setups are going to behard and thenif we are already a MySQL expert, maybe it'll be easy.But as a AWS solution architector system admin or Devops adminI really don't need to be a MySQL admin here, right?So if someone is very good at MySQLand then if they design and provide thatwe can use those manifests, okay?But as we need to go and then implement themit is going to become so tough for us.So now in addition to that MySQL,there is one more other thing is EBS, right?So from EBS perspectiveElastic Block Store is a availability zone level resourcewhich means the volumeswhatever you provide is zone restricted.So it cannot be across that entire region.So what happens is if your MySQL part hasbeen created in US East one year,so then you'd need to map to itsEBS volume present in US East one year.So here the problem comes when you want toimplement Master Master MySQL setup, okay?And most of the times, okay, master and read replicaswill be available for few applications,but at the same time, master and master also required.And all these setups becomes complex for usand then implementing it.So we are creating a lot of, instead of creating a veryhigh available and then very resilient solution,we are going to mess up and then create lot of issues there.Okay. So considering all those things, even mastermaster layer setup, also whatever is provided as partof straight full sets documentation is only a very minimal.So it'll not have any automatic backup and recoveryscripts available or even auto upgrade to MySQL.How we are going to do it.So how we are going to change it and then do itand what all implications we are going to get, right?So all these things are not available as partof whatever the MySQL thing which we are going to create.And already we are auser management or our application related things.We need to worry.That's the reason EK has provided a control plan wherewe really don't need to worry about cumulative stuff.Only, we need to worry about the workloads here.At the same time, again, if you bring this MySQLnow you need to worry about MySQL also here.But instead of that, if we start using the powerof cloud means like as we are on cloud,we should begood touse the cloud level services.At the same time running our workloads on Kubernetes will bea good option.So with that said, we can use the RDS database as our store.So let's see what are the advantages of using it, right?So now we remove the MySQL part here and thenwe are going to use the Amazon RDS database.So when we are using RDS database here, so howwe are going to connect to RDS database.So that's the thing, right?So in Kubernetes for services,there is one concept called External Name Service.So using external name service,we are going to connect to the RDS database.So nowand as usual we'll have the user management noteport serviceand then we are also going to havegoing to access it using work note public.I call note port slash user management slashhealth status APAfor once we deploy it when it is running.So now what are the advantages when using Amazon RDS isautomatically it means like by defaultyou'll get the high availability.Automatic backup and recovery scripts availablewhich are just to configurable directlyfrom the management consoleand you can even create any number of read request, okay?And metrics and then monitoring is availableout of the box and automatic upgrades.So there will be minor and then major version upgrades.So you can schedule them.So if you minor upgrades need to be updated on so and sodate means likes every weekend on so and so nightat from 12 to 2:00 AM, it need to be applied.Then automatically those will be applied.So in addition to thatit is a multi support and we really don't need to worry.So we only get a endpoint URL, DNS named URL.And we just need to worry only about that DNS named URL.So we really don't need to worry about anything.So that DNS URL, whatever Amazon RDS provideswe are going to configure in this external name serviceand then leverage thatbenefit of RDSfor the workloads we are running on EKS cluster.So now, so we have seen all these things in the line ofblog diagrams and then features and then all these things.But we also need to look intoinside AWS how the architecture is going tolook like.So that's another important thing which we need to know.So if you go here,so we are going to see AWS EKS network designwith EKS workloads running inside and also RDS database.So how it is going to look like in a VPC.Let's see that.Now.So if you go here in AWS cloud, we have a VPC.So this VPC is automatically createdas part of creating the EKS cluster.So we have ensured that based on our commandwe said that our EKS cluster should be availablein US east one year and then one B availability zones.And we also said that,so it automatically creates the private subnetsand then public subnets.So always our databases should be in private subnet.So I have create means like we can create our RDS databasein our private subnet.So in addition to that, we also will have the public subnetsand first we'll go aheadand then create the EKS cluster control plan.As part of that, all these things got createdwhich is nothing but VPC availability zones.Inside this availability zones you have the publicand then private subnets.So when this EKS control plan is createdit also creates the worker nodes, right?So which is nothingbut the easy to instances in each public subnet.So by default we created currently the clusterwhatever we have created is in public subnet.The moment we go into our next sectionswith load balances.We will ensure that this respect to worker nodeswhich is nothing, but these worker nodes are nothingbut part of it, node group concepting EKS.And then those will be moved under private subnetsand only load balancers will be in the public subnetswhich we are going to see in our upcoming lectures.But for now, let's assume that.So we have a VPCwhich is created as part of creating the clusterand then that cluster is partof you assist one year and then one B zones.And then it also created publicand private subnets leveraging the clusters.Private subnets,we have created the RDS database inside them.And then now we'll start with the MySQLexternal limb service.So in our Kubernetes clusterso we have created a MySQL, external limb service.So which will connect to the RDS databasewhatever is available in to available zoom zones.Anywhere in our real lecturewe are going to create only a free tier onewhich means only one database will be available.But for depiction, I have showing here two RDS databaseswhich means like underlying, it'll be spannedacross how many availability zones we have createdthat many replicas.But now we are going to doin our practical only one RDS database, but depictionI'm showing how the availability is going to be there.Okay, So now we are also going to deploy our usermanagement application herewhich will have a replica set and the respective parts.Okay. You means user management application here.OkaySo inside a part you have the user management container.Okay. So now what happens is like you'll alsocreate a user management node port service toexpose this deployment to access where userswhere internet.So this is the high level architecturefrom AWS EKS perspective meanslike EKS in combination with the RDS database, right?So in our next lecture we'll go aheadand then start creating the RDS databaseand then prerequisite security groupsand all those things required for RDS database.And deploy all these things and then test it.So I'll see you in the next lecture.Until then, bye bye.