# 10.4 Step-04- EKS with Network Load Balancers Demo

-: Welcome back.In this lecture,we are going to create a network load balancer.So in previous lectures we have createda classic load balancer.So now we are going to createa network load balancer manifest,and then execute them or deploy themto create a network load balancer in AWSin our architecture.So only change means like the entire architectureis going to be same.Only change here isinstead of classic load balancer service,we are going to create a network load balancer service.On a very high level,what is network load balancer service?We have seen earlier also,it is nothing but a TCP load balanceror a UDP load balancer, which doesn't need any http traffic.Okay?It's like it'll be communicating at the TCP level.So whatever it is, my application allows TCPR,http anything is fine for it.So I will use the TCP load balancer here.In regular use cases or in general use cases,like TCP load balancer are used for load balancingor providing the high availability featuresfor the applications which doesn't need http,maybe like a SMTP server or some other stuff, right?So whoever's needs plain TCP load balancing.So we can provide using network load balancer.So now let's go ahead and then create the stuff.Okay?So we'll go to 0703 network load balancer NLB.And if you see here, so everything,entire manifest is going to be sameas classic load balancer.Only one additional step will be there, which is nothing.But we are going to add annotation named NLB.So we are telling the Kuberneteswhenever you are creating this load balancer type service,also reference this annotation statingthat use the network load balancer,which means whenever you are creating a load balancer,create NLB service,which is nothing but network load balancer service.So annotations are nothingbut we are trying to tell them that,tell the Kubernetes that we are giving the pointersthat create the respective servicebased on whatever is provided inside it.Okay?So now we are providing and telling Kubernetesthat create a NLB service here.Okay?So that will, it'll create the NLB service,which is nothing but a load balancer.Okay?So now let's go back to our work, visual studio code,and 0703 network load balancer NLB.And here is the thing, I copy the entire stuff from CLB,and what we'll do is we'll change the name here to NLB,and let's add the annotations, right?Annotations under metadata, we are adding the annotation,and the annotation name is going to be NLB, right?So as usual, whatever is there we have copied it.So now we have completed the network load balancer manifest.So rest all is going to be same typeis load balancer selector for our portsis going to be user mgmt rest app,and port is going to be 80.And then target port is 8295.Okay, so now we'll go back and then deploy this stuff.So let me come out of that, and then let me go to 0703.Okay.And kubectl apply hyphen F kube manifest.So this should create us.Kubectl get svc, right?So now it is creating the NLB load balancer.So let's go backto our management console and then refresh it here.Okay?So it is getting created and off type network.You can see it here.So it is creating a network load balancer now.So it will take a while to provision it.So once it is provisioned, we will look into it more.Good.Now our network load balancer is active now,and we can see the listener putwhatever we have configured here,which is nothing but port 80, is the same.We have got it here, and we can even see the target groups,and inside target groups,we can see both the targets are healthy,which means that both the workers are healthy.And then we communicate to our worker nodeswith the 31984 to go inside and then accessthat respective pod, okay?So now this looks good.So let's go ahead and then access our application.So we can say, we can copy this complete URL, copy,and then go to browser and then STP slash slash,and user mgmt slash health status, right?It should be up and running.So we can even check this way, or we can go to our postman.And here also we'll have our health status URL.So this is CLB URL.If you want to test for NLB,so then provide the NLB,and then provide the URL as the variable.And the value is http colon slash slash and this value.Okay, so same should be updated in current value.Add it, right?And change the environment to NLB,and then go to health status, and then test it, right?So where is this?Not, this is not notification.We need to check user management.Yeah, this is the one,user management health status,URL slash user management health status.So it should look this way, right?So let me send it, so it's up and running.So earlier we have created the admin to user.If you send it, ideally it should list that.Okay?So if you want, we can even create one more user,admin three, and then even test it.Okay, save, send, okay, create, and then list the users.And we have the admin three created.So everything is working fine here.So our next step is to go aheadand then delete the manifest, right?So we have tested everything so we can delete it now.So kubectl delete hyphen F,and then kube manifest.Right?So this completes our NLB demo, network load balancer demo.So in our next series of lectures in section eight,we are going to focus on application load balancer,which is the very important one,where we are going to focus on Ingress concepts also there.So I'll see you in the next lecture.Until then, bye bye.Thank you.