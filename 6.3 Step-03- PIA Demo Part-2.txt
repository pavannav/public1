# 6.3 Step-03- PIA Demo Part-2

Welcome back.Now let's go ahead and then create an Im role for pod identity.So which is nothing.But we are discussing about the IAM role which we are going to create now with S3 read only access.Okay.So now let's come back here and we'll go to IAM and in IAM.So we'll go to the roles section and in roles we'll go ahead and then create a role.And we will select the AWS service here.Use case which we are creating here is for ECS okay.So we'll select the service name as ECS and EKS.We are going to create this role for ECS.Pod identity allows pods running in Amazon ECS cluster to access AWS resources.So this role is particularly for this use case.So we'll select that.And then here we will search for S3 right in the permissions.And we will give S3 read only access.So S3 read only access we are going to provide.Click on next and we And we'll provide the role name as X pod identity.S3 read only role 101 and it will have this trusted identity entities here.So which means all this information right related to X pod identity, which means the trust policy relatedto X pod identity is present here.Auto populated.And here we have the permissions which we have listed.If we want to add any tags you can add click on Create role.So this should create the IAM role for us.So this IAM role we have created just now right.And now we will go to the EKS cluster right.So we'll go to the cluster click on EKS Demo1 and we'll click on this access section right.And in the access section you will have something called pod identity associations.So here in the pod Identity associations we can click on create and select the IAM role which we havejust now created which is EKS pod identity S3 read only role right.And in the namespace section we will select default namespace and in the service account section wewill select aws, cli, sca, and then we will go ahead and then click on create.So this should create the pod identity association for us.So if we go back here again go back to access here.And you can see a new pod identity Association is created for us.Now we will go back and then test it again okay.So what we need to do it is we need to restart the pod, which means this is just a pod, not a deployment.We will delete and recreate the pod okay.So we will run the command here, delete the pod and then we will deploy again okay.So let's wait for it.Once the pod is deleted we will recreate it.We will go ahead and then deploy the pod again.And this should create the pod for us right.Service account unchanged and pod got created.Now if you say kubectl get pods, your pod should be running.Okay, so kubectl get pods.And you can run the command kubectl exec hyphen it.And pod name is aws cli hyphen, hyphen space aws s3 and ls.So this should list all the S3 buckets present in my AWS account.There are many AWS buckets here.Means like S3 buckets.All those things are listed here.Okay, so that's about it.Now let's come back here and then clean up whatever we have.So let's go ahead and then delete whatever we have created.So we have we are deleting the service account and pod.And in addition to that whatever the pod identity association we have created, we are also going toremove that.And in addition to that, we are also going to delete the IAM role which we have created as part ofthis demo.I'll see you in the next demo.Until then, bye bye.Thank you.