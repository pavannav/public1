# 4.15 Step-12- Kubernetes Deployment - Update Deployment using Set Image Option

-: Welcome back.In this lecture we are going to workon updating our Deployments.So we are going to go into 0 4 0 2, update Deployment.And if you see here we can do the update Deployment usingeither set image, or edit Deployment options.So in step one, we'll use set imageand in step two, we are going to use the edit Deployment.So, and then there will be multiple things to understandand then multiple observations we need to makewhen we are doing this.So that will be in this modelwe'll get a lot of knowledge on what we are doing.So let's go up and then,so for the update Deployment using set image, right?So one thing we need to do islike we need to get the container name correctly.So first thing is iflet's see the update Deployment command.So cube CTL, set image, and then Deployment,and the Deployment name,and container name is equal to container image.So here, we need to have the container name.So to get this container name, we can get thatcontainer name using this command, cube CTL, get Deployment.Deployment name, hyphen O AML,and where we can find it is, spec dot, container name.There we can find it.So let's find our container name.So if you go up, you can see that spec dot,container start, name,and then you can find cube engine X.So that's our container name.So in cube CTL set image, Deployment, Deployment nameand then container name is cube NGX is equalto my new container image, which is nothingbut stack simplifies slash, cube NGX,colon two dot zero dot zero.So earlier we have used one dot zero dot zero.So that's the reason our application is comingas application V one.So now if we are going to update it totwo dot zero dot zero.So let's go ahead and then do that now.So cube CTL, set image, and then this one.And then we said that hyphen hyphen record truefor our versioning rollout.Versioning to be enabled. Copy and come here and paste it.Right? So now our Deployment got updated immediatelywe can see the rollout status here.So waiting for the Deployment and out of ninenine of 10 updated.And finally 10th one also updated.So using rollout status, you can see how the rolloutis going to happen.Now if you see the cube CTL get forwardsthen ideally you see that all the pods got recreatedwhich means its age is only 23 secondsjust now it got created.So with the new image, right? So now you can evensee cube CTL get deployed, right?So to see that all are upand running up to date and then available is 10.So now describe the Deployment.So by describing the Deploymentwhat we are going to understandwe can verify that events and understand that Kubernetesby default do rolling update for new application releases.So what is the rolling updateand then why we do rolling update by default?So when the Kubernetes does the rolling updatewhat happens is like the downtimeof our application is going to be zero, right?So one after the other it is going to update our partsand there is one more strategy in this update Deployment.There is one more strategies in addition to rollingthere will be something called recreate.So if it recreates, which meanslike it'll delete all the partsand then recreate at that time.So at that time you can expect the downtimefor your application.By default it is going to be rolling update.So we really don't need to define anything evenin our Deployment spec itself whenever we arewriting the YAML manifest.But there will be some cases like my skillmy skill containers are these things whereinyou want to recreate the stuff.So in those cases you can use the recreate strategybut in general applications, whatever you use99.99% will be using the rolling update.So that's the reason is by default defaulted it.Okay, so let's go here and then describe our Deploymentcube ctl, describe Deployment, and my Deployment name.Right? So, let's see the events here once it comes, right?So you can see it here.So it has done a rolling update one after the other.Okay, scaled up replica saidand then it started updating oneafter the other, one after the otherand then it already completed all the things.Okay, so one important thing we need to notice hereis the replica set.So whenever we have done the update, it is going tocreate a new replica set.So the old replica set becomes zeroand the new replica set.So 26 minutes back we created the first Deploymentin our previous section.At that time this replica set is created means likewith this replica set we have the old version 1 dot 0 dot 0and it created a new replica setwith the two dot zero dot zero off our application.So this is one more observation which we need to know.And one more thing is get pods, okay?Pod template, hash label.So this also you can compare and understandthat it's a different one.So let's see here our pod and then template.So pod template, hash label, you can see it hereit is pointing to our second replica setwhatever it got created.So recently, which is two minutes back.Okay? So that's about itand verify your rollout history of a Deployment.So we have that rollout history so we can switch backto older versions using revision history availableto us in our next section.So 0 4 0 3, we are going to do the rollbacks.So at that time this will be helpfulbut now we are going to just see the rollout historyof our my first Deployment applicationright cube CTL, rollout, history, deployment,and then deployment name.So it says that the version is 2 dot 0 dot 0and this is the second one.So we have recorded it so it is true.So now the last thing is access your application.So already I have it in our browser, butif you want you can go and then go to cube ctlget avc, and then get the note pod herethree two one six nine and get notes iPhone.Why? To get your external IP and then access it.I already have it here.3 2 1 6 9.So if I refresh it, so now it is avc, it should become v2.See now my application version is V2and the background also got change two sky blue color.So that's about it.So now our successful Deployment has been happen meanslike we updated our Deployment using the set image optionwithout any issues and all these observations we have done.So in our next lecture we'll focuson doing it using cube CTL added Deployment.So I'll see you in the next lecture.Until then, bye bye.Thank you.