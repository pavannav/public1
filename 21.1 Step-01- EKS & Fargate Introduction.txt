# 21.1 Step-01- EKS & Fargate Introduction

-: Welcome back.In this lecture we are goingto get a very high level introductionabout what are Fargate profilesand what is Fargateand then what is this Fargate serverless.So as partof this section we are going to add our new featureto our EKS cluster, which is Fargate profiles.So let's move on and understandon a very high level what is Fargate?So Fargate is a serverless compute platformfor containers on AWS.So Fargate provideson demand right-sized compute capacity for our containers.So EKS integrates Kubernetes with Fargateby using the controllers that are builtby AWS using the upstream extensible model providedby Kubernetes.So these controllers run as partof EKS manager Kubernetes control plane and are responsiblefor scheduling net Kubernetes port onto Fargate.So the Fargate controllers include a new scheduler that runsalongside that default Kubernetes scheduler in additionto several mutatingand then validating admission controllers.So these four points are very importanton a Kubernetes perspectiveon EKs in relation with Fargate.So these four points I directly took itfrom documentation and then tested here.So the reason is like, so when we wantto understand how Kubernetes sees scheduling the portson Fargate related serverless infrastructurethe answer is we have the Fargate controllers createdby AWS using this upstream extensible model.And due to that, it is able to schedule the partson the Fargate serverless platform.So when we start a part that meets the criteriafor running on Fargate, the Fargate controllers runningin the cluster recognize updateand then schedule the ports on the Fargate.So that's about the Fargate on a very high levelbut the key point in the slide is we are goingto have Fargate controllersinside our EKs manager control planewhich is built using upstream extensible model providedby Kubernetes for scheduling the parts on Fargate.So that's the key point here.Moving on, so AWS, EKS on Fargate.So let's understand what we are going to get using that.Okay, so we can directly bring our existing portsand then deploy to Fargate without any hassle.So we don't need to change our existing ports.So Fargate works with existing workflowsand services that runon Kubernetes no changes straight away.You can bring and then deploy herebut there is one condition.The last slideof this lecture will have something called considerations.So very, very important thing.So when we are running things on Fargateso how we say bring and then run as easilyat the same time there are some architectural decisionsand then what it supportsand then what it doesn't support also providedby AWS and that is a big list.Okay, so that one also we needto see those are called Fargate considerations.So we also need to have a knowledgeon those things if we wantto bring our applications to run on Fargate.So next thing is they are production ready.So now EKS Fargate is production ready.So we can launch ports easily to Fargate and it runs portsacross availability zones for high high availabilityand each port runs in an isolated compute and environment.So this is a very important point from Fargate perspective.We will multiple times trust this pointin our course in the next upcoming handson lectures stating that one point is one part is equalto one easy to Fargate instance in our EKS.So whenever we launch a port, it is goingto generate a easy to Fargate instance automaticallyin the background.And whenever you say cube CTL get notes whenever youhave deployed five Fargate ports, then you'll get five easyto Fargate worker notes available for you.And then you can see that using Q CTL get notesand next thing is right sized and then integrated.So this is something like how much you need usethat much only.So if my part needs these many resourcesthen use that much only.So only pay for resources you need to run your ports.So it also includes means like Fargatealso includes AWS integrationsfor networking and then security.So networking and security is not compromisedby using Fargate on EKS.Moreover, your security is doubled.Only we can say not reduced.Okay, so now EKS deployment options available for us.Okay, when we bringing Fargate into the picture.So what all deployment options EKS is availableIf it take a look on a very high level, that looks great.Okay, so that's the reason I have put this slide.Okay, so we can have only easyto node groups which are managed or unmanagedor we can have a mixer deployment with the easy to managein node groups, easy to unmanaged it in not groups.And then Fargate are only Fargate cluster meanslike only a cluster EKS cluster control planwhich Fargate profiles can be created.So you can see easy to node groupswith manage are easy tooand then unmanaged it easy two nodes.And if you see overall our entire this coursewill be dependent on manager easyto nodes and the Fargate profiles.So we really didn't do anything relatedto unmanaged easy node, easy to notes wherein you needto bring your own AMI and then your own AMIand then you need to manage it using EKS control planand this is legacy.And then this is the trend which is running nowwhich is managed easy two nodes.So we focus on this one primarilybut as this option is available, so I just put it here.Okay, so now the next thing is manage it notesand manage it notes and then Fargate notesin the mixer mode.And in Fargate you can only have Fargate notesin simple terms Fargate serverless.Okay, so you don't even need to say notes here.Okay, and next thing is in deployment options whenyou have easy to node groups.Okay primarily we are focusingon manage or node groups only.Wherever I say node groups it is goingto be managed node groups, okay?So in a AWS cloudwhenever you create a EKS cluster it is alsogoing to create a VPC.And when we create a manager node group as part of thatso you can create your manager node groupin public subnet or you can create in private subnet.So this flexibility we have when weare do dealing with EC two instances.So you can have your manager node groups created inboth public and then private subnets and then handle that.So, but when we goto Fargate you'll have a restriction there.So we'll go there and then see it.So in only Fargate more.So we are going to have our respective Fargate profilesget created only inside private subnet.So parts runningon Fargate are only supported on private subnets.In that case whenever you have a EKS clusterand then whenever you want to deploy your loadson Fargate in your clusterat least to one private subnet should be thereto create your Fargate profiles and moving on.So how the mixer mode deployment looks like.Okay, so you can see that in mixer mode.So you'll have the easy to instances in privateand then public subnets and then you can create your publicand then private manage node groups there.And then for Fargate you definitely needto force yourself to create your EKS Fargate profilein your private subnets and movingon EKS Fargate versus manage it versus unmanaged nodes.So this is one thing which AWS highly portraits andand this simple thing makes us understand many stuff here.Okay, so one is units of work, okay?So in units of work for Fargate it is just only a port.So it is concerned with only a port.So whenever you deploy a port it is goingto create a new underlying Fargate easy to instancebut it it concerns about only a port.But in manager notes we first create easy two instancesand then we deploy our parts in themand in unmanaged notes also it is the same thing.And unit soft charge means likehow the billing happens, okay?So here in Fargate it is going to be ports.So when you are dealing with multi-tenancy and environmentsand then you want to charge for specific clientsper port meant, like they have few parts runningand then for them you want to chargethis is one good option for us, okay?And in the charging perspectivein manage notes is going to be basedon the number of easy two worker notes inin unmanaged also it's the same and host life cycle, okay?So there is no visibilityof the host from Fargate perspective.So visibility in the sense you will not be able to connectto that host visible in the senseif you say Q CTL get notes.So this Fargate notes also will be visiblefor us per pod it is going to span one node, right?So but ideally we don't have access to that nodes, okay?So they can terminateand then recreate our what is happening inside that nodeis not our business, only our businessis what I'm going to deployfrom port perspective in Fargate but in manage nodes.So we'll have the AWS SS such is allowedin the manager nodes.So whenever we are creating the cluster alsowe are giving a tag there to provide SSH althoughand then access and then keep our information alsoin our node group creation commandwhatever we have seen so far.And in unmanaged nodes.So the host life cycles customer dependent, okay?So we really don't care here, okay?So which means AWS really don't careabout what you are going to useand then how you are goingto handle your authentication authorization about your hostand in host AMI perspective.So we really don't have any visibility about the host AMIin our Fargate because we are not even able to login or we are not controlling that.Okay, but in manage notes it is AWSwhether AMS will be provided for usand then they will be patched auto updated from AWS for us.Okay, so that's the reason that is called manager notes.And from unmanaged notes perspective customerbring your own thing, okay?So which means including the OS also you need to bringand then justto use the EKS cluster control plan with that so lotand lot of hard work we need to do.But why do you use unmanaged notes, right?So that's based on means like it's a legacy.And then recently they introduce the manager notesand then we can start using management notes.So now host to two ports relations.So this is very, very importantfor us to make a note from Fargate perspective.So one host, one Fargate host is equal to one port.So if you span 10 ports, then it is 10 Fargate hosts, okay?But in manager notes you can have two instancesand then you can span many ports based on the CPUand then memory resources available in those notes.It's the same case one too many in unmanaged notes.So that'sabout the Fargate versus manage it versus unmanaged notes.And next thing is Fargate considerations.Okay, so these are very big.So what we need to do is we needto take this documentation link and then review them.So there are many considerations we need to be awareof before we decide our Kubernetes workloads to runon Fargate, okay?So that's very important here.So let me copy this link and then go here and paste it.Okay.And if you see here the considerations, right?So let me make it bigger right?Okay, this looks good.Okay, so these are the Fargate considerations we needto worry about when we are dealing with it.Okay, so when you see herethe first thing itself is the thing classic load balancerand network load balancer are not supportedon Fargate only application load balancerwith LB ingress is supported with the minimum version.It should have this one.This is one thing and like thisthere are many things, okay?Damon sets are not supported.So you can grow, go through all this stuff here.So as we have documentation link whenever youare deciding your real production workloads planning to runon Fargate.So you need to go go through all these things.Currently, GPU was also not availableand privilege containers you cannot runand demonstrates are not supported.So like this, there are many things, parts runningon Fargate need to only run on private subnets, okay?You can use the vertical port auto scaleto initially right size the CPU and memoryfor your Fargate portsand then use the HAR gentle port auto scaler.Okay, so state full applications are not recommendedfor parts running on Fargate as on today, okay?They, they doesn't have a persistent database, okay?Persistent disc.So for purpose, these are not load, okay?So like this many things are there here.So which you need to go through and then understand.And then based on that, only decide if youif your workloads can run hereyour production workloads can run on Fargate or not.So that's about the overall Fargate introduction, okay?So we'll continue to the hands on sectionin our next lecture.So I'll see you in the next lecture.Until then, bye bye.Thank you.