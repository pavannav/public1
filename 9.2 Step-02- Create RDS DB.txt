# 9.2 Step-02- Create RDS DB

-: Welcome back.So we are in our GitHub repo.So let's get into our EKS storage with RDS database sectionwhich is zero six section.Okay? So the step one introduction just nowwe have completed, which is nothingbut what are the problems with myas skill portand then EBS CSAand how are we going to solve them with AWS RDS database?So now we need to review the VPCwhich is created as part of our EKS cluster.The reason for that isbecause inside that VPC in the private subjectwe are going to create our respected RDS database.Okay? So let's go to EC twoand let's go here and from go to VPC.And if you see we have two VPCs availableone should be default and then one createdas part of our EKS CTL EKS demo one VPC.So now as part of this VPCit might have already created the subnets, right?So if you see here, so these are the subnets it has created.Okay? So it has created the two private subnets in one isin US east one year and then one is in US East one B.So we are going to create the RDS databasein these private subnets.Okay, So let's go ahead and then create them now.So where is this?Yeah, so we have reviewed and then understood thatas part of this cluster it created four subnets two privateand then two public.And our cluster notes means like our easy toworker notes are currently running in public subnetsand the RDS database we are creating in the private subnet.So let's create a DB security groupfor us as a prerequisite onewhich we'll leverage when creating the security group.So let me go to EC two hereand I will go to security groups, right?And I'll create a security group.And the name of the security group is this.And I can also copy this and I'll paste it.Allow access for RDS database on port 3 3 0 6and the VPCs EKS CTL EKS demo one cluster VPC.Okay? And I'm going to add the inbound rule sayingthat myas skill, right?So I'm going to allow access for myas skill 3 3 0 6from anywhere even as it is in private subnet.Ideally we really don't need to worry.So even if you say access from anywhere, okayso I'll create the security group and this is completed.So the next step is to prerequisite twocreate a DB subnet group in RDS, right?So let's go to RDS service, so searchfor RDS here and select the RDS national database Service.And once it is openso we are going to create a DB subnet groupokay with us east one year and then one B.So we'll go here and then you can seein the left navigation, you can see the subnet groups here.So I'm going to create a subnet group like thisand we'll also have description, EKS, RDS db subnet groupchoose vpc.VPC is our eks, ctl EKS demo one.And availability zones we are going to use one yearand then one B so that whatever the audio's database itgets created can be available in those locations andin one year.And then one B, what are our private things, right?Private subnets we need to select now.So let's go to VPC and identify which are our private subnetthings, okay?So we have four here.Let's go here and go to subnets and prove subnet this one.So it is 64 dot 0 slash 19.So that is one.So I'll select a 64 dot 0.Okay? So that is one.And in one B it is going to be 96 dot 0 slash 19.Okay? So I'm going to select 96, okay?So 64 and 96 are private subnets here.So in our DB subnet group we created that and thenwe are going to create it.Okay? So now our DB subnet group got created.So we are going to create the RDS database.Okay? So let's go back here and then go to databasesand create a database, right?And we are going to create a standard create.So that's what we have selected here.And the engine is going to be myas skillAnd it is going to be amyas skill communication and the versionwhatever it is populated automatically I'm using it, okay?So we really don't need to worryabout what version it populates here.Even in future when you see itit might be 5 7, 2, 2 or five eight.Our application is going to work everywhere.Okay? So now the next thing is we are going toselect free tier.Okay? So if you use productionyou'll have the high availabilityand fast consistent performance.And if it is free tier, you are going to use a singlenor far our RDS database testing.So we are going to use free tier for nowand the DB instance identifier, okayso we are going to say user MGMT db.So that is what we are going to use the name.So this name, whatever you want, you can put it.So, and the master username we are going to use is DB admin.Okay? So now the DB admin will be my masterusername to connect to it.So we also need to update our user managementdeployment manifest there.We'll do it in our next steps.Earlier we have givenwhenever we have a myas skill pod runninginside EKS cluster, we have user there, root user there.So now we need to update that root user toDB admin and password, we are going to use that same onewhich is nothing, but we are going to use DB password one.One, Okay, so what is this?Why it is showing?So my safari browser auto generated something hereI'm not going to use that.I'll say don't use and I will use DB password one, one.So whatever we have generatedas a Kubernetes secret, right?So the same thing I'm going to use.So DB password one, one.Good. So now instance sizeI'm going to leave it as T two micro one, CPU one GB.That should be fine for us.And the general purpose storage.And then all these things, 20 GB.I'm going to leave these things as is hereand we are going to say availability and durabilitywe are going to leave it as is here, okay?So if you want the onceif we would've selected the production herethen obviously would've got the automaticthis option would have been enabled here.And then multi asay deployment we have done.But this is for our testing purpose.We really don't need to worry about these things.Okay, so now what in vpc we are going to say eks, CT L vpcwhich we want to create this.And inside that vpc, this is the DB subnet group.We have selected eks, RDS DB subnet groupand we are creating in the private subnetwe really don't need to worryabout publicly accessible default is noand choose an existing security group as a prerequisite one.We have createdthat VPC security group means like DB security group.So let's go ahead and then select that.So which is nothing but E eksRDS db sg, okay, so what happened?Remove the default one.We only need eks RDS DB sg.So that is selected here.And then default one, we have remote and availability zone.I wanted to be created in US east one yearand database port, I'm going to use 33 0 6, okay?So I'm going to use the password authenticationwhich is nothing but DV password 11whatever we have created.Okay? So these are additional database optionsif you want to use, so initial databasewhatever you want to create.So I can directly say user MGMT to DB schemaIT need to get created here and all these things.So let's go here.And I really didn't worry much about other stuff here, butif you want the initial database, you can say user MGMT db.So this schema is required for us to automaticallycreate this schema will help us to connect to this.It means like whenever our user managementapplication spring boot application startsit expects this database schema available for us.Okay? So user MGMT db, you can directly give it hereif you want to, or you can leave it as is and then move on.And then I have created one more step for us.So that is an interesting step.Okay? So the reason I created that way isfrom our Kubernetes cube ct, I should be able to connectto the RDS database and then run the commandsfor myas skill because it is in private subnetyou cannot connect via internet or from your desktop, right?But from our Kubernetes cluster, using Cube ctlyou'll be able to connect.So to ex to use this step and then create theuser M GMT schema from hereideally not using this configuration option tocreate a initial database name, so just for our learning.And then in future, if you have any issues to connectto the database, RDS databasethen you need to know the way, how you need toconnect it when it is in the private subnet, right?So for that purpose, I am not initializingor not creating a initial database user mgmtwhich is required by our user management microservice.So we will leave it empty and then we'll createat this respective to step four so far.Now we'll move on and then create the database, right?So now if you want this password to be saved herein my, this one, not now.Okay? So I really don't care.So it'll take close to 10 minutesor something to create this database.So I will pause the videoand then our database is available now.So if you click on this user MGMT dbso you'll find the endpoint here.So this is the endpoint we are going to configurein our external name service so that our workloads runningon Kubernetes cluster will be able to connectto this RDS database.So I'll see you in the next lecture.Until then, bye bye.Thank you.