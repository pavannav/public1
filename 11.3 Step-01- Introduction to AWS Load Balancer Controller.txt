# 11.3 Step-01- Introduction to AWS Load Balancer Controller

-: Welcome back.As part of this sectionwe are going to install the AWS load balancer controlleron AWS EKS cluster.And this is the core controllerwhich helps us in creating the ingress servicesin Kubernetes cluster.So let's understand more about this in detail.So from Kubernetes ingress perspective,earlier AWS used to have AWS ALB ingress controllerand that is renamedand redesigned now as AWS load balancer controller.And earlier it used tocreate only AWS application load balancer related resourceson AWS from EKS cluster.So when you deploy ingress manifestthen it used to createa application load balancer on AWS.But now as part of this AWS load balancer controllerit can create AWS application load balancesand network load balances.So for creating the application load balancerswe are going to use the Kubernetes objectnamed ingress resource.And for creating the network load balancerwe are going to use the Kubernetes object of type service.And also we are going to ensurethat it is annotated for NLB.So we are going to add an annotationstating the network load balancerso that it can create the network load balancer for us.And when coming to the earlier versionwhich is AWS ALB ingress controller,so it doesn't support latest ingress API versionwhich is networking.k8s.ivo/v1.So from Kubernetes version 1.22 onwards.So in addition to that,this ALB ingress controllerwill not have any developmental releases plannedand soon it will also get deprecated.So with that said, we need to usethe latest and greatest available from ingress perspectiveon AWS EKS cluster, which is AWS load balancer controller.And this supports latest and greatestfrom ingress perspective.So this is the ingress APIwhich the latest load balancer controller supports.Now the next thing here ishow this load balancer controller,what are the objects involvedfrom Kubernetes respect tofor this load balancer controller.So let's see that in a visual manner.So if you see here in the EKS cluster,we have something called kube system namespace.And you can see in AWS cloud,other AWS services will be created hereand the core EKS cluster related resources.And inside that,whatever it is going to get created as partof this load balancer controllerare which is involved with that,we are going to depict theminside this kube system namespacebecause they are going to get created in this namespace.So to start with, the very important point hereis AWS load balancer controller relatedservice account in Kubernetes,and we'll create this service accountand also we'll create a IAM policyand then IAM roleand this IAM role will be annotatedinside this service account.So this IAM role ARN will be annotatedinside this load balancer controller service account.And why we are doing that,what it is going to provide us in detailwhen we are implementing practically,we'll know more in detail how we are going to do that.So on a visual manner, so these are the objects involved.You'll have a IAM policy, you'll have a IAM roleand that IAM role is annotatedwith the Kubernetes service accountof type load balancer controller.So a load balancer controller service accountwill have a annotation off IAM role associated with it.And next thing here is,so whenever you deploy your load balancer controller,so it'll create a deploymentwhich eventually creates the partsrelated to this load balancer controller.And in addition to thatit'll also create a load balancer controllerweb hook cluster IP serviceand it'll also createa AWS load balancer TLS related secret.So these are the things which are involvedfrom Kubernetes perspective in kube system namespace.So it will create a service account,it will create a load balancer controller deployment.It'll create a load balancer controllerweb hook cluster IP serviceand it'll also create a AWS load balancer TLS service.So now this service account,whatever we have createdis associated with this deployment,which means it is also associated with the podsso that, so whenever this load balancer controllerwe get the ability means like this load balancer controllergets the ability to create the application load balancersof network load balancers from EKS cluster in AWS cloud.So let's see that.So if you see herein every EKS cluster or any Kubernetes cluster,we know that we'll have the Kubernetes APA server.So as a Kubernetes administrator,so what I am going to do is I'm going tousing the kubectl CLI,I'm going to deploy the ingress k8s manifest.And this load balancer controllerwill watch for the ingress eventson this Kubernetes APA server,and whenever it finds this ingress k8s manifest is deployed.So this load balancer controllerwill take that manifestand go ahead and thencreate the application load balancer for us.So from AWS services perspectiveyou can see that as a application load balancer.And in Kubernetes you can see that as a ingress resource.So this is what is going to happenwhenever we deploy a simple ingress service manifest.Another important thing which we need to knowhere is this AWS load balancer controller deployment.So which means inside this deploymentwe have the load balancer controller podsso those are nothing but workloadsin our EKS cluster and those workloadsare able to create a AWS servicenamed AWS application load balancerfrom EKS cluster itself, right?So how it happened isbased on the permissionswhatever we have givenfor this load balancer controller,so we have created a IAM policywhich has the permissions tocreate application load balancer related resourcesor update the resourcesor delete the resourcesrelated to application load balancer.And that IAM policy is associated with this IAM role.And this IAM role is annotated.This IAM role ARN is annotatedwith the AWS load balancer controller service account.And this service accountis used by this load balancer controllerdeployment related pods.So due to that from EKS cluster itselfwe are able to createthe AWS application load balancerwhenever we have deployed the ingress k8s manifest.So this completes the introductory partof AWS load balancer controllerand in our next lecture we are going topractically install itand then understand it in a better way.So I'll see you in the next lecture.Until then, bye bye.Thank you.