# 2.10 Step-10- EKS Delete Cluster

-: Welcome back.In this lecturewe are going to look into delete EKS clusterand then node groups section, okay?So let's go into 0 1 0 4and we have the steps here.Before going into the stepswe need to understand one thing thoroughly, okay?So one thing that is nothingbut you have created your clusterand then node groups using EKSCTLand whatever the objects it has created as part of EKSCTL.If you're going to edit any of those thingsthen we need to ensure thatwe need to roll back.Example, just now we have added one rule herein the EC2 management console for this security groupwhich starts with the remote,means like which has the EKS iPhone remote access, right?So for this,what we have done is likewe have added the all traffic here, correct, right?Which meansso whenever you are planning to delete the clusterand then respect to note group or whatever it is, right?So roll back this changewhich is nothingbut go here edit inbound rulesand then remove these two rulesrelated to all trafficand then leave it as the previous state.And then you can directly goand then delete the clusterwhich will also delete the underlying node group.First it will delete node groupand then it all the node groups under that cluster.And finally it'll also delete the cluster control plan tool.So that is within one commandyou can delete everythingafter rolling back your changes.So this is the note oneand note two is in our future sectionswhenever we are doing the story section or anythingwe'll also goand then update our worker notes, IAM policy,which is nothingbut whatever we have seen here, right?So if you go to instancesand if you click on this IAM role, right?So inside thiswe are going to add the role related to,we are going to attach a role related to CSI Drivermeans like EBS CSI driver related policywe are going to associate.So if that is the case,if you go and then againdirectly delete the cluster after your work or anythingagain it is going to be in trouble.So that's the reasonwhatever manually you have edited the objectscreated by EKSCTL,please ensure that you revert them backand then do the next step up deleting the cluster.If not,what is the problem, right?So if not, what is the problem?We'll see in a little bit.But for now,if you want to delete both node groupand then cluster,you can use,you can directly use EKCTL delete clusterand then cluster name.So that first node group will get deletedand after that it'll also delete the cluster.And if you want to only delete the node groupso then you can have like this,EKSCTL delete node groupand the cluster nameand then node group nameand then it'll delete the node group first.And after that you can even go aheadand then delete your control plan,which is nothing but the cluster.So now one thing we are discussing iswhat happens if we don't revert back these things, right?Whatever we have edited the objectswhich are was created by EKSCTL.So what happens is some of the cloud formation eventswill fail here during the deletion.So you need to crosscheckwhat it fail and then goand then manually delete themand then work on itor again try to delete from cloud formation stackand ensure thatwhenever you click on the deleteautomatically it'll say that exclude this item.So check that boxand then excludeand then delete itso that you'll be able to delete.But very important thing here is as part of this clusterit creates one NAD gatewaywhich is already getting priced, right?In addition to thatit also creates one network load balancerwhich is in the pricing state only.And it also created a lot of other stuffwhich means like per day it is charging dollar 2.5for this cluster control play.Considering all those thingswe should know how to delete this stuff,which means like how to ensurethat we have deleted our cluster thoroughlyafter our work is completed.So the, for considering all these thingsI have ensured that.So this section is added for youwith two important notes here.Let me come here.And so here, okay?So note one,and then note two,Like this whatever you change means likeif you change something,if I change anything over the course,I'll add that here.But if you go and then change somethingplease ensure that you remove themand then after that deleteso that you don't run into issues.So that is the thing.So in our next lecturewe'll focus on other stuff.Until then, bye-bye.Thank you.