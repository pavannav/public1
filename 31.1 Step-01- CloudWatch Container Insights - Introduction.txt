# 31.1 Step-01- CloudWatch Container Insights - Introduction

-: Welcome back.We are going to look into CloudWatch Container Insightsfeature as part of this section.So we are going to look into many CloudWatch featuresand also a simple notification service as part of this.So what is this Container Insightand then what it is going to do.So let's go ahead and then see that now.So Container Insights is a fully managed observabilityservice for monitoring, troubleshootingand alarming on our containerized applications.Container Insights also allows us to collectaggregate and summarize metricsand logs from our containerized applicationsand also for microservices.So the metrics include utilizationfor resources such as CPU, memory, disc and then network.It also provides diagnostic informationsuch as container restart failuresso that you can consider us one metric to help usisolate issues and resolve them quickly.So we can also set CloudWatch alarmson metrics that container inserts collapse.And the metrics that container inside collects are availablein CloudWatch automatic dashboards too,and we can analyze and troubleshoot container performanceand logs data with CloudWatch log insights.So if you see from CloudWatch perspective,so on a very high level it has covered the maximum ground,even the newest and latest Container Insights feature.So you can configure CloudWatch alarmsinside Container Insights and you can also haveCloudWatch automatic dashboards for the metrics information.And you can also means like Container Insightsis collecting the logs.So you can also have log insights featureand using log insights based on the queries.Whatever we have written, again we can createthe custom dashboards for us and then based on that,whatever the patterns we select, right, so the typeof errors our application is facing and then create a logand then further log create query and then usingthat query create a graph and then try to add itto the dashboard so that what happens.We can continuously monitor that type of errorin our application using log insights queriesand then adding it to the dashboard.So like this, we can have lots and lotsof benefits using Container Insights.So let's see what we are going to deployas part of Container Insights to our EKS cluster, right?So in a Kubernetes cluster let's consideryou have two worker nodes, worker node oneand then worker node two.So let's consider this as our EKS cluster in AWSSo you are going to fast deploy fluent entity, DaemonSet.So we already discussed about what is DaemonSetand then what are the features it providesduring our x-ray section.DaemonSet in very simple terms is whenever you configureyour application as a DaemonSetit is going to deploy one part per worker note.So on every worker note, one of our part will keep running.So now we have the fluentd port up and runningas a DaemonSet in worker node one and then worker node two.The next thing is, what is this fluentd empty portgoing to do?So it is going to collect the application logswhich is nothing but the container logsand also the Kubernetes cluster logs and whatever meanslike the data plan logs, application logsperformance logs and all these things.And then it is going to pushto the CloudWatch where in using CloudWatch loginsights we are going to analyze themand then create our custom dashboard screens for it.And next thing is CloudWatch agent DaemonSet.So what is this going to do?So this is one more set we are going to deploy.So this one will collect the metrics informationof our applications, cluster worker nodes easytwo instances inside that everything okay?So it is going to provide the CPU, memory port, everythingall the information, service information all.So we have a dimension of 134 typesof CloudWatch Container Insights metricsthat is going to get collected as partof this CloudWatch agent.And next is if we deploy our applicationon this cluster and when these things are runningthey are going to collect the necessary informationand then push it to the CloudWatch surveys.And now the information is there in CloudWatch service.So who need to use it, either a developeror a operations user can go to CloudWatch management consoleand then start looking and then analyzing the data.So first in first Container Insightsthe core feature is it provides say container map.So it is going to be a very nice feature.And then it is going to give complete pictureof all the objects present in our Kubernetescluster pods, services, nodes everything.So you are going to see all those thingsin our next slide about the container map.So let's wait for that.And another thing is it is also going to provide the listof all container resources.So container map and resource view is samebut only thing is you can see in map viewor you can see in list view in the container resources.Next is performance dashboard.So from the fluentd DaemonSet it is goingto collect performance logs and CloudWatch agentalso will collect the performance related metrics.And all the information related to metrics you can seein performance dashboard with automatic dashboards createdby CloudWatch for Container Insights.So Container Insights creates few automatic dashboardsand using that you'll see the performance dashboards.So we'll see that also in our upcoming slides,and log groups and then log insights.So we are going to have four to five typesof log groups available out of the boxwhenever we enable Container Insights.So for application logs, which is nothingbut whatever we deployed related to portsand then services those things and data plan logswhich is nothing but cluster control plan.And also we will have host related logs.So all these types of logs will be availableinside the log groups and those things you can selectinside the login insights and then providethe necessary queries to query that data,and then add them as dashboard to our custom dashboards.And now the next thing is alarms.So now you have lot of CloudWatch metrics meanslike this agent is collecting lot of memory CPU metricsof your parts and then your worker notes everything.Now example, like if your worker node is runningat 80% CPU and if you want to trigger an alarmto an email or if you want to take a automatic actionthat if this worker node is runningat 90%, just go ahead and then using the auto scalinggroups create two more nodes,so like that also we can do.So all those things are possible with alarms.So now the next step is let's go aheadand then see the Container Insights map.So this is a sample map.So if you see here EKS demo onewhich is nothing but a cluster, right?So the next level in the map is name spaces.If you go inside Kubernetes on a very high levelit is distributed in such a waythat everything is under name spaces from cluster.And then next comes the name spaces.You will have a default name spaceand cube system name space by default.And as part of our CloudWatch Container Insightswe have created a Amazon CloudWatch EK namespaceand then we have deployed our fluentd CloudWatch partand then EKS CloudWatch agent part.Okay, so now in our whatever relatedto Container Insights is this partof our map and cube system.This is the core EKS cluster related map whereyou have cube proxy part AWS note part and then Q DNS port.And in Q DNS you'll have a service,and under that service you'll have the part.So now you also see the default name space, right?So you can see EKS name spacewhich is nothing but the default name spacein that I have two applications running.One is app one Nginx deployment, which is the podand it has a service network load balanceof service exposed.So like that in the same way I have a simple clusterIP service sample Nginx service.Under that I have a sample Nginx pod running.So that's about the Container Insight.So how much the content you have all can be displayedin a map.And also you can go to sub means like you have a huge amountof containers and then ports and then services deployed.You can even go to a minor part of your mapand then see those things also in a visual manner.So it's a very advanced model has been providedby CloudWatch here and then you are going to enjoy that.And next thing is automatic performance dashboard, right?So as we said whenever the metrics are collectedusing CloudWatch agent in our clusterand then push you to CloudWatch Container Insightsit is going to generate automatic dashboards.So these are automatic dashboards.So this is one sample, I have taken it from EK Sports.So you can see CPU utilizationfor each part I have cube system partand then I have Amazon CloudWatch related two partsand then cube system, other parts and it's likein cube system, namespace, whatever the parts are therethose are displayed here.In default namespace I have app one and then sample pod.So those information, whatever is presentin namespace/pod all those CPU utilization is shown here.And memory utilization and network utilization.And also it also provides the pod limit meanslike over a pod limit if the CPU is used.Those related information also provided here.In addition to that, if you see hereyou have seen only EKS ports but in the dropdownyou can have lot of automatic dashboards generated,which is EKS name spaces, EKS clusters,EKS nodes, EKS services.And recently, very recently they have releasedtheir Prometheus related integration with CloudWatchwhich means CloudWatch Container Insightswhich means you need to deploy your Prometheusinside the EKS cluster and you can get Prometheus tileoff metrics to our CloudWatch Container Insights.So that's a very good option recently releasedand then it is in beta option today.Okay, so that's about it.So you can have EKS port services notesor have automatic dashboard generator for all these things.So this completes the introductory partof our CloudWatch Container Insights.So let's go ahead and then do some hands on there.So I'll see you in the next lecture.Until then, bye bye.Thank you.