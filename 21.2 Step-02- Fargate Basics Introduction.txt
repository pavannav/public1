# 21.2 Step-02- Fargate Basics Introduction

-: Welcome back.In this lecture, we are going to understandabout Fargate profile basics, right?So, so far, we have learned about classic load balancers,network load balancers, application load balancers,and then certificate manager, route 53,elastic block store, and then RDSin combination with Kubernetesand with the elastic Kubernetes service on AWS.So now we are going to start with Fargate profiles.So it is going to be divided into multiple sections,so that we start with basicsand then move on to advanced sections of Fargate profiles.So if we go here, in our 0901 Fargate profile basics.So as a step one, we are going to understandwhat we are going to learn as part of basics.So assumptions here are,we already have a EKS cluster, whose name is EKS demo one,and then we already have a managed node grouprunning there with EC2 instances.So now, we are going to add additional Fargate profile here.So which means we are going to run the clusterwith the mixer more.In the sense, like, we are going to have managed node groupsand also we are going to have Fargate profiles.So we are going to create a Fargate profileusing our tool CLI name,EKSCTL.So we are going to deploy simple workloadwith the NGINX app one as the application,and then it's SQL in node port service will get created.And for creating theload balancer,we are going to use ingress service.And in addition to that,we are also going to DNS these (indistinct) thatusing external DNS in route 53.So in addition to that, we are also going to learnabout new annotation for ingress which is target type IP.Okay, so why we are going to learn about that isbecause Fargate doesn't have a dedicated worker nodes.So that dedicated EC2 type of worker node.So which we can leveragefor node port services which we have usedfor application load balancers earlier, right?So for that purpose, we are going to directlyuse the port IP to be registeredto the load balancer target types.So we'll see more in detail when we go inside,but, so let's go back to our presentation onceand then if you see, we already discussedabout mixer more in our introductory section.But I will see the picture one more time.So we have a EKS manager node groupwith two instances in a private subnet currently.Okay, so but the depiction here we are also showingwith the public subnet because manager node groupswhich we can create on EC2 instances we can createin both public and then private subnets.But when coming to Fargate case,so we are going to specifically tell that,so we can only create Fargate profiles in private subnets.So Fargate profiles can be deployed to EKS clusters only.At least we have in our EKS cluster one private subnet.So these cannot be deployed to the public subnets.So that is very important point which we should be aware of.So we already said that in private subnet,we already have manager node groups running, right?So let's go ahead and then see that.So for that QCTL get nodes I funnel wide, okay?And if you see we should have two nodes running hereand their internal IP is 110.1.14 and then 85.8.But you can see there are no external IPs for these nodesbecause, so those are deployed to this private subnets.So now we are going to create this respect toFargate profile and then run the stuff here.Moving on.So let's see what we are going to do, right?So as part of EKS cluster, already NAD gateways,and then public subnets and then private subnetsare created in respect to availability zones, right?So now we are going to create a Fargate profile FP Dell.With the name space also FP Dell, right?And then going to deploy application named app1NGINX.So we have deployed it and then it created a replica set.So once it starts creating the ports,so those ports will be scheduledby automatically creating the Fargate nodes.So Fargate nodes will get createdand then these ports will be scheduledon those respective nodes.So we have given in our manifest replica as two,so it is going to create two Fargate nodes.So here, one thing we need to understand here is in Fargate,so the number of hosts is directly proportionalto number of ports.So if you give 10 ports in your replicas,in your deployment, so obviously you're going to getcreated 10 Fargate nodes.So now moving on, we are going to also automaticallyhave an outbound connection to the EKS cluster planefor these Fargate nodes via NAD gateways.The next thing is, it's equal and node port service alsowill get created.So when we are doing the complete mixer,more with multiple applications,few on worker nodes and then few onFargate.Then these node port services will be veryhelpful where we are going to define target type colon IPas the annotation at the service level alsoas even required.So now we are going to create the ingress service,means like, whatever the manifest we created it is going tocreate ingress service with the SSL, SSL redirect,external DNS, everything.And then it'll also associatethe SSL certificate creator hereand enable the SSL redirect and also DNS is still thefpdell.kube on cloud.com for using external DNS.And then whenever user tries to access fpdell.kubeon cloud.com/app/index.html, so it comesto application load balancer and for the slash star,it is directly going to the ports.So there is no node port service in between.So from application load balancer target types,it is going to directly go to the respective ports.Whenever we use the target type annotation with IP.By default, it is going to have target typeis equal to instance,which we really don't need to define because it is default.So now let's go back to our GitHub repo.So and then move on with the prerequisite steps.So one thing we need to understand in prerequisite CREs.EKSCTL,CLA.So this is very important thing.So EKSCTL will have continuous releaseswith new feature editions every 15, 20 days.So it's a very high evolving space nowadays in AWS.Means like EKSCTL and also Fargate related stuff.So that is the case, even though means like,whenever you have started and then implemented this.So you might have installed some version here,In other words, zero one EKS create cluster using EKSCTL.And now whenever you are doing maybe 15 days overand then again, you are trying with different,different things in your course,go ahead and then update your EKSCTL.So every 17 to 20 days, they have upgradesto the EKSCTL with lot of new featurescoming into the place.So always it is recommended to use latest version.And then this is the releaser space whereyou can browse to see latest version.And EKS serial version will provide you the exactinformation about what is the current version.I've also updated the report to check your versionand then accordingly you can crosscheckin the EKSCTL releaseswhat is the latest version and then update it.So this is only a prerequisiteand then cautionary step for you.Okay, and now moving on prerequisite checkabout ALB ingress controller and then external DNS, right?So now if you go back to our PowerPoint here,so whatever you deploy in this private subnet,whatever the workloads you deploy,how are you going to expose itto the internet to test your application, right?So because this Fargate nodes doesn't haveany concept of node port service.So even though if you create the node port service,so that node port information is not there,because it doesn't have a static node whichsupports these node port things, right?So even if you define a cluster IP service,it will be restricted to your cluster,but you cannot access at the internet level.So that's the reason you need to have the useror whatever the related load balancer created here, okay?So I'm just saying here, user managementload balancer only because anything is fine, right?Manifest things I'm not going to change too muchbecause upcoming again, next lecture (indistinct),we are going to add the user management stuff, okay?So but some load balancer, we are going to get created herefor our app one, right?So whatever we are getting created here,those needs of few prerequisite services, right?Example, if you want to create a application load balancerin via Kubernetes,you need to have the ALB ingress controller installed.In the same way,if you want to register your DNS to route 53,you need external DNS should be available.So we need to ensure that those are availablefor us on our current work node.As part of previous sections, we are anywaycontinuing the same cluster EKS demo one.Those should be available for us.So we have verified kubectl get nodes -o wide.So we are going to verify KubeCTLget ports -n kube system to see that our ALBingress controller port is running, right?So our ALB ingress controller port is running, no issues.So we'll also verify get ports in default namesspace where our external DNS port is running.So if these two are there, then only our this respect toload balance or whatever we are going tocreate for this app we are deployingin Fargate is going to get created,and then DNS wasted in route 53 successfully.So we verify all of our prerequisite steps also.In our next lecture,we'll focus on creating Fargate profileand then deploying the stuff and then testing it.So I'll see you in the next lecture.Until then, bye-bye.Thank you.