# 13.4 Step-04- Discuss Ingress Importance of Rules ordering

-: Welcome back.As part of step six,we are going to test the order incontext path based routing.So let me close all these things, three apps here.And let's come back to our GitHub repositoryand go back to our visual studio codeand in 04 ALB ingress context path based routing.So you'll find something here called in path based routing,order is very important.So if we are going to use slash starwhich is the root context at the endor our root context, right?slash star or you can also say this as root context.Try to use it at the end of all the rules.So that is very important.So if you don't define root context at the endand then if you define that as the first one, right?So what happens, we are going to see now, right?So we have moved the root context on the topand after that we have defined app one and then app two.So now what we are going to do is we'll go to the terminaland we'll say kubectl apply -f kube manifest.So we have changed the ingress serviceand slightly reordered the context path based routing,root context we have moved to the topand we are redeploying the kube manifestfor ingress service.So no changes for app one nginx deploymentor nord port service.Same for app one, app two and app three.But for ingress CPR demo,so there is a change so it has reconfigured it.So now let's come back here and go to CPR ingressand go to the listeners here and open the rules.So earlier you have seen slash app one and app twoare the one, two and this one is going to be the third onebut now this is the first one.So now let's see what happens, right?So let's go back here and access itso you can access it here.And what happens is for app one and app two,the request will fail,but for a root context it is going to pass.So let's see what happens.And after that we'll discuss more.So I'll say kubectl get ingressand copy the address hereand go here and sayslash app one slash index.html.This is coming from the cache, browser cache.So I'll say here incognitoand I'll provide this and slash app slash index.html.So it is saying that 404 not found.what exactly is that right, right?Slash app two slash index.htmland 404 not foundand we'll access that root contextand it should work.See the root context one which is the app three one,it worked as expected,but for app one and app two it didn't work.So what is happening here is, so let me go back hereand what is happening is any requestcoming with any context path including slash,it is going to only app three nginx.Why because, this is the priority one rule defined here.So it never goes to the app one nginx related target groupor app two related target groups.Always the first rule with root context takes the priorityand it matches here.So slash comes it'll go to app three.Slash app one also is part of slash star only, right?So it goes to app threeand slash app two, also part of slash star, right?It goes to app three nginx related target group.And in app three nginx related port,we don't have anything with contextapp one and then app two.So that's the reason,so from this respective app three nginx partwe are getting the 404 error like this.So that is what happened.So now let's go back to our visual studio codeand change the thing here, right?Roll back whatever we have implemented nowand come back and paste it back.So this is one thing for important discussion.What is that?In pah based at routing, order is very important.If you are going to use root contexttry to use it at the end of all rules.That is one thingand another important thing we need to discuss here.So with this we have completed what we have implementedRight, so roll back the change, it is completedand if you want you can clean up whatever you have created.So cleanup is very important.kubectl delete -f cube manifests.So why because it is creatinga application load balancer for usand application load balancer costs a lotif you don't clean up properly.So now we have successfully deleted all our app one,app two, app three nginx related deploymentsand nord port services and also our ingress CPR demo.So which means if you go back here and refreshso you should not find any ingress service.But another important thing we need to discuss here isinstead of root context, alsoif you want you can also enabledirectly that default backend.So you can comment this partor remove this part and uncomment this part.So default backend is nothing butanything with root context, it,or anything with any other context other thanslash app one and slash app two goes to the default backend,same as root context only, right?So you can also use default backend if you want to use it.So this completes the ingress context pathbased routing demo.In our next lecture we are going to focus onanother ingress concept.So I'll see you in the next lecture.Until then, bye bye.