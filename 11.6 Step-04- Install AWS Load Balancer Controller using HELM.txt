# 11.6 Step-04- Install AWS Load Balancer Controller using HELM

-: Welcome back.As part of step four, we are going to installthe AWS load balancer controller using Helm.So let's come back to our PowerPoint presentation.And if you see here already we have completed the partwhere we have created IAM policy, IAM roleand then service accountand then annotating that service account with IAM role.So now whatever we are seeing in this box,which is load balancer controller deployment,its SQL in secret and also it's a cluster IP service,web hook cluster IP service.So these things we are going to deploy nowand using Helm we are going to do that.So let's come back here.And if you don't have Helm installed on your local desktopso you can install the Helm using these commands, right?So brew install Helm, if it is macOS.And if you want to use different operating system.So you can see here using Helm with Amazon EKS.And you can see here if it is macOSuse this command and brew install Helm.And if you're using Windows,so you can say choco install KubernetesHelm using Chocolatey.Or if you're using Linux.So you can directly download the respect to binaryand then using gethelm.sh script, you can install it.So now let's come back here and install itusing brew install Helm because we are using the mac OShere, right?So I'll say brew installand then I will say Helm.And it will download the Helm and then install for us.So let's wait for it to install.So we can see here Helm was successfully installed.So maybe it is 3.8.0 version.So let's see what exactly it is.So I'll say Helm and then I'll say version.Andwe see that V 3.8.0 is installed for us, right?So now as part of step 0402install AWSload balancer controller.So before installing that using Helm,we need to understand about two important notes here.So the one important note here is,if you're deploying the load balancer controllerto Amazon EC2 notes that have restricted accessto Amazon Instance Metadata Service, which is IMDS service.Or if you are deploying these load balancer controllerto Fargate, then add the following flags.So using the Helm tell the packagethat you are using the region code so and soand then VPC ID where you are going to deploy it.So these two things it isasking us to set in our Helm command here.So if you are going to use with the unrestricted EC2 noteswhere you don't have access to IMDS serviceor if you're using Fargate.So instead of worrying about this note,so I made a standardization that in our commandwe are anyway going to use this, right?And next thing is if you're deployingto any region other than U.S. West twothen add the following flag to the command that you run,which is image repositoryreplacing account and region codewith the values for your region listed in Amazon EKSadd on container image addresses.So this is nothing,but if you are using in different regionsother than U.S. West two.So you need to provide your ECR endpointwhich is nothing, but Elastic Container Registry endpointfrom that respective region so that it can downloadAWS load balancer controllerfrom that respective region only.So example,if currently our EKS cluster is in U.S. East one.So if you see this get region codeand then account info from here.So let meopen this.Let me close this and you can see here,so these are the information.So for U.S.East one, this is the endpoint,right?So that is what we need to provide.So this is the account information you need to provide hereand region code you need to provide here.So this is the value you need to get.So this is the account and U.S. East one is the regioncode for U.S. East one location.So I have provided the link here for getting the region codeand account info.So get those information and provide the account ID.And then region code here and rest all is going to be samewhich is Amazon AWS load balancer controller amazonaws.com.So from here everything is going to be same for you also.So based on the region, whatever you're usingprovide that region here, which is U.S. East oneor U.S. East two or anything.And also account ID you can get from this respective linkwhatever is provided here.So U.S. East one.So this is the value.So we'll see that when we replace down there.Okay.So now the first thing is add the EKS charts repository.So Helm repo add this EKS charts repository.So let me copy this,and come back here and clear and add the command.So EKS already exists with the same configurationbecause I might have run earlier also, right?So it has addedand I'll run the command helm repo update.So it is trying to get the updatesfor Ingress, NGINX, EKS, Jetstack, stable, Bitnami,whatever is available in myexisting local repo, it is trying to updateall those things.So now let's come back here, and as part of this commandwe are going to install the AWS load balancer controller.So let's see this command breakdownand then understand in detail.So Helminstalland AWS load balancer controller.So from repo EKS/AWS load balancer controllerAnd this need to be installed on hyphenin kube-system namespace,and provide your set.These are the set commandswhere you'll provide the values for your respectivepackage, whatever you're going to deploy.So now set cluster name.So our cluster name is going to be EKS demo one,and service account create.So during the Helm install itself you want to createthe service account AWS load balancer controller.No.Why?Because it was already created earlierand then now we don't need to create itas part of previous steps we have already done that.So which means service account create is false.And what is the service account namewe have created which is AWS load balancer controller,which we have done as part of previous steps.So that is good.And region and VPC ID we need to set.So region code is U.S East one.So you can see here, right?And VPC ID.So we are going to get now where our AWS EKSrelated VPC created for this cluster.And image repository.As we said, we need to get that from the region codeand account ID in which your EKS cluster is createdwhich is 60240143452.So this is the account ID and U.S. East one is the region.So the same thing, you can find it here.So now let me take this complete commandand copy this command, and come back here.And here let's space this commandand ensure that all the things are same for us,EKS demo one is the cluster name and service second nameis AWS-load-balancer-: controller and region where our EKScluster is there is U.S. East one.So we only need to change the VPC ID.So this one also we have verified U.S. East oneis the region and account ID also match it.So now let's come back here and go to VPC.And in VPCgo to all that respective to EKS demo one related VPC.So VPCs and I should have default.And another one is EKS CTL EKS demo one cluster VPC.And this is theVPC ID.So let me copy thisor let me go here and copy from here and provide a VPC ID.So now let's copy this commandand run it, right.So let's come back hereand clear and run thecommand now.And once the command successfully completesso we are going to see the output as like this,name AWS load balancer controller and last deployed.And in which namespace it is deployed, status is deployed,revision is one and test suit none.And what it has installed is AWS load balancer controllerinstalled.So let's wait for it to complete.So we can see here our AWS load balancer controlleris successfully installed.So in our next lecture we are going to go ahead and verifywhat it has installed in a step-by-step manner.So I'll see you in the next lecture.Until then, bye-bye. Thank you.