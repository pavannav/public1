ript


0:01
Records.
7:42
Hey guys, uh welcome welcome back and uh let's continue with the next part. So
7:49
last couple of classes we have discussed uh multiple different services of AWS,
7:55
right? So today what I'm going to do uh now at least we know some of the
8:00
services of AWS. Now let me explain you today how to
8:07
uh you know use the services in the different way. What I mean by this right
8:13
and some of the classes I told you guys if AWS is a cloud public cloud platform
8:19
and if you want to you as a user if you want to interact with AWS there's
8:25
three different way we can interact with AWS services one with the web way is
8:31
called management console like graphical way other is called CLI and next is
8:38
called API okay developer use case to use case. Maybe if you are the IT
8:44
professional or admin guys, right? And what you want to do, you want to launch the EC2 instances, then you want to
8:51
launch EBS, then you want to connect the EBS to EC2 instances, some more thing.
8:56
And maybe in your project you guys want some kind of automation
9:02
rather you go manually and click on AWS and do the things manually.
9:08
Okay, you want automation means automatic instance launches EBS volume created they connected EFS storage
9:16
created they mounted everything you wanted uh want automatically and most of the project guys you guys may be using
9:23
selfcripting okay and maybe some of the project you
9:29
using Pearl or Python these kind of language so your current existing infrastructure you you're using some
9:35
kind of scripting tools okay and other setup is already done in
9:40
your corporate world for or maybe in some project with the scripting and you don't want to use any other tool for
9:47
automation. For example, you might have Terraform very powerful tool no doubt but you don't want to migrate to any
9:53
other tool. What are the current existing setup? You have your you have a current existing
9:59
expertise guys in Excel scripting or Python scripting something like this. So you want to leverage those professor
10:06
their knowledge and you want automation but with the scripting tool or python
10:11
scripting tool or pearl scripting to rather than you go for anible or maybe let's say terraform
10:17
okay in that context okay having the knowledge of CLI is the great choice
10:26
okay because if you know how to enter the AWS cloud okay with a command prompt
10:31
or with a commands I can Okay. And if you know the command of EC2, EBS, EFS,
10:37
mount, attach every command. Okay. So with the help of command, same command
10:42
you can put you in a scripting world, PowerShell, Cellcripting, Python, Pearl,
10:48
other Zobi maybe for example. Okay. And just by running the scripting scripting like a program file or running by
10:54
scripting your entire setup of the AWS to be automated. So typically guys there's a multiple
11:00
different way of automation. Automation means I don't want to manually go and click
11:07
sorry click in my screen and manually launch one instance second instance right I
11:14
want one program run and automatically then first login automatically uh thing
11:21
will launch for me okay that's called automation and for automation all right
11:27
either you can use automation tool like terapform or there's some automation tool already given in AWS
11:35
is a AWS internal tool that is called cloud formation.
11:40
Okay, for this they have their own language and v uh syntax to use or you
11:47
don't want to use terapform or cloud form right in this context you want to use scripting world and u from your
11:53
scripting you want to automate then right having the scripting that's the one thing you require extra but in the
12:00
scripting you to use as command and for as command you have a good knowledge of the AWS command line tools or as command
12:07
I guess so right now I'm going to show you this point very quickly how you can
12:14
use uh AWS cloud or configure AWS cloud in services with CLI. Okay, this what
12:21
the one of the topic for today CI discussion right and after this we will discuss about the AM role is the next
12:28
topic and we got the time we have something more to be discussed security group of you know VPC we will discuss
12:35
this point also what is VP what is security group and neckl we already discussed in my last class in very
12:40
detail but there's one small portion yet to be discussed we will discuss if we
12:46
got the time today but this is a very high level plan for an agenda for today and if you have some time we'll see
12:52
different see some more things okay so let's start with CLI one small
12:58
point to be add here okay if you want to do with API also I told you guys in some
13:03
of the classes API is normally done used by developers who create your web app and mobile apps okay so they are the one
13:11
who normally use the API with have HDK software developing kit depend upon the language to language you have very
13:18
famous um fade to use SDK in the market with the Python and they use a HDK
13:25
library called Boto3. So this is very famous and required
13:31
library in the market in a lot of real world projects but by chance we don't have any AWS course on boto3 official
13:39
course but this is a very common common requirement the market come up to me so soon guys I we will guys come with with
13:45
a specialized score just purely on boto3 where I explain from zero to all advance
13:50
how can you use boto3 to do automatic and automation and connect your
13:56
respective applications to the cloud. Okay. But this is a separate thing. I'm
14:01
just giving this information to you. Obviously, it's not a part of this program. We are into the AWS CSA. Okay.
14:07
Even though Python CLI is also not the part of this program, AWS CSA level training. But I believe at at
14:15
least the guy who know AWS at the level of CSA what we are doing right now as a official training at least the good
14:22
knowledge CLI I believe you should know. So I'm just taking this topic as extra topic or bonus topic for you. So you
14:28
should have some extra knowledge of the CM. So let's do this topic first.
14:38
And as I told you my initial classes also we are right now in the CSA level training but as and when
14:45
any topic that I feel it should be very useful in the real world at that level I
14:50
keep on adding for you and keep on explaining to you right so let's let's
14:56
uh discuss about CLI so simple point is rather than we go and loging to this
15:03
page okay I want to launch my instance or I want to my bucket
15:09
and whatever you have done till date you want to do without logging to this page from my respective operating system
15:17
command line Linux shell maxel or windows command prompt from here I want to do okay that would be the plan okay
15:25
so how we can do this from here from here how can I launch my EC2 instance okay from my laptop directly so for this
15:33
the process will be something like this this is the AWS cloud we Okay. Now in now onward I don't want to
15:41
directly log into AWS as a human being. Instead I will go and type my command in
15:46
the command line tool. Okay. And this command on my my behalf will go to AWS
15:54
cloud and connect to respective service and do the things. It means your command line tool has to
16:01
login. And I told you guys in my last class in IM class u apart from human
16:07
being we need login and password apart from human being if any other way CLI or
16:12
API if you want to connect you need to login I will obviously authenticate obviously but here we need access key
16:19
and the secret key okay and every username password or
16:26
access key secret key okay is be associated by one policies or permission
16:32
service. So whatever power you give that power you will get in the CLI. So what I mean
16:40
by this I'll show you in a minute. Okay. So this is the minimum requirement. Second thing is if we as human being go
16:48
and connect to AWS we normally use this kind of portal. So so I can say this portal is my way to
16:55
interact with the AWS. I can say this portal is my user tool or the client tool. Okay. when the command line okay
17:02
my my command line will go to AWS. So here the client client side tool or the
17:08
or the user tool is known as AWS. So we have one software available who give me
17:14
AWS command. AWS is one command that you have to install it first. So by default
17:20
it's not available in any of the operating system. You have to download and install it. So so I'm going to install first the
17:26
command line tool that's called AWS. So how to install? If you search for AWS
17:31
CLI download search this is the first link normally
17:37
you will get okay and in this link
17:44
in this link you will get the CLI software downloaded for your respective operating system. In our case in my case
17:51
I'm using Windows so I can download for the Windows. So this is not the link
17:58
here. There's a link right. So I would like to download for the Windows. Okay
18:03
guys, this software has been downloaded in my uh my laptop. Double click and install it. So that's all. Nothing very
18:10
technical. Just click click next. In my case, it is already installed in my laptop. So I don't want to go for this process. But download from here and and
18:18
install it. Okay, that's what the requirement. after install open your new
18:24
command prompt especially and after opening new command prompt you will see AWS command will come up okay guys this
18:32
is what they're talking about uh when while installing clicking next install force after this you will see as
18:40
command will come up before this you run this they will say command form but now this command means they are running this
18:46
command and they show you what are the options they have so they say something like this that means the command is
18:52
there and maybe you can use the version command if they support right they will tell you the current version of this
18:59
command okay if they have this option so guys technically the version has been
19:05
installed in my case is already installed but this is what the look like while installing while installing so
19:11
click click next and it will install for you I'm not installing this I'm just canceling this because I have already
19:16
instal done this okay so in my case I am using the one of the latest version of
19:23
AWS command line tool 2.7 is one of the latest version I'm using
19:29
Python this command is built on the top of Python that's what they're showing Python but technically we don't need any Python knowledge for this okay now
19:38
I'm going to give you a approach and if you understand this
19:43
approach then creating any of the command of any of the service won't be big deal for you okay so the the most
19:50
more thing is because there tons of service available and every service have hundreds of different command can be possible right but the approach that I'm
19:57
going to explain you okay if you understand the approach any kind of custom command of AWS if you want to
20:05
create any kind of projects you can able to build it so just try to understand guys more about the approach okay so
20:14
what I mean about this for example let's say I want to um I I want to
20:23
uh run AWS command and this command will go to AWS command is AWS actually let's
20:30
say I'm using the work called command if I run this command they go to the cloud as cloud and they do something now it is
20:38
it is you have to decide which service they have to interact
20:44
okay so technically let me write a note here let's say my plan is something like this I want my command line to go and
20:50
interact issue service because I want to launch AWS instances. So let's say this is our plan. I want to
20:56
interject the service called EC2 because there might be multiple server S3 or lambda and some other services
21:02
also. Okay, so ask this command. Okay, ask
21:08
this command. Do you have anything about EC2? Okay, so how can you ask? Maybe let's
21:14
see the help. Okay. Or maybe let's say the help
21:19
something like this. Okay. So they say when you run this help command only. So
21:25
they give a description they I'm the command line tool. Okay. And after my command you can type
21:32
the command and this command here means means your service name which service
21:39
you want to interact. Okay. So technically they're talking about talking about this. I am the main
21:46
command to connect AWS cloud. But after this you give me service name which service you want to connect AWS, S3, PBS
21:54
or whatever the service would be. Okay. So you guys if you see the mode they give you a lot of options here. Let me
22:00
press space bar. Space bar. Okay. A lot of option come up. Now here
22:07
guys they show you multiple available services. So all the current available service in
22:12
AWS they show you here. Okay, there a lot of services whatever they have. Let's say I'm right now interested in
22:19
EC2. Let me go to E. Okay, does we have EC2? EC2. Yes, we have here.
22:27
Okay, so they have this command available technically known as service.
22:32
So I have to use this service called EC2 mean I'm telling this AWS that I want to use this EC2 service. Let me come out
22:39
from the screen. It means now I know at least after AWS
22:44
if you want to connect to EC2 this is the service name or the command name we
22:49
have okay now in the EC2 guys okay what you want to do okay for example if you go to
22:57
H2 services tons of thing we can do we can go and launch the instance we can
23:02
see how many instance we are running uh right now right you want to list the the
23:07
instance describe the instance the detail can you show me all the instances you want to you want to delete the
23:14
instance you have to create a new instance you want to create key pair you want to create a EBS volume also sub
23:20
part of the services what you want to do so EC2 is a big service then these are
23:26
subservices we have EC2 is a big command and they have a subcomand for this and
23:32
that is reason if you see the help of AWS they always say in the help the
23:37
syntax of the command is you first write the command the service name then your sub command. Okay. And what all the
23:44
subcomand support? So again for this you say EC2 I would like to see your help.
23:50
In your help can you tell me all the sub command that you supported and that you support.
23:56
Okay. When you hit enter. So now in the EC2 they will describe this service about EC2.
24:03
Okay. And in EC2 okay these are the available commands they have.
24:09
Okay, for example, for example, let me take some of the basic example here by they have one command to attach
24:16
volume. So, EBS will EC2 has a capability to
24:22
attach. Obviously, EBS is a part of EC2 only. So, if you have any volume you want to attach, this is a command there.
24:29
Okay. Or for example, let me check one pretty straightforward
24:35
thing. For example, you want to create a image. So you want to create a amine this is the command we have. You want to
24:41
create a key value pair means a secret uh you know key private key this is the
24:46
command they have okay they want to create a net gateway for example this is the command we have net interface this
24:52
is the command we have okay so we have to create a route because VPC also come
24:58
under this also EC2 they might have some extra part of VPC also but this is the main under2 there almost all the EC2
25:06
data service going to come okay but if you just go if You want to delete
25:11
something you delete for example instance gateway intern gateway I can say or you want to delete key value pair
25:17
so all the options whatever the facilities you have and features you have everything come up you want to
25:23
instances you want to route you want to subnote snapshots but let's go some
25:28
somewhere here let's say I want to describe something okay so let's say I
25:33
want to describe um describe instances so you see this is the option called
25:40
instance status it will help us to describe the current status of the instances okay or you want
25:47
to describe all the instances or instance types how many instance types you have
25:52
okay so let's say I'm interested on describing the instances
25:57
okay so let me take this name and copy it so this command will help you in EC2
26:03
if you want to describe instance describe means these are instant details and every instance have a lot of things
26:08
there stop public IP private IP these are descriptions okay there's entire
26:14
description of the instance and because the keyword is called instances means if you have 10 instances every instance
26:19
they want to describe okay they have or maybe if you go down let's say lots of options they have
26:24
depend upon requirement okay let's say you want to um
26:30
list maybe snapshot recycle or maybe some recycle whatever options
26:35
they have or you want to modify something in running you want to modify volume okay so whatever guys we have
26:42
done almost all the facility we have okay even though I've seen sometime okay
26:48
graphical doesn't have some of the facility some of thing we might not able about to do from the graphical but from
26:53
a command line we can do everything right we can do lots of thing that might not be possible in graphical I'll show
27:00
you some of the example in future classes uh for example and for example if you want to do
27:07
multipart upload if you have big data to upload All right, S3 then there's no graphical way
27:12
available. You to go for command line only to do a multi- uh part upload or
27:18
maybe you want to copy data from one packet to other bucket. Okay. So maybe there might be no
27:24
graphical tool available as just maybe but we have command line tools available. Okay. So all the new features all the
27:33
features is available in the command line. Graphical have a huge feature no doubt but most the cases and some of the
27:39
use cases the graphical features and options doesn't work. So having good knowledge and command is very very
27:46
critical and sensitive in most of the areas whether you want to launch the instance run instance options we have stop the instances start the instances
27:53
all the options they have okay so there's the point let's
27:59
you know pick this one describe so this is the command completed so I know my
28:06
requirement what I'm looking for and according to requirement I just take the help and help will help me to get this
28:13
command. Now when I run this command, let me open new terminal, type the command here, try to run it. Now if I
28:20
run this command, this time this command will fail. Why is fail? Because
28:27
because from my laptop on somebody we have we are running the
28:32
command the command going to do something inside AWS say I'm not the enmous system I'm a secure one if you
28:40
are doing you first authenticate and because you're not the human being you can't provide login and password in this
28:46
example is a good example okay why we need access key secret because they are not the human being they can't type the
28:52
password right they are the one who going to run the command So they need a login and password but a login password
28:59
is for human being normally to type the password somewhere. Okay that is reason we have to provide a key to this guy. So
29:06
before I run this command this command fail and say this we don't have permissions and something fail because
29:11
of authentication this command will fail. So what I'm going to do right now before I run this
29:17
command let me first create access key secret key. how I guys told you in my last class also already. So let me go to
29:26
service called IM and in the IM what I'm going to do. Okay, we have to first
29:31
create identity that's called user that's also called principle.
29:36
So I'm going to create a new user that is called identity
29:42
or give the user a name. Let's say my CLI user just give some
29:51
name. Okay. Now your plan you want this user will be login from management console or both or only from CLM. Let's
30:00
say I want to only login from CL. I'll take this option.
30:06
Okay. Click next. Now guys again important point is if you
30:12
want to login from CLI or you login as a human web UI okay you need login a
30:18
password key to authenticate but after you go inside the system
30:23
okay what power you have what can you do that has been decided by your policies
30:29
permissions so guys my last I have discussed very detail about policy even though we have created a custom policy
30:36
inline policy everything we have done in the last classes but let me do one thing. Let me go and attach
30:42
a policy related to EC2. Let's say I want to give my the explain to you my IT
30:49
admin teams who writing script and say you guys know scripting learn some as commands con concepts and write a
30:57
scripts where you need a command but I'm only giving you power to run only EC2 commands that's all any other command
31:04
you might know but if you try to run you will not run not able to run because you don't have the power okay so how we
31:11
giving the power by attaching the policies is see I'm giving the full power by chance okay full access power
31:20
of AC2 review create and your access will be
31:27
created okay guys see they show you only once if you don't copy this one time
31:32
they won't show you again in this context you delete and create new one
31:37
means not the new user in this user we have options to go delete older access key and create a new
31:44
Okay, secret key. They won't show you again one more time. So either keep download this, keep a copy of with you or use it right now. Okay, now guess
31:52
this is access secret key. Now who going to use this one is going to use by your SDK or the CLA commands. In my case, the
31:59
CLA command AWS. So to provide this AWS CLA command this keys
32:06
how? So this first time setup we have to do. So when you're running the as command first time
32:14
that time you can run the command called as configure what this command will do okay this ask you access key and secret
32:21
key and they store somewhere in your local system okay why they store somewhere in the
32:27
local system because whenever you guys run the command okay every time command will
32:33
go to AWS okay every command is independent command this command is different I will say AWS S3 command is
32:40
different. Okay, maybe AWS EC2 command is different. So whenever you run the command, every time they authenticate
32:48
okay so I don't want to give password and key again and again. So what I want
32:53
to do here I want to store my access key in in my local system or my workspace
32:58
where I would have to run my scripts or run my commands same thing. Okay. So
33:03
this command help me and asking that just give me access key. So let me copy my access key from here.
33:12
Okay. The secret key. Let me copy secret from here. But before this let me stop sharing my screen. Let me show my secret
33:21
key. Copy the secret key. And I'm testing here.
33:26
Okay. and one space and then I will close my
33:34
screen of my IM and then I'll share my screen. I don't
33:40
want to expose my my priv my key here. Okay. So guys here I
33:47
type my access key. I type my secret key. Now they here asking about the default region means mostly whenever you
33:54
want to run any command which regions you want to use most you can change per command also but let's say I want to use
33:59
AP south one let's go Mumbai okay mean when you run the command mostly when you
34:06
run the command you also write here the region name something like this okay and you know mostly you're going to
34:12
use Mumbai only so don't type again again to save your script time also or command time also okay so we make make
34:19
it uh so you make it um you know default
34:24
okay and second thing guys they asking the output format so when you run the command most of the command guys they
34:30
give the output for describing the output so you want the output in the tabular format or in the JSON format
34:37
okay so multiple formats they support as a final output mostly we are some most
34:42
of the cases we all looking for in the JSON format because this output normally used by some other programs and Most of
34:49
the programs normally use JSON data to process. Okay. Otherwise, you can use text also or table format also to uh see
34:58
the output. That's all. So guys, my this command save my uh secret key and others in my
35:06
local system. Okay. Where they stored if you're curious to know. So in your current home directory of your recipe
35:14
operating system, they create a folder called AWS. inside this folder they copy
35:19
in this files. Okay. So in this file they contain your login
35:25
and password in the clear text. Anybody want to access your file they can get your access secret key and they can
35:31
they will get your company access your account. So just giving this information this is what the place they store there.
35:37
So to remove or to again copy paste or delete you can just go here and do it.
35:43
Okay. When I say in my system now my data is copied. Okay. Now if I run this
35:49
command this one time setup. Now if I run this command what this command will do they
35:54
will go and first connect to AWS. They login with my access key secret key from this place. They always pick from here.
36:00
They know by default location and then they asked to contact this service and ask this guy to do this sub command is
36:08
describe the resources. Okay. See guys here everything come up. So they say you have a lot of instance
36:14
running. Okay. One of the instance running with this key pair. This is the instance ID 1 2 D2. You know this one.
36:23
So we go to this one. So so one
36:31
12 B2. Okay. And this point in time. Okay. This instance is using this T2
36:36
micro. T2 micro running in one data center somewhere right here. one data center. This instance is right now
36:43
stopped. See the state of this instance is stopped right now. Okay. And this
36:49
instance has private IP 243 243. So entire information of this instance this
36:55
good description come over here. Okay. And this format is called JSON format.
37:02
Okay. And anybody who know how to parse the JSON lot of JSON parser
37:09
available in the market. So with the help of JSON parser what can you do? You can say I am only interested to know the
37:15
state of my instance. So you can ask J only give you this information and the
37:21
name. Okay. So multiple JSON parser for Windows Linux available. This data you
37:26
can dump there and that parser will retrieve only that part or maybe you can say just show me all the instance that
37:32
are stored. Okay. Some of the thing you can do with a command also but some of the thing you
37:39
have to use some third party tool like JSON parser they will do the thing for you. Right now I'm not showing to you
37:44
but yeah whenever we need I will definitely show how to use JSON parser but right now we don't need this. So
37:50
these are the details they show you about all the instances. Okay. But let's say my requirement is to
37:58
launch a new instance. Okay. So guys again if you want to run any command you should know the process
38:06
first thing you should know I would like to connect to AWS and AWS I want to connect to EC2 then what you want to do
38:12
okay you want to launch the instances so check there's any command available for launching the instances okay so let's
38:20
say the command maybe run instances how I know by looking at the command we can
38:26
figure out or you can search at the document of Google which is the option
38:31
to um to use to launch the instance. So by doing this research let's say this is
38:37
a command to use or maybe you can use this command and say this is a command
38:42
we have and I don't know what this command will do you can tell with help. So they talk about this command what
38:48
this command will do for you. So in the help they say this is the command you can use to launch the instances using
38:55
some AMI obviously. Okay that's what they're talking about.
39:01
Okay. But but guys, if you want launch the instances, okay, you should know the actual concept, right? The concept is
39:07
for launching the instances, we need a a okay, we need the AMI. This is the
39:13
minimum requirement we have. Okay. We need some AMI. Okay. And for launching the instances,
39:20
we have to say type. So I need my instance type.
39:26
So let's say instance directory to micro. Okay. Or for launching the instances you
39:31
have to say count how many instances you want. You need a counter. For launching instances, you need network name, VPC
39:38
name. Or against subnet name. Your subet is always the part of VPC. So let's say I want to launch my instance in this VPC
39:46
for this subnet. So let's say subnet name is what the name would be. If I can copy from here,
39:52
let's say subnet 04 something. Okay. So I know my subnet ID. Let's say 04 or
39:59
something something. Okay. Because what we launch is some of the VC and some of the subnet.
40:05
Okay. And let's have a VPC name also. Let's say buy VPC something.
40:13
Okay. Then storage. So you want to add a storage or if you want to go for
40:20
default. So typically some of the default setting you don't want to change anything. So you are not changing here.
40:25
So I'm not practicing. So technically what I'm doing here whatever I wanted to do I'm collecting this information you
40:31
want to set the tag no let's say you want a security group or you want to
40:37
select the preced security group for example there's one security group already we have okay so let's say this
40:42
is security group we have I want to use this so I want to use a security group with this name
40:50
okay and then launch
40:57
And while launching uh you need a key which key you want to use so let's say
41:02
as training some key I want to use a key let's call AWS some key I want to use
41:09
so guys this is my requirement you know so right now what I have done I have collected my requirement now if you know
41:16
your requirement and the steps okay now converting this requirement into the
41:21
command is not big How now we know the requirements. So I'll go to my
41:28
help or maybe online document maybe of run instances enter the help I can ask
41:35
to this help okay that can you tell me
41:40
okay the I want to do use this so do you have any syntax how can I use this
41:46
normally these are known as synopsis can you tell me the synopsis for this so
41:52
they say if you want to launch the instances then image id you can give the
41:58
value obviously your choice but the keyword that you use is this one so the image AMI name will be anything
42:05
but the keyword that I understand is this one there's a keyword you to use then you can give your value what ami ID
42:12
you want to use if you want instance type you can give any instance type small something like this but the
42:18
keyword that I supported from which I understand or my command understand is
42:23
this Okay, for example, the security group
42:29
ids. So, security group ID you have to give this one. This is what security
42:34
group ID. Okay. Now, you want to give security group ID or name. Okay. Or security
42:42
group name or the ID. In my case, I have using the security group. Okay. But you can get the ID also.
42:50
Okay. Security groups defense obviously you guys know but let me very quickly check. So if I go to my
42:59
my security group so these are security group we have
43:04
okay and these are the ids and the group name. Okay but again one more thing guys
43:10
security group is a part of VPC. So first you plan which VPC you want to collect.
43:16
So let's if you see here does they have any options for VPC?
43:21
Does there any option for VPC? SS no but does they have any options for
43:27
uh what I say
43:32
subnets subnet they have the option but I don't think so they have the option for VPC.
43:38
Why? Because subnet is a part of VPC. Instance guys always launch a subnet.
43:44
They never launch a VPC. VPC is just a way a virtual layer. Okay. VPC is just a
43:50
way to tell that these are my P. Okay. But finally instance will launch in subet only and but in the other way
43:57
also if you say tell the subnet auto VPC name autoat come out. Okay. So that is
44:02
reason they don't ask your VPC they only asking you for the subnet ID.
44:08
Okay. So VPC ID there's no required and there's no meaning also to give the VPC. So let me remove this.
44:15
If you submit ID automatically VPC will come up and what submit ID you want to use. So for this we can get our submit
44:23
ID from the VPC page. Okay. Even though you don't have to go
44:29
to this page also we can list or describe submit ID with the command lines.
44:35
Okay. So for command line we can get it but let me get from here. Okay. So let's
44:40
say my plan is to launch my instance in this public subnet A and this sub ID we
44:46
have. So let me copy this sub ID. Okay. So this is sub ID
44:54
now because this subnet is a part of this VPC.
45:02
Okay. And and guys VPC is called my LWV VPC
45:09
and even though if you search from here my LW VPC
45:16
okay and security guys I explained in my last class security is always a part of VPC.
45:23
So inside this VPC these are security group available. So inside the VPC
45:29
called you know this one I selected VPC my VC these are the subnet security
45:36
group available. Okay. So, which one you want to use for this? Either you can give the security
45:42
group name and group ID. That's what they're talking about. You give this group name or group ID. Mostly guys, I
45:49
recommend to use group ID is look very you can use anything but sometime we can
45:55
change there's a possible sometime to give the change the name also sometime. Okay. So, ID is always safe to use. This
46:02
has been given by its and unique you don't change mostly you can't change.
46:07
Okay. So I would have to use a group ID. So security group ID and for this the
46:13
keyword is this one. How I know from the help they will tell the
46:21
keyword for this. Okay. So this what we have
46:28
plus if you which key you want to use key means the private key. So from AD
46:33
portal we can get the private key or from the command line also we can retrieve all the private key names and
46:40
then we can pick one. Okay. And plus we going because they
46:46
give multiple private key names. Okay. So there you can use JSON parser.
46:53
So almost all the scripting tool we can use JSON parser and what they do they will pick one name and this name we can
46:59
store somewhere in the variable and we can pass the variable value over here. So it will be more automated
47:05
but I'm not doing I'm picking right now this information manually but those who know scripting
47:12
Python or self scripting or something like this they can put this command there. For example, right now my Python
47:18
training is going on. Uh most of guys maybe you guys play part of it. It's a is a basic to advanced training
47:24
completely free. Highly recommended. Lots of information I'm sharing to you.
47:29
So those who are the part of this Python training just try to run this command with the Python. So you create a command
47:37
and this command can be run by Python. So thing will be automated and tons of command you created step by step. Every
47:42
command is doing one thing for one thing for you. This command will launch the E2 instance. Second command launch EBS.
47:49
Third command be EBS to EC2. Right? All the command put in one file or program file of Python or maybe set script to
47:55
PowerShell. It it become a complete automation. Okay. And for the key we have the option
48:02
command line option we have is this one. The option would be somewhere key or
48:07
something like this where you can see this option called key name.
48:14
So the key name is the option we have count. They might have the option here I
48:21
believe. Yeah. Count. So we don't have to memorize this. We'll
48:27
see. Finally the command become very big. Okay. We don't have to memorize and you
48:32
also don't have to memorize. Okay. Because in some case I have seen the command is like a one page command for
48:37
one thing. If you know the step, you know what you are looking for then then these
48:44
information just go and pick pick the options and it will be your final command. So this will be guys final command and command we always write in
48:51
one single line so that put everything in one single line.
48:56
Okay with the space also one space at least.
49:06
Okay. So from here till here we have one single command.
49:11
Okay. Now if I type this command here
49:17
this one command we have okay and that's all
49:23
instance name is not required will always give a unique ID but name is not
49:29
possible. We can give the tags. Okay. Okay. So we can specify tag here
49:34
with the value and they and interesting thing is guys here they give a lot of examples sometime also in the health
49:40
page lot of description what they do all the keyword what type they support what
49:46
every keyword do what value they support a string okay what are the different
49:51
options possible okay so mostly guys they give you very sophisticated
49:57
detail example for example you don't have to go to portal from also
50:03
help you can find out the right and I'm using the space bar
50:09
okay or maybe page down is not work is work here with the more keyword space
50:15
bar is one or enter will take one line per line as space bar take per pages so
50:21
these are huge information they have and mostly in the document last page okay
50:28
they give you some example commands also Okay, with some use cases big big
50:34
document there. Okay, they don't have example maybe they might have they give you details. It's a good document they
50:41
have available in your local system. Right? I believe this command is is is
50:46
update and write right now in the Mumbai region guys. If I if I show you about my
50:53
inst our instances okay five instance total we have and
51:00
out of five one is running this one. Let me delete I don't need this.
51:08
So I have no instance running right now. But when I run this command
51:14
okay u you will see something fail.
51:19
Why? Because I haven't given any space here. Obviously this this failed. So
51:25
after this space so there from a command line your
51:30
instance has been launched and quickly they give the entire output of the instance as launch they give the id. ID
51:36
they gave is called BD7D is not there BD7D but if I refresh
51:42
you'll see one more instance come up BD70D they're pending still mean they're
51:47
launching right now okay and they're launching the way I asked them to launch they launch in one way because I launch
51:53
this guy and this per subnate sub is the one who decide where to launch and IP
51:59
204 they give 24 they give so they keep give all the information very quickly in my script pending instead but in
52:06
sometimes it will launch. Okay, let's say this is it will come up about this instance.
52:13
Okay, so guys this is the idea how we can use the command line tool. So more
52:20
you have the knowledge in AWS services simply you can guys by this approach you can create your own personal
52:28
commands. So I'm sharing this entire command as it is in your
52:35
Google Drive document. Okay. Now if you want to now stop the instance to in termit the instances same
52:42
way I can ask AWS AC2 I want to easy to stop instances.
52:50
Okay. Can it help this command is there? Yes they stop the instances. What is the
52:55
syntax they support? You to just give the instance id to tell me to stop.
53:01
That's all. Or you can list multiple style. You can also give to to stop.
53:07
Okay. And here also same time you can change your input up also. You want to give take the output in a screen output
53:14
finally in JSON format format. Okay. Those things also you can do here. But
53:19
let me go for by default. So here you can give your instance ID
53:26
and right now guys this instance is running but if I want to stop this instance I will copy this instance ID
53:33
obviously you don't now you don't have to take from here you will run the describe command from there you take
53:39
either manually or you can use JSON parser or some scripting tool and then put here by some variables
53:46
okay and they rest for you okay so now this time was was running initially but
53:52
current state means now they stopping so you see guys now this things is stopping
53:58
we can terminate other things also we can okay so guys based on this knowledge
54:04
I'm highly recommending you whatever services you know till now let's say VPC you want to create just try to create a
54:10
command for the VPC okay and all the command put in one document
54:18
okay so if I take this command put in the document.
54:27
Second command, third command. Then this document guys is not a scripting language or script. When you run the
54:33
dash document by some language or their syntax for example this maybe this this
54:40
command is running directly on the cell scripting or cell they will directly run for you. Okay. Or with the batch script
54:45
windows they run for you. Okay. So all the all things you want to perform it just connect the command run this
54:52
document with the respective scripting tool your entire setup will be automated.
54:59
Okay. So there is a one uh point. So guys this
55:04
is one thing otherwise other services same approach you can use. For example if you want to use S3 so again ask AWS
55:11
do you have S3 thing? Check the help. They say yes we support S3. This is what
55:17
we do. Okay. And uh what I want to do S3, these are the options we have to
55:23
copy something, move something, okay, list something,
55:30
all the option sync options we have. We'll see guys some of the examples in some future classes. But these are the
55:35
very interesting examples they have here. Okay. What to exclude while copying, copy from here to here, local
55:42
to upload, upload to download. Okay. all the options they have multiple examples also they give you okay let's say I want
55:50
to do only list right now okay let's say S3 I want to do only list
55:56
in the list can tell me help what is the syntax you support okay so they say you can list directly
56:03
or you can see the summary you can recursive list you my multi folders are
56:10
folder you can use recursive list to do it okay so in my case if I to AWS S3
56:18
list all the buckets. So in this case guys this command will fail
56:24
access denied. Okay why because right now I have given
56:29
my uh my local system C access key secret key and this access key secret key guys has been limited power I show
56:36
you with EC2 instances. So when I create this user that has
56:42
access key secret key attached. So this user has this
56:49
this uh access key secret key you can check from here
56:54
that I attached okay secret you can see here attached but this user whatever
57:01
method you login with this user okay have a limited permissions is to access
57:06
only okay but how to add extra power you guys know we can go ahead and say I would
57:12
like to do something on S3 S3 okay in S3 let's say I want to do only
57:19
read only access give the power give the power and accordingly they perform one more power
57:25
you have or one more policy you attached now this time you run they will run it for you
57:32
it takes some second to update but now we can see all the bucket list I have in my account
57:39
now in this bucket if you're on the recursive option okay you can see the details of what
57:44
require
57:52
this maybe or maybe there's no relevancy of recursive maybe normally in the folder we write recursive that's what we
57:58
do but what they do we can go and check in the document for the what recursive
58:04
they do for okay so uh so if you normally work on the
58:10
specific activity that's what but here I use a bucket There's no meaning of this. Okay. I want to give you multiple
58:17
examples. Multiple example if you want to do particular you know
58:23
folder the list you can give the folder name. So typically you write this this
58:30
symbol. Okay. So guys anything if you write in S3
58:35
so let's say I have this this list we have. So if you want to only do a list
58:42
in this particular bucket in this particular bucket
58:48
sorry in this particular bucket if you write in this way they show to you but
58:54
typically guys in some of the cases okay to tell this is the bucket name so S3 has their own URL and this URL the
59:01
protocol is S3 you know HTTP we have same thing we have S3 that's normally
59:06
means that we are using S3 is a protocol and what do you write after this is a bucket. So this is a perfect syntax. In
59:13
some of the cases we don't write it won't work in this bucket they will present you what all the data you have
59:20
that's what the command is okay so at least right otherwise if you want to
59:27
copy something download something so these are the options they have I'll show you some of the example of S3
59:33
especially in upcoming classes right now I want to have to move to the next path
59:38
otherwise idea is very simple go to help of every options. Okay. And
59:45
in the help of every options just check what they do or do the reverse way. Uh
59:52
just go and um u you know enter and see I want to download something. What
59:57
option they have? They will send you a CPU command. Okay. Where you can give the URL to
1:00:03
download upload whatever you want to do. And because you want to when you upload you normally set the you know SSC, C,
1:00:11
SSK, CMS all the things I show you already. You can check the storage class right all things you can do plus they
1:00:18
give the options also. Okay. So these are things but I have
1:00:24
some example in my mind not relevant for today's class but yeah in upcoming class I'll tell you but this is a very common
1:00:30
example. You want to copy anything from local file to S3 this is the command you can use. So this file from a local file
1:00:35
laptop will upload to S3 in this bucket.
1:00:41
Okay. And more options they have options they have expired time to to one
1:00:49
bucket. Right. So any requirement if you have if you copy object from one bucket
1:00:54
to other bucket this option we can uh right I think somebody asking me also in some of my classes. So maybe graphically
1:01:02
you don't have the option to copy one file to other file in the bucket graphically.
1:01:08
Okay. But the command line option. So this file from this bucket can move to this bucket. Same bucket or the bucket
1:01:14
whatever you want to write. Okay. Or other options also we have. I highly
1:01:20
recommend guys this is a very fantastic document in both of use cases especially in S3. Okay. These
1:01:26
use cases they give the use case here and they give the answer also. and
1:01:31
sometimes very much useful. Okay, so that's all guys about the command
1:01:38
line. Again I told you guys command line is not a part of your program of CSA but
1:01:44
if you have this much knowledge okay this much knowledge is actually is
1:01:50
almost enough to automate something and put in the scripting knowledge okay
1:01:56
otherwise uh take this document use the approach that I I try to explain you
1:02:02
here is build your command and put in the script or directly run the commands that what
1:02:07
you Okay. So that's all guys about the uh CLI.
1:02:13
Okay. And try to solve as much as things with the CLI. You become more comfortable about it.
1:02:19
Okay. So let's move to our next point what we have planned for today. So one of point
1:02:26
I was planning for C has been done. Let's talk a little bit about roles. Okay. So what is roles? So this is about
1:02:33
IM rule. What is IM guys? I already discussed to you. Okay. Now
1:02:41
if you talk about AWS AWS cloud typically we not actually accessing the
1:02:47
cloud. We actually accessing particular services on the cloud always.
1:02:54
Okay. So if I say I'm using cloud doesn't makes much sense but I say I am using EC2 services or S3 services or SNS
1:03:02
services that's what we say. Okay. Now it means there's a multiple services we
1:03:09
have on the cloud. Multiple services let's say we have one service called EC2 and let's say we have
1:03:15
one service called S3. Okay. Now point here is who is going to
1:03:21
use the services. Okay. If we as a user is going to use
1:03:26
the services. Now we have three different method to use the service at different point. this called interfaces
1:03:33
means CLI, CLI, web UI, API.
1:03:39
So for we as a client or as a user, we have three different interfaces
1:03:44
to integrant and use case you can do it. Let's say I
1:03:51
want to intent with the service. So I need two things. One I need to
1:03:58
authenticate first with username and password or access key secret key depend what method you use and second you have
1:04:05
to you should have policy after you login successfully what power
1:04:11
you have what permissions you have accordingly you can use that services so
1:04:16
in the permission you don't have issue you can't use it even though you log in okay so login name password or access
1:04:25
secret key this authentication and the policy.
1:04:30
Okay, this combination is actually meant for the end users. We are the end users.
1:04:36
Whatever method we use, there's a different point. Okay, so this is for the users.
1:04:43
But there's some cases where where AWS one service want to
1:04:49
interact with other services. Okay. So for example in this case the
1:04:56
user is a client and EC2 is let's say one server
1:05:01
okay but in this context if one service want to enter other services so in this case this is a client and S3 may be like
1:05:09
a work as a server okay they are both the services but the
1:05:14
internal services and technically for as perspective EC2 is managed by different team S3 may have a different team may
1:05:20
put in the different different hardware systems they have their own program, own security way to manage. Right? So my
1:05:29
point here is there are lot of use cases and almost every use cases I can say.
1:05:34
Okay. This is very common that one service want to interact with other services. Okay. But if anybody come in
1:05:41
S3 every service has the one guard before it like a security guard. Security guard
1:05:47
not a firewall but like guard for authentication and the and the
1:05:53
authorization. Authorization means are you authorized or not to use
1:05:59
okay means what power and permissions you have policies you have.
1:06:04
Okay. So, so now point is if anybody come to come to S3
1:06:12
S3 auto check you are coming from the outside world from the internet so we
1:06:19
treat you as a user okay as a user then we check your login
1:06:24
password or access security key to check and permissions also further from IM
1:06:29
what power you have but if you're not coming from internet world mostly it means you're coming from internal
1:06:35
Internet world means from internally of my uh AWS from one of the services in
1:06:41
this case for us also you are client I have to check your authenticity author authentication and authorization but how
1:06:49
okay here you don't need any usern but here you don't need any kind of
1:06:55
access any kind of key access key secret key okay to authenticate you we have to use
1:07:02
a concept called rules So guys in this situation when one
1:07:08
service want to use other services we have to provide a role
1:07:13
with the help of role us but inside one role
1:07:19
two things will be done with the help of role they will be authenticated mean like login password and with the help of
1:07:26
role we can give the power means policy and permissions.
1:07:34
Okay. So technically it is something like this. Something like this. If EC2
1:07:43
want to connect to S3. Okay. So what plan you have? What EC2
1:07:49
can do with S3? In which bucket? Let's can hold for a second please.
1:08:17
Okay. So, EC2 will do something with S3. But what
1:08:24
you want to do, they have a read only power. they can read only they have RW power which bucket they can access which
1:08:31
which not obviously there permissions sorry policies
1:08:36
okay so what can we do we can create one separate role okay something like this the EC2 want to
1:08:44
do something with S3 so this is my source system they want to service they want to do this with this
1:08:50
destination services and what they want to do they want to do only read only accessible example
1:08:58
read on access. Okay. So this is one kind of plan we can do and this plan is known rule.
1:09:06
So we can get a role. Okay. And after care this role and plan okay because there might be multiple
1:09:12
instances one is two issue three four which EC2 instance you want to give this
1:09:18
power. So let's say I want to give this power to third number instances. So I can
1:09:24
provide this role to the instance number third. Okay, providing means attaching. We have to attach this role to instance
1:09:31
number third. So only this instance has a capability
1:09:37
okay to do that power with S3. So whatever you write in the power that can
1:09:43
they do with S3 right now without the role if you're doing something with S3 it won't allow. For example, let me tell
1:09:50
you very quickly. For example, in my AWS, one instance is running right now.
1:09:56
Nothing is is running. Let me very quickly let me start this
1:10:01
or maybe let me use different one. So we have the command already with us. So
1:10:08
copy the command. So while we launch
1:10:15
so by this command now as it's been very much automated, we will save a lot of time. Now one click instance will be
1:10:22
launched. Okay. Now what I'm going to tell you guys this is the one AWS instance in EC2
1:10:32
and anything you run in AWS is like a resource my service called EC2. So this is one resource we have.
1:10:39
Okay. And this resource is want to access a different resource
1:10:45
for example S3 for different service. So S3 service but
1:10:53
one of the bucket in S3 is one resource for example. So this this particular
1:10:59
instance okay want to access this particular bucket.
1:11:05
Okay. So how they can um do obviously right now this instance is operating system
1:11:14
and they want to access. So if they want to access guys again they're not human being guys. So human being is is will
1:11:21
normally we have a management console. If this EC2 instance want to access
1:11:27
okay want to access S3 they have only two choice. One they can access with CLI
1:11:33
command line and then other way is called API. Maybe in this instance we are running with some NodeJS program or
1:11:40
Python or some other language Java. So the code will go
1:11:45
access the S3 or we are the admin we run the command lines we are the one who access the S3
1:11:52
okay normally we don't use management cut source here we can use if you have
1:11:57
issue to windows for example at the graphical screen or any OS and graphical scale from there we can access the different point but mostly we use CL
1:12:04
APIs okay so right now let's say this instance right now is a Linux instance
1:12:10
this is not graphical instance we can't launch graphical system we have command line. So we have two choices to connect
1:12:16
either with the API or with the help of uh commands.
1:12:26
So guys this instance is not running because my network settings or maybe my firewall is not right. So I don't want
1:12:33
to invest right now time here but in which very quickly if we can fix out this point. So my security
1:12:42
firewalls. So what a firewall artist guys have no
1:12:48
rule by chance. Let me add all
1:12:53
traffic fastly quickly to do the things.
1:12:59
I've been connected. Let me refresh.
1:13:05
Okay. So this is a screen. Now from here either a python code run some boto3 and
1:13:10
connect it there's a different point or you can use command line okay and for the command you need a command that's
1:13:17
may see a command is there or not py chart guys command is available so if
1:13:22
you launch any AWS instance they give you pre-install as command but if you use redhead or other instance you going
1:13:28
to you have to install it by download it from some internet or by some yum command something like this okay so we
1:13:35
have this command now from this command let's say I am in EC2 if I want to
1:13:42
connect with S3 it won't allow okay and they say if you want to connect
1:13:50
you have to first give me access key secret key by this command now again let
1:13:55
me add one more point here okay one more point here EC2 is a instance
1:14:02
okay by chance instance is like a operating system and because the operating system has a command command
1:14:07
line. Okay. And because the command line, we can use this AWS configure command.
1:14:16
Configure command. Okay. To type our keys, access the secret key.
1:14:23
Now after this OS will get the access the secret key. Okay. By this this OS we can easily
1:14:29
connect to any other services. So I can use as config command put max
1:14:34
security in the connect. So this also one of the way that your instance or one
1:14:41
service of EC2 connected to S3 but by in the EC2 world will work. But
1:14:46
let's say we have some other services. Let's say S3 want to connect to uh maybe say VBC or vice versa. VPC
1:14:55
want to connect to S3. Okay. In VPC guys there is no way to go
1:15:00
to CLI of the VPC to ad config command. There's no way to attach the access key
1:15:06
and secret key or oh yeah secret key okay so in this case if VBC want to
1:15:12
connect S3 we can't go for this way this we can do in in OS world that's a
1:15:18
different point but we can't do this. So this also one example if you want VPC
1:15:23
have a capt to connect to S3 by some reason maybe VPC have some logs and I
1:15:28
want logs to be stored on S3. So this one service want to connect the services it only work if you have a roles and
1:15:35
this role we have to give to this guy of role VPC can authenticate S3 and with
1:15:41
the role VPC can have some power on the S3. Okay. So guys you can think of the role
1:15:48
in this way. Otherwise if somebody work on D command line they they say why we
1:15:53
can use this way also. We can use it is only limited to this instances by chance but mostly every service has integ
1:16:14
right. It's very critical thing to have. So let's say this command is not available. So so and so I want to do
1:16:23
this thing with the role. What I want I want when I run this command they will get the output of the they can connect
1:16:30
authenticate and do the things. Okay. How we can do this?
1:16:35
For this we have to get the role. Okay. This is what I wanted. our EC2 services
1:16:43
will connect to S3. So for this we have to create a role
1:16:49
obviously IM. So guys you want to create a user of the role. User is for normal human being for us.
1:16:56
Okay. A role is one for one service to want to connect other services.
1:17:02
Okay. I'm going to create a role. Okay. Create a role. These are role I already
1:17:07
have in my system. Okay. And you want to create a role for
1:17:14
AWS services. Yes. Where one service want to other services. We have some more thing to be done. Okay. These are
1:17:20
the mainly guys fed trust policy web and it is very very powerful services.
1:17:27
Lot of enterprises corporate world we have to mostly use this setup.
1:17:32
Okay. I'll give very quick information about SL SSO web identity
1:17:38
a very high level overview maybe in next class or today's class okay but this is a very advanced topic come in the
1:17:45
security so when you guys you go forget about security training that this topic would normally cover in very detail one
1:17:51
of my some of my favorite topic very very powerfully powerful use cases we can solve right but right now I'm going
1:17:58
for this point okay now here in the use cases. Use case
1:18:05
means if you have requirement that a EC2 want to connect with a S3.
1:18:12
So what you plan your plan EC2 want to connect to S3 or EC2 want to connect to
1:18:19
let's say VPC or if you want to say let's say do something on lambda some we
1:18:25
already discuss in the future. Okay. So you select your
1:18:31
common use case by this say common use case but typically the use case here means your source service which one you
1:18:38
want to or your client service. So let's say my mark is other service you can select also from
1:18:44
here all the services come up here but because role is very much commonly used
1:18:50
in is lambda that's what they give you very quick option to select otherwise other services let's say if backup
1:18:58
service you want to connect with with s3 so backup you can select then we can after next we can select S3 but in my
1:19:05
case e2 is the one I want to select Okay, I want to EC2
1:19:13
click next. Okay, now what I want to do this EC2
1:19:19
want to do something where on S3 so we have to give a power to EC2 and we give
1:19:24
the power guys always with the policies. What is policy? We discussed in my last class in very detail already.
1:19:31
Okay. So we can create our own custom policy you guys know or you can use pre-created policy. Let me use S3.
1:19:38
Enter. So these are pre-created policies we have. Let me use the full access policy of S3.
1:19:45
So a specific comment we can create a custom also that you guys know. Okay. So
1:19:50
policy concept is the same what we normally discuss already in the in the
1:19:56
normal uh let's say this is allow EC2 S3.
1:20:06
Okay. All so this is a role name we can give a role name properly describe it and
1:20:13
that's all okay and uh that's all guys this this is
1:20:19
what guys behind this they have done okay so let me explain you when you guys
1:20:25
create this role this is what guys behind the scene they create one kind of
1:20:31
role JSON code so typically let me very quickly Okay, this is what I create a
1:20:37
role. This role will allow EC2 with S3. Okay, so you see guys what they do. They
1:20:44
allow S3 full access. Okay, but but who is accessing this?
1:20:52
EC2. So typically guys, you know, till date till date we as a user, let's say
1:20:58
women as a user, okay, is going to access S3.
1:21:04
So women is called identity user or IM user typically known as principle
1:21:10
but in our case there's no user actually we have instead of user EC2 is the one who is going to connect to S3 so that is
1:21:18
the reason they're showing you here the principle is not normal user is not a IM user they are one kind of service known
1:21:24
as HT that is a meaning of this line and EC is going to allow
1:21:30
somewhere where in S3 This is what guys they are going to do.
1:21:38
Okay. And this is one interesting concept. I will give you again some idea in this training but in very detailed
1:21:44
discussion with practical normally cover in the security level of training. Okay. It's called assume rule STS.
1:21:52
So I'm right now I'm skipping this part. I have some small discuss on the STS or
1:21:58
assume rule we will discuss. So after discuss you understand this line what meaning of this but otherwise if you
1:22:05
don't understand this code doesn't matter this is what the role is so when you create automatically they create for
1:22:10
you you don't have to worry about it but I'm trying to explain you what this mill lines means and this will we'll skip
1:22:17
right now but we'll discuss it sometime in this training only okay and let me create the role
1:22:25
so role has been created okay role has been created
1:22:30
Like this we can create multiple roles but you have to give the role you know
1:22:35
you know for the example human being we can hundreds of accounts
1:22:41
okay but I for I as a human being if I don't know my login password how I login so you have
1:22:47
to provide me and give me the login and password similarly role has been created
1:22:52
you to give this role attached to the instances or give this login and password to the instance then only they
1:22:58
can use Right. So role has been created this one. Okay. But this role is not yet
1:23:06
been given to any of the instances. Okay. So after I give then only they can
1:23:13
they can use it. So uh let me show you how to give.
1:23:19
Pretty simple. If you go to EC2 instances, this is what the instance is running right now.
1:23:26
Okay. This system guys don't have power till now on S3.
1:23:32
Let me refresh this page. AWS S3
1:23:40
AWS S3. Yes, no have power. But how to give this
1:23:46
power? So in this instance there's option here on the actions in the
1:23:51
security and do you want to modify the IM role? So do you want to give this uh
1:23:57
uh instance or one of the service or resource of EC2 some power? I say yes.
1:24:02
Which one multiple we have? But this is what I created right now.
1:24:08
I want to test this part. Okay. Now this instance
1:24:14
has given one extra power. So from this instance they can connect some other
1:24:21
instance. Okay. What power they have? This power they have. What they can do? They can
1:24:29
they can do this one.
1:24:34
Okay. This one full access power. Okay. So see here guys last time they failed
1:24:40
but this time if I run this command running fantastic right? Fantastic.
1:24:45
They're running behind the scene. Okay. So that is all guys behind the
1:24:51
scene means that is what the role access. So without giving access secret key though guys if you see in the home
1:24:57
directory they don't have this folder also means they don't have an access key secret key without having the access key
1:25:04
secret key they actually do on
1:25:10
you know they actually do connect with the services yeah apart from this service if you try to connect with EC2
1:25:16
there's a describe list I'm doing describe instances is
1:25:22
they're not allowed even though I'm running HC2 in HC2 only
1:25:28
but again one service also trying to get the same service also they need power
1:25:33
but my role don't have this power so they won't allow okay they only allow S3 because that was
1:25:39
the policy power I've given to my role okay now let me little bit more go more
1:25:45
deep into it how role work behind the scene so there's a very interesting concept right uh how role internally
1:25:54
work behind the scen okay so typically if you talk about the
1:25:59
processor roles okay right now this instance is running is one operating
1:26:05
system S3 is a one service okay S3 one service
1:26:13
typically guys who can access the service S3
1:26:19
is not decided SS by S3. Okay. Anybody from anywhere come to S3,
1:26:27
what S3 do behind the scene? They send they post this request and send the
1:26:33
information to IM and IM say somebody let's say namel
1:26:41
is the one who come to me. Okay. And I
1:26:46
don't know when people come to me come to me. I don't know what the login password is right or not or let's say
1:26:52
they coming from the API or CLI the access key is right or not. So S3 send
1:26:58
is equals to IM and this is the duty of the IM to check the login password and send to S3 and say yeah yes this login
1:27:06
password right you are authenticated okay after authenticate this then S3
1:27:11
come to know about your name details it's called your principle and identity then they know your AR name means your
1:27:17
principal name okay then S3 asks one more thing after
1:27:23
authenticated and again go to IMSA I don't know what this user have what power they have what they can do. I am
1:27:31
this is attached with this policy and the policy is called read only okay so wherever user sending the uh you
1:27:40
know instructions or the request is called API calls okay that is only
1:27:46
allowed for read only if they want to get something download something allow them if they want to upload something
1:27:53
put delete don't allow them so technically likewise S3 all the services
1:28:00
Okay, they check their anybody user authentication and their what they're
1:28:07
demanding a request by IM. So IM is one centralized service for this. That's what you guys know.
1:28:13
Okay, you know now in this case in this case same thing
1:28:20
happening with EC2 EC2 now in this case EC2 is not a username.
1:28:28
EC2 is not the like human being and they don't have an access secret key. Okay. But from EC2
1:28:36
EC2 you are going to S3 same way.
1:28:43
But here you don't have any username password. Here you don't have any access key and secret key. Without this you're
1:28:49
going to S3. The way the program has written in S3, they say if anybody come
1:28:56
to me, okay, anybody come to me uh for to
1:29:02
connect inside and go inside S3, the only way I allow to check and and only
1:29:09
way I allow for authentication is actually access key and secret key.
1:29:15
This is the only method that I support access key and the secret key. What I mean by this? Okay. As they say if
1:29:23
anybody try to go in I authenticate I will check check check two things even
1:29:30
though you know guys what happened when you log from web console web UI
1:29:35
okay you're giving your login name a password we feel we are giving a password
1:29:43
but internally there's some way okay this password has been converted into
1:29:49
access So we are giving password but internally
1:29:54
there's some program running behind the scene. Okay. Who are those program? There is not so much important but just
1:30:00
this is one information I'm giving to you. Some program who internally giving the access key secret key
1:30:07
and manage for you. So we as user feel that we have given the access login and
1:30:12
password internally our authoration also be done by in any services not in S3 and
1:30:17
any services with access key secret. So my conclusion guys here is how they doing is not important but my conclusion
1:30:24
here is any of the services in AWS anybody go either other services go or
1:30:31
somebody come from outside okay they check your authentication
1:30:36
before you they take in by your access key and the secret key that's what I am
1:30:43
trying to tell you okay it means if EC2 is also trying to
1:30:49
go in S3 S3 say I don't know whoever you are authorization been done by this key
1:30:56
do you have this key okay and because guys we haven't provide
1:31:04
to go in it won't work they they will say you're not allowed but in our case
1:31:10
they're not showing this they're not allowed they allow us they will give this entire list right they're allowed
1:31:16
how is possible without giving access how they allow
1:31:21
how they allow to go in. Okay. So the idea idea is
1:31:28
okay there's one more concept guys in security world this is called token
1:31:33
services. Okay token services.
1:31:40
So it is something like this what token service will do it give a token right for example it it you can think in this
1:31:46
way uh to to understand this thing okay for example if you go to cinema hall
1:31:52
okay so like big cinema hall enter the cinema hall gate and inside the hall
1:31:59
maybe they have one lock system to open the lock okay this lock maybe
1:32:06
has some password or maybe some key but you don't require
1:32:11
this key. This lock is to open this in this hall forever any point in time 24
1:32:17
hours morning, evening at late night and this lock is bey managed by your inter management of the management of your
1:32:25
hall or cen hall guys. Okay, we as a normal
1:32:31
audience who want to watch the movie. Okay, why we need this entire login and
1:32:37
password or why we need this entire uh key physical key to open this? Okay, so
1:32:43
what normally we do to enter this hole where you want to watch the movie. Okay, what we do? We normally go to counter
1:32:52
online portal we buy the ticket at that point in time. Let's say we I booked the movie from 9 9 to 12 movie. Okay. and my
1:33:02
ticket is booked and they give me one ticket. What the meaning of this ticket is in
1:33:07
this ticket has been associated with my time and this hall there are multiple cinema halls and
1:33:14
auditorium or OD 1 o2 something like this. Okay. So, so let's say this is one
1:33:20
o the second hall, third hall something like this. Hall number one, hall number two, hall number three. Okay, I booked
1:33:26
the movie for hall number two. So in this case if I try to and let's say we have some security system here who swap
1:33:34
this ticket or there security guard here who check this ticket. So if I take this ticket to this hall there say denied
1:33:39
you're not allowed. Okay, because this ticket is not bel to this hall. So you take this ticket to
1:33:46
this particular hall and their security system or their security guard check. Yeah, this ticket belong to you. But now
1:33:52
this time is is is 6:00. Your movie is for 9:00. You have to come between this time. Okay. And we
1:34:00
only allow to access this call only between this time only. Not before this, not after this.
1:34:07
Okay. So this guys what normal system we always see in the real world. Right. So in our context all these hall are
1:34:15
different different services. This is this is services. This is S3 services.
1:34:21
This your load balancing other services. Okay. And your uh ticket is known as token.
1:34:31
And who is giving this token to you? Your one counter. And this counter is one kind of service that's called STA
1:34:37
service. Service token ser mean security token services.
1:34:42
They issue the token for you. And token is token is typically
1:34:48
uh for limited time use 1 hour, 2 hour, 10 hours. So they can't limit access the
1:34:53
game the game with the help of this token.
1:34:59
Okay, we can enter in this in this hall. Okay, in this hall. So this guys high
1:35:07
level idea and this is what happening. So EC2 will actually go to your STS
1:35:12
services behind the scene and say I am looking
1:35:18
for the token. Can you issue token for me? Can a token for? But token is the ent
1:35:28
issue a token for say no I can't issue a token for you. Okay. If I jump in the
1:35:35
movie hall can you if you ask the counter guy can you give ticket for me? They said no it was pay right then I can
1:35:41
issue the ticket for you. Similarly as say you pay and here the pay is role
1:35:47
why I is to open for you for that that particular movie hall. Okay you have to
1:35:53
pay. Pay means just show me the role. Role is like a payment for example. Okay you show the role and because you have
1:36:00
the role so they will issue the token to you. the token to you and now you have
1:36:05
the token. Okay. Now here the challenge is challenge is this token is is is
1:36:16
not been used by S3. S3 say um I have security guard my security guard only
1:36:21
need access key security I don't see tokens token valid if you come to me with the
1:36:26
token um maybe token be valid but I don't check to the way I have been programmed
1:36:32
for security I only access check access key secret key
1:36:37
okay in this case is2 actually take this token to they they don't take the key to
1:36:44
the S3 they will take the token to the I am say they will say I am I am the I
1:36:51
have the token by your inter service only STS but technically guys ST is actually part of
1:36:57
IM only is subservice IM actually okay IM only so your sub service isue
1:37:04
that occ
1:37:15
to token and I will issue a temporary access key. Secret key to this guy.
1:37:21
Temporary access key and the secret key for this guy.
1:37:27
Okay. For this guy. Okay. And they give access key uh secret key for temporary basis. Okay. And now
1:37:35
this access key secret key guys this EC2 use uh services will take to S3.
1:37:42
Okay. And again same p S3 will go to IM. Check the this is BC by U. If yes what
1:37:49
this access secret key has the power okay so what policy it is. So they have
1:37:56
read only readable that power I will give to you and how we they get the power from the role only. So I will
1:38:02
check the power from the role because this whole information given by STS in the token.
1:38:09
So from there they check the power also. So what do access temporary give? they
1:38:14
will internally they will also attest this policy for you.
1:38:19
Okay. Everything happen behind the scene. It is not port you know visible in the portal but everything happened as
1:38:26
such behind the scene. Okay. So this context in this context EC2 is issuing
1:38:34
the token from HTS service and token is the one that we give the IM and they
1:38:40
will you can think it is like this. They will create a one internal temporary user. It's not visible. They create and
1:38:47
say you they say you feel that you are the real user that's been created IM as
1:38:53
I im user with this access case policy and with this your user go and client S3
1:38:59
okay with this with this power. Okay, this concept guys is called assume rule.
1:39:08
Assume rule what I show you and it is a part it has been possible because of HTS
1:39:14
services. Okay, assume role is very interesting concept. Lots more use cases assume role
1:39:20
can do for you. Okay, but okay. But uh
1:39:26
this is one of the example but if you go for any security advanced classes any of
1:39:32
security classes not in AWS okay or maybe as security classes if you go then
1:39:38
normally we discuss this topic in very very detail okay about STS this is called um uh security token services we
1:39:47
have assume role again we have assume role for SL web identity SSO MFA you
1:39:54
know identity provider providers tons of things uh we have in this world of ST
1:40:00
big even the most of the part of advanc this this service
1:40:06
okay so and lot more use case assume role guys will they can they can do for
1:40:11
you okay so this concept is called assume role but technically conclusion
1:40:17
would be everything automatic happen automatically I'm just trying to show you what has happened what happened behind the scene okay so issue to assume
1:40:29
okay that they are the user they're not actually and this user has
1:40:35
the access key secret key and they have this policy and they go and connect to the screen
1:40:41
but this entire assumption come because of the role because they have the role that was the entire process that happened behind the scene okay and I can
1:40:51
show you why by somehow because guys I told you if you My MC class is all the
1:40:57
extra information about EC2 that is not part of your OS but any extra
1:41:03
information about EC2 okay is internally managed by AWS in the
1:41:10
meta data server if you remember guys I show you long
1:41:15
back in manure classes meta server means from EC2 I can contact to my my
1:41:22
personal metadata server Okay. And there um they maintain their
1:41:29
public IP address, their everybody's zone information. So any any institute
1:41:34
guys they can retrieve their personal information. Okay. So this information also guys store here access secret key
1:41:41
that is not given by us but they store in metadata server. So technically you know what when I uh
1:41:48
run this command AWS this this command right? So this command guys always need access secret key because access key
1:41:55
secret key is not given by me. So internally your your instances
1:42:04
instances retrieve the access key from your metadata services.
1:42:10
Okay where from where the data is coming meta services by your STS as you go means your entire the process that I
1:42:16
explained to you. Okay. So let me show you if you are accurate enough again to see this how can you. So guys if you
1:42:22
remember I show you with the cull command we have a local access of the meta server on the IP address
1:42:28
69.254.692.4 four. This is the I think the URL. And
1:42:36
if you want to see the the latest one, they have latest folder, this is the
1:42:42
latest latest detail.
1:42:47
Okay. And if you want to know the detail of entire metadata, so we have metadata
1:42:53
folder. Okay. Now we have multiple things. This
1:42:59
all as I show in my initial classes. You want to know your instance ID. You want to know your uh your public IP. You want
1:43:05
to know your uh which security you attach to whichever zone you have. This thing you can retrieve from here from
1:43:10
instances. But here I'm interested to see my security details
1:43:18
where it is security details maybe
1:43:25
security or maybe IM. Yeah, I imm
1:43:34
credentials. Okay. And guys, this is what the guys
1:43:41
role address here. This is role we have attached, right? So from here we can see the role
1:43:48
details, right? And now if you uh curl this role there is like a page here
1:43:55
and in this if you curl this. Okay you can see this detail right
1:44:03
this role guys I was talking about. Okay now this because we have a role
1:44:10
attach this we can see role attach. So whenever you attach the role this
1:44:15
instance will contact to STS service and STS service will give a token to you.
1:44:22
This was the token I was talking about very critical token we have for some
1:44:27
time okay so they're going to expire in in
1:44:32
146 in some some according to this six
1:44:39
12 hour route. Okay. And this token is the one who behind the scene contact to
1:44:46
IM and IM is the one who give access the security key to you temporary.
1:44:53
Okay. And this security again what last update that you access but the security
1:44:59
key is the one who actually behind the scene contact to S3.
1:45:05
Okay. to retrieve this particular uh S3 details and this access internally in in
1:45:13
IM okay IM has been attached to uh the role
1:45:20
okay which role what are the role guys you have defined in the sorry this this access will be attached to the policies
1:45:26
which policy what policy guys you in the in the role you can't see this thing in
1:45:31
the IM portal from here there's no visibility for this everything happening behind the scene. There's no visibility.
1:45:38
Okay, there's no you can you can't see any user with having this this guys
1:45:45
connected but this is happening uh you know behind the scene.
1:45:51
Okay. So this is why you guys very interesting concept. I just wanted to tell you normally when you uh
1:46:00
go in security classes I see explain very quickly here but very lots of things we can discuss here and lots of
1:46:06
things use case we're going to plan but at least you get some idea about STS and assume role concept that the idea is
1:46:13
right now is enough but STS is one service how to use how to configure is a
1:46:20
different point we don't have to discuss but everything but most of cases they will do behind the scen for us. Okay. So
1:46:27
guys this is one idea on how a role will work. So normally guys a CSA level training normally talk about this
1:46:33
process actually attaching creating the role attaching the role that's what we normally discuss at the CSA level training but I feel if
1:46:41
you have this idea you can get lot of interesting concepts you know you can plan something maybe
1:46:48
as a security plans maybe right so that's all from my side that's today
1:46:54
okay and uh see you tomorrow with some more new concepts any query If you have
1:47:00
till now, you guys can ask.
1:47:12
Yes, Alo, we can do it. We can do it. We can copy S3 from one AWS account to
1:47:19
other accounts also. Do it.
1:47:27
Yes, Nu. We are going to cover DNS service in AWS. Okay. Route 53 is a one
1:47:32
service. Okay. Obviously, we're not going to configure our own DNS. There's one
1:47:38
service called Route 53. That's what we are going to discuss um in the future classes. Any security
1:47:46
course in future mean AWS security course will come maybe after some few months. Okay. Because after this we have
1:47:53
a devops is a plan. But yeah, there's one Linux security course is coming soon from Red
1:48:00
Hat. Okay, so very advanced security course. So if you are interested security, you can join their course.
1:48:06
It's called 415. So
1:48:18
yes K we are going to cover RDS in this train. Obviously not the complete RDS. RDS one database service complete lot of
1:48:24
huge thing is there we have a specialized course just in RDL means just in database in AWS but yeah
1:48:32
whatever related to CSA level we're going to cover RDS that much
1:48:45
token I yes yes token no token contact your EC2 or is service
1:48:52
will contact by having the token with them to IM and IM give the access
1:48:57
security for this
1:49:06
uh Chris uh exam would be purely uh
1:49:11
objective kind of thing you know like your scenario is like options ABCD
1:49:18
multi-choice maybe some kind of Pick and drop these kind of exams they have in CSA level. Uh
1:49:27
but soon in upcoming exam they are coming with some practicals also like in
1:49:32
soft level training exam they start with practicals also. Some of their they give you practicals where they give you labs
1:49:38
there only. Okay. They give their own labs where they ask scenario you to perform it. But I think CSA level till
1:49:45
now maybe they might update in some version but till now
1:49:51
CSA level two I can say they have the the same way objective one sections ABC
1:49:58
choice and multi- choice those things they have the exam
1:50:06
raj any yes I we do have plan for GCP card also last year we did this training
1:50:14
at X level but at least for note four five month right
1:50:19
for this because we have used tight schedule for others also but definitely we're going to come up with also
1:50:36
so uh that's all guys Uh
1:50:44
yes uh parents terapform can also have option right in terapform we have a options to use assume rules STS.
1:50:53
So if you go for terraform uh where we you know we have set up the access secret key or where we set up the
1:51:00
profile. Okay. They have one more option there. You can also authenticate
1:51:05
Terraform with STS. Okay. So those who was with me in my
1:51:10
terapform training or those who buy no terapform are this kind of tools maybe. Okay. So uh in terapform
1:51:19
some of the use cases and most of you cases we can set up STS assume role.
1:51:24
Okay. And we can set up and there's a lot of use cases STS uh assume is not
1:51:31
for one use case. There are multiple use cases and from here you can get the idea how can we do it. Okay. So how we can
1:51:38
set up the as you rules. So somebody asking me so I'm just giving
1:51:44
this information. So how we can set up you can get some like some idea how can we set up. Okay. So that's all.
1:52:06
So access we don't have to practice this we just it's like a password we create normally with the user and this login
1:52:13
access we normally give to you to a command line or terraform or web API
1:52:20
rule autoate access security for you behind the scene that's what I was trying to explain you okay guys see you
1:52:27
uh that's all from my side today we'll see you tomorrow with some more
1:52:34
you know discuss a dev question is for How long? Um
1:52:39
I don't know Naven we'll go for weekend or per day. If you go for per day basis
1:52:45
4 days two are two hour normally. So one and a half month almost I believe it
1:52:52
will go I believe but this schedule is not planned so there's no commitment but
1:52:57
if you go for daily basis one and a half will go otherwise we can depend upon hours it's it takes right. So that's all
1:53:06
guys. Um, see you in the next class to all. Bye. See you. Good day.
1:53:22
This person token is encrypted. Token look like here I show you text. But when I converation is going on behind the
1:53:28
scene they encrypt every communication. So everything is encrypted.

