ript


0:28
So guys welcome back and let's continue with the next part. So today's guys
0:33
again we'll continue with the load balancers right and but today the
0:39
concept is very important right the yesterday moto was to explain you the
0:45
use case or the main use case of the load balancers right I think I explained
0:51
you the concept what is front end port number back end reverse proxy what is load balancer and plus we also use uh
0:58
and configure one uh classical load balancer in my uh yesterday class,
1:04
right? But actually load balancer nowadays can do much more things, much
1:09
more capabilities they have. Okay? And uh let me explain you some of
1:15
the capabilities that is very very much useful in the real world. Okay. So let
1:22
me set one context here. For example,
1:28
let me take the example of google.com. Okay. So if you type www.google.com.
1:39
Okay. This is one domain name we have or DNS name we have.
1:45
Okay. And uh when you type this or you type slash same thing.
1:52
So technically if you type this you will be landed to the Google website.
1:59
Okay. Let's go Google search engine or maybe I can use the word called Google search engine or search app you
2:05
connected. But if you type www.google.com/mail
2:13
[Music] okay if you type this then you will lend
2:18
it to a different app and that is called mailing app of the Google.
2:25
And similarly if you type SL maybe calendar maybe you type less people
2:31
Google has different different apps accordingly you will connect to this particular app okay for example
2:38
if I type here www. google.com I mean Google.com or SL maybe
2:44
you can write you will be landed to this Google search app but in the same
2:52
URL if you type SL.com
2:58
then you will be landed to the uh Google mailing app that is you guys know that
3:03
is that is actually gmail.com okay so I stop this but that what you
3:10
will Okay. So now what I'm trying to tell you here is it means it means uh your domain
3:20
name is same or maybe let's say your IP address is same or host name is same in
3:26
the host name your path. Okay. Decide where my client will lend.
3:34
They will lend to search app or the mailing app. Okay. So uh in the URL
3:43
okay this is the URL we have in the URL your path will decide where you will
3:51
reach you will be lended. So you will lend it to the search app
3:56
if your path is sl or you lend it to the mailing app or Gmail in our case if the
4:03
path is sl mail. Okay, for whichever app you landed,
4:11
okay, that uh that app is actually known as or that area or that path is actually
4:18
known as end point. It means your SL mail decide your end
4:25
point would be mail app. Your slash decide or sometimes SL search also.
4:32
If you type SL search also that is also the same thing. If you type SL search
4:39
you same app. It means SL you write or SL search you write in the same thing.
4:44
Uh SL search path will decide your endpoint to be search or I can use one
4:50
more term here. Okay. This part of path will decide where you will reach where
4:55
you will route it to. So that is a reason this path is something also known as route.
5:01
So either you can use the word path or route it is almost the same thing. Okay,
5:07
this is what this now um so finally the the the summary of this
5:14
discussion is right in the URL your path decide where and which app you
5:19
connected. Okay, this work. Next thing guys, this is what information I want to
5:25
give you because I'm to use this information somewhere in the today's topic that's called load balancers.
5:31
Okay, in AWS class but I want to tell you one more thing. Okay, before this uh
5:37
before the topic I'm going to start topic would be ELB only and in that ELB I'm going to start a very very important
5:43
topic that we use uh a lot in the real world. It's called ALB application load
5:48
balancer. Okay. So before I start the topic of application load balancer,
5:54
okay, what I'm doing here, I'm just giving you some basic concept. So this concept I can use very quickly in ALP
6:00
topic. Okay, one more small concept I want to explain you. If you guys know
6:05
about OSI layer, OSI layer in networking world. So we have taught us seven layers
6:15
we have. Okay. So the last layer that's called
6:20
layer number one is known as physical layer. You guys might know layer two is
6:27
known as data link layer. Layer three or L3 known as network layer. Layer four is
6:36
known as kind of transport layer. All right. Or protocol layer. Layer five is
6:43
u is your session layer. layer. Six is your presentation layer. I mean vice
6:50
versa. I just check the numbers right and seven is your application layer.
6:57
Okay. The main thing that I want to tell you here is uh all the decision of the
7:05
IP addresses. Okay. It means uh if a computer want to
7:12
connect to B and as IP of B is 100 IP of A is 200.
7:18
So A will create a packet okay and send to B. In the packet they will type the
7:24
source IP and the destination IP and B will go and check the source IP and the
7:30
destination IP. All those things will actually happening at the layer number three in networking world. Even though
7:38
if you have rout some router in between. Okay, router is the one who will check
7:44
the destination IP address and send that packet to the destination and help you
7:49
to send this packet to that particular network. Okay. So router always check the the IP
7:57
addresses. So, so that is the reason we always say that router is the one who
8:02
work on uh network layer number three because router is always check the
8:08
network addresses is in our case is IP address IP 4 IP 6 whatever the address you have
8:14
okay that's one thing but after your packet reach to computer B in one computer B you might be running with
8:21
mail server with port number uh let's say 25 you're running web server and
8:26
port number 80 multiple app is running by chance for example here. Okay. How we
8:31
come to know the packet what come to B belongs to mail server or the web server. So in the packet we have the
8:37
port number. So port number is a decide who decide
8:42
your packet come for this particular applications. Okay. So port number guys normally work at the layer number four.
8:49
This is called transport layer. Okay. So it means any protocol specific thing or
8:56
protocol specific thing means either number come for 25 uh 80 or you might
9:02
have any DNS server that are the port number I think 53.
9:07
Okay. So um uh so any of the decision
9:13
that what kind of packets come uh right which port number they come uh and which
9:19
kind of network connections we have created reliable or non-reliable like TCP or UDP and some more kind of we have
9:26
right is done at the layer four okay and layer seven guys I'm just only
9:33
giving those those point that is relevant to our today's topic this is not a pure networking classes is and
9:39
there's no meaning to discuss OSL layer and further discussion about this but layer 7 is very important here in this
9:46
okay let's say you're sending the packet from A to B the way you send the packet
9:54
the way you create the packet okay so in the packet we have IP address of source
10:00
and destination okay we have the port number of source and destination okay
10:05
plus we have a data okay that what data want to send maybe login and password chat message email
10:12
whatever it would would be but with the data you have to send some instructions
10:18
okay means how you going to use this data so I'm sending some
10:24
data okay uh data so the way you send the
10:30
data right so in B for example let's say B is
10:36
the web server Okay, in web server we have multiple different uh pages or programs. Let's
10:44
say program number one, page number two, web page number three, web app number
10:49
four. Okay. So where this data go, which page going to use it, how they going to use
10:57
it, how we going to insert and tons more things, okay, about this information
11:04
will go in the uh in the kind of way.
11:09
That way is called headers and they are normally known as applications header because finally your data is going to
11:15
this program. This program is known as applications and this application how they consume the data which application
11:22
which program going to consume and how they going to consume this data use this data or maybe you sometime to send the
11:27
instructions also. So what instruction you need to send to this program is always goes in the application header
11:35
that come here. Okay. And every every kind of server has their own way of
11:41
sending the instructions. They are normally known as protocols. Okay. So in the web server the protocol
11:47
may be HTTP in uh mailing the protocol may be SMTP
11:53
or POP and for all the things right and for file transfer protocol maybe FTP
11:58
SFTP tons more protocols we have so every protocol has some way of sending the header and through the header
12:04
they're sending the instruction uh something like this. Okay. So these are layer uh seven layers we have. Okay. Uh
12:13
right now guys the if you have any device
12:19
okay or maybe you have any kind of maybe server maybe for example.
12:26
Okay. If any device or any server if they work on networking
12:32
they understand networking and for in the networking if they only work only in
12:38
IP addresses they only deal with IP address and according to IP address they will check
12:43
they will take some decisions. For example, router is one example. Router has no SS concern about about
12:51
your port numbers. Mostly they only deal with the IP address and the network range and something like this. Okay. So
12:59
we can say router is a work work on layer three.
13:05
Okay. So guys yesterday uh we had use a load balancer. There's a classic load
13:12
balancer. Okay. And uh those CL glob guys
13:19
work on IP addresses at the same time they also understand the port number also.
13:26
You know what what we have created yesterday we get one uh sorry one load
13:31
balancer and say anybody who come on uh port number uh 8080
13:38
okay we will send to back end system port number 80. It means this load balancer was
13:44
classical load balancer and this load balancer has capability to read the port number also from the packet.
13:50
Okay. So I can say my classical load balancer is example of layer four transport layer because they understand
13:57
the port number also. Okay. We don't say the word because they
14:02
understand IP address also. So if somebody understand IP address also and the port number also should always give
14:08
the bigger name the upper name. Okay. So anybody who understand port
14:15
number they also understand IP they also data langu physical layer also. So that is how we we normally
14:22
okay in the networking world. So classical load balancer is a load
14:27
balancer that work on the port number.
14:32
They understand the port number. They understand the protocol TCP UDP. Okay, that's all. So I can say my
14:40
classical load balancer is a layer 4 load balancer or transport layer load balancer.
14:47
That's all. But my classical load balancer doesn't understand anything about my application internal protocol
14:56
information like headers or like instructions. Okay, they don't understand. For
15:02
example, if I type something like this, my URL HTTP is less less my server IP or
15:07
my my load balancer IP maybe. Then I write the
15:12
port number. Then I type the path that is also known as route something.
15:18
Okay. So if I ask my class manager, do you understand this name? Yes. Do you
15:23
understand the port number? Yes. On the port number basis, can you take some decisions? They can say yes. If anybody
15:30
come on this port number, I will send to this port number. I understand this.
15:36
Okay. It means they understand till layer four. But if I ask can you
15:41
understand this one also? Can you take this part or can you take this particular
15:47
you know information from this URL and based on this information can you take
15:52
some decisions answer is no this or no I don't understand this okay because I
15:59
only know till port number but in the URL it URL look like this but this
16:05
information in the URL behind the scene go inside the header and header is is a
16:13
part of the protocol and protocol is a part of the application layer the layer C. So typically they say I don't know
16:20
layer even though even though if I go and search in the Google okay let's say
16:26
I'm searching my name daga okay
16:31
daga right so this information guys go to Google this part app and my
16:36
information dagger let me correct my name okay go in this particular
16:45
uh in this particular uh URL Okay, you guys might know. Okay, any
16:50
information or data go in the URL. Okay, so this is the data
16:58
dagger go in the URL and data always go with some kind of variable. So Q is a
17:04
variable here. Okay. And this data will insert in this particular program is called one app
17:11
running in the Google search app not in the mailing program. Okay. because we search here. Okay. So
17:18
in this case any data that go in any program in the URL then they are known
17:27
as query string. So this is the query string we have. So with the help of query string we are
17:32
sending the information what we are searching in the Google okay to the Google
17:39
system and into the respective app. Okay. But this information guys is also
17:44
goes into the application header means HTTP header. Okay. So these are few example otherwise
17:49
there's lots more information guys go inside the HTTP header. Okay. And uh and uh any devices or any
17:58
program that has a capability to open your application header or protocol
18:05
details. Okay. They can read the information and after they read why
18:10
won't they read? Because I want after read they read they will do some decision on it. They can we can create
18:16
some condition and say if this is happening then do this if this is happening this is coming then do this on
18:22
those things. Okay. So any device and program who have capability to read
18:28
the application header we can do something and create some decision what
18:34
depend about what data is coming in the application header. Maybe they're coming in the as a path as this called path or
18:42
the route. Okay. Or they coming here over here in the query string that's
18:47
normally most mostly known as guys in HTML. It's called method get or they
18:53
going inside the header is not visible. Okay. It's called post header or post
18:58
method of form or they much more much more kind of thing made possible. But
19:04
everything is a part of business. So this information that I'm giving to you why all this information will help
19:11
you in my next topic on ALB. But if you ask CLB do you understand application
19:16
header? No. So any data coming in the application or header your CLB won't
19:21
able to read. So we can't use CLB to do some decision based on the headers or
19:29
based upon the application data. CLB is restricted to the transport layer protocol layer 4. But you have a if you
19:37
have a requirement something like this the way I started today. Okay. What my recommend is if my URL contains less or
19:46
SL search. So I need a load balancer
19:52
that will read this data or my data from application header and based on this
19:57
they will send me to a different endpoint search app.
20:02
Okay. And plus I need one more load balancer from my URL. Okay. they will
20:07
read this data uh read this data and based on this data they take the distance and send me to different
20:13
endpoint is called mail app. So you will have one single load balancer running in this particular IP address. So one
20:20
single load balancer and same name same IP address as we have. So one single load balancer okay any client come and
20:27
hit to this load balancer okay either they type this URL or this URL okay both
20:32
the URL the IP iswgoogle.com so this will be the load balancer IP address but this load balancer has a capability
20:40
in this load balancer we had created a rule and rule would be if somebody come and search
20:47
and now I know application header to read because I'm the application layer
20:52
level load balancer. I know how to read this and based on this uh you guys have
20:58
created a rule on me and the rule would be anybody come in this search send me to this app anyway come in mail send to
21:06
this app. Okay, rule may be something like this
21:11
and you may try to search daga in the query string send to the other system.
21:19
Okay, everybody think or somebody come in this
21:24
particular URL with some some uh some kind of malicious something like this
21:31
URL in this case don't connect to any app send to some error document and stop them block them something like this
21:38
okay all this can be possible if your program or device or in our case the load balancer has a capability to
21:46
support the uh application header data to read and after they can read we can
21:53
create a rule on it and according rule we can do much more. Okay. So Google guys is a great example
22:00
of uh application load balancer. So when you type google.com behind the scene
22:05
this is just just a DNS name but behind the scene you connect to the application load balancer. that is a reason okay
22:12
they will deduct the path and accordingly they will connect you to the respective apps and almost same we are
22:20
going to deop today and for this there's one more different kind of load balancer
22:26
available in uh AWS okay what we had created classical that was one we
22:33
created yesterday okay I'm going to create one more today that would be application load balance
22:40
Okay. And they have the application overload balancer. They understand the protocol HTTP or HTTPS.
22:45
And based on this, we can do multiple different capabilities. So they understand the application inter feature
22:52
of HTTP and HTTPS traffic. Okay. And they can do a lot of routings and do
22:58
much more things which very very powerful load balancer. Tons of things
23:04
we can plan by this. Okay. Almost on almost all the use cases we use ALB a
23:10
lot. Okay, that is one of the reason whatever capability you have in CLB
23:16
like I told you guys anybody who understand application layer is it mean they understand all the below layers.
23:23
Okay. Okay. So if you whatever guys you do in the CLB based on the port number D loop there something based on I can do something same thing ALB can also do
23:30
port that is the reason why CLB we don't require and that's what becomes generous
23:35
and they're going to stop the services very soon. Okay, this is what so today
23:43
I'm going to start with ALB then we move to NLB uh then GB
23:48
okay but ALB is very very important and very interesting so let me explain you start explain this concept in very
23:55
detail so I think I till here you got some idea okay ALB is application layer
24:02
layer application based load balancer or application load balancer so let's say
24:08
let me give take the same example of google.com. Let's say some client and
24:15
this is what I'm going to show you today. Let's say some client typew.com
24:20
and by the help of DNS they get the IP address and finally they hit to the load balancer.
24:26
Okay, and this is the application load balancer. Okay, load balancer and name
24:32
will be let's say ww.google.com.
24:39
Okay, that's what they hit. Now what Google has planned, they have a
24:44
different team. Every team has a different responsibility. One different team they
24:49
have for search. Okay. So they have created one search app and they launch this one search app
24:54
in one of the instances. Okay. So in this instance is running
25:01
with the search app. Okay. So let me write. So SL search
25:08
is running here. One more instance they have they're running this instance with
25:14
the different instance with different app all together uh named let's say SL
25:19
mail. So that is running over here but they know okay in search there's a huge
25:25
client going to come up one single instance won't able to handle this. So they might launch some more instances.
25:32
Save copy with search app. Okay. More same thing the huge request
25:37
come in the Gmail. So they launch one more exit copy for the mail for mail or
25:42
Gmail like this. So like this dependable how much request they come up. So we
25:47
have hundreds and thousands of server running for search. 100,000 server running for me. Okay. Managed by
25:54
different team all together. And maybe this team have no uh search team. Uh
25:59
let's say ST has no reason with empty mail team. Okay. Indiv individual team
26:05
they have right. But why they launch a lot of because a lot of traffic is going
26:10
to come up. So what we want when the first client come they hit to this
26:16
search app second come they hit to this app then this one this one. Again here I want some load balancing.
26:23
That's what my requirement is. Same thing is when anybody come to me, I want somebody connect here, here and there.
26:30
It's called load balancing. I want the load balancing also over here.
26:35
Okay, over here. So in this case, if any client come to my instance search, okay,
26:42
let me give the name called A. A here and B here and C and D. So
26:48
anybody try to connect with A. Okay. So, A would be my final target for the
26:53
customer. Okay. My final final target for customer is not this load balancer and not this load balancer. A final
26:59
target for the customer will be a load or a system or maybe B system.
27:06
Okay. So, what can we do? We can create one group of similar computers or similar systems.
27:15
Okay. And that group is called target group. Okay, what is benefit of target group?
27:22
If you create a target group automatically behind the scene, Amazon
27:27
will manage a load balancing for you. You don't have to create any extra load balancer like CLB what we had discussed
27:33
yesterday automatically. Okay, your load will balance in this system. Now onwards
27:40
you don't have to connect any instant directly to the load balancers. Okay, you say I want to send my traffic to the
27:47
target group. Okay, but if you send traffic to the target group internally
27:53
internally, right? Target group work as a typical load balancer. Automatically
27:59
traffic first send here then send here then send here then send here this is the white behavior of the target
28:05
group. Same thing these two system I want because they're same copy and obviously the reason is I want to do a
28:11
load balancing. So automatically what I do I will get one target group. Let's
28:16
say this target group will be male target group and this is target group called search target group.
28:22
So automatically any traffic come here by default you don't manage this by default they will do a load balancing
28:27
for you. This how AWS created in AWS when you create a target group how to
28:33
show you they will behave like this. Okay. So now this is more look like CLB
28:41
what we had uh created yesterday but it's not CB it has been completely internally done and managed by AWS
28:50
is more like look like CL okay but here now we have two different team the company is one single Google
28:57
right so there's no meaning to tell somebody that if you want to come to search then come to wwarch.com want to
29:04
come on mail type wail com is not a standard name right to make the company
29:09
standard name they given a one single name called and this name they make it popular to
29:16
entire world and they say if anybody want to come to Google type this name but but because in the Google we have
29:23
multiple app okay multiple app they have okay so what
29:30
you can do okay to to differentiate which app you want to connect so if you
29:35
Type SL after SL some name. Okay. If you write SL mail, it means by this name we
29:44
understood which app you want to connect. So in this case behind the scene the duty of ALB come ALB has a
29:50
capability to read the URL or query string or the headers or the application
29:56
data. So in ALB we'll get the rule that if anybody want to come to this URL I will
30:04
send to this end point and if it come to SL search
30:11
URL I will route to this end point.
30:16
So your name will help us to decide which route you want to go that is these names are known as routes or routing or
30:25
routing path somewhere okay to this endpoint in this case you
30:31
don't have to tell that I'm C and D we say I will send to this target group
30:37
inside you have one computer two or more hundreds of millions the team will handle the deal thing if the team thing
30:45
in the mail there's huge load going to come up. They might launch thousands of mail server by the ones in the target
30:51
group and any packet come to SL mail they send to this target group inside
30:57
group they automatically do the further load balances okay and this is how it work and this is
31:04
the very typical setup very powerful setup almost you go to Facebook Google
31:09
everybody almost use the same setup okay so guys whatever say www.com com ww
31:15
google.com that is you you're not actually connecting ing to the google.com actually you are connecting
31:22
to the Google DNS not the DNS the after DNS you'll connect to Google uh
31:28
application load balance whatever load balancer they are using that is a different point they're using some kind of devices because device also available
31:34
in the market for the load balancer like F5 devices all the things but you are actually connecting to the
31:43
actual load balancers and these load balancer are mostly application load balancer depend upon company to company
31:48
company if they have multiple app they mostly use application load balancer and then they sent to respective target
31:55
groups okay that's how it work okay so let me guys show you this demo
32:02
how we can do but this is the rule and rule can be based on your
32:09
path it's called routing path based on query based on some other uh HTTP
32:15
respective headers so there's a lot of things in HTTP header available. So if you know about HTTP header, HTTP web
32:22
services or HTTP methods, okay, grammar, verbs, okay. So almost you can use
32:29
anything here to take the decisions. Okay, while creating the rule, so rule is the one who take the decision where
32:35
to send and it is not only there sending to target groups only. Target group inside
32:41
the target group we have the instances, right? Instances.
32:46
So they're not only sending to the instances even though ALB has a capability right to send this traffic or
32:53
route this traffic to your on premises computer also. So maybe your computer
33:00
running in on premises they can send the traffic here also in some cases if you want. Okay. In some cases guys they can
33:07
send the traffic to your container platform
33:13
like docker like kubernetes like open shift and whatever the container platform they have typically they areing
33:19
they are running the microservices because in the microservices
33:25
okay we have to do a lots of load balancings in the microservices one service then to other services and
33:32
between the services we have the load balancers and load balancer has capability should have a capability to
33:38
understand the SP header especially the rest API endpoint right so in the
33:43
microser world it is it is again this is the great use case microser is a great
33:48
use case for your application level uh level load balancers right other there
33:54
will more uh use case on it but here in that case I'm going to show you this demonstration as cloud with the
34:01
instances okay how to load benes with the different target groups. Okay. But if
34:08
you see here in this example, I mean they might may show you this is
34:13
like for microservices, container and much more things the support. Okay. So let's guys I believe you
34:21
understood the points and some terminology what we need. But but for the uh application load balancer the
34:29
minimum requirement will be you need a target group. They're going to ask you.
34:34
Okay. Let me show you how and where. So, let me go you show you step by step how it works. Okay. So, click on the create.
34:44
Okay. They ask you about the application load balancer. Before this, okay, before this, let's do one thing. Let's launch
34:49
multiple instances so I can show you the demo. I'm going to launch four instance guys in total to demonstrate this. Okay.
34:58
Four total instance I'm going to launch. So,
35:04
Even the same thing guys you can ID same you can use in the private world also the way I show you for better practice
35:10
management okay to this instances uh so some instance already running guys
35:15
my web server and one B in my private world let me launch two more so I'm
35:25
going to launch it is
35:30
two mode with same AMIs and um
35:38
I'm launching that two. Okay, I'll change some data there. And this will be launched in my VPC and in my private
35:47
world I'm putting in private key. Okay. And this is let's say this will be
35:55
my mail OS server private.
36:01
Okay. I'm guys enabling all traffic right now
36:07
and launch.
36:12
Okay. So these two instance guys we already had yesterday
36:17
my web I will change something there to to have this kind of look and feel and these two instance I'll launch right now
36:24
to set up a mail obviously I'm not going to set up a mail server but I'll put some static data that look like it is a
36:30
mail. Okay. So four instances we have okay and to connect this sensor because
36:38
they are private instances I will use this bin host to connect
36:43
with in EC2 user
36:49
EC2 user
36:55
and what I'm doing right now um from this instance I'm logging to my uh
37:04
instance first one.
37:12
Let me go here to my first one.
37:17
My private one a this is a private IP address and
37:24
what I'm doing.
37:29
So I change something there. Let me check the the security group. I
37:37
might change some security group yesterday. So the security group actually allow
37:43
only for HTTP. Let me delete this and add the rule just
37:49
for a while for all traffic.
37:55
So we have a connectivity. So uh this will be connected.
38:03
Now what I'm going to do I'm just going to my first login to root account
38:11
and in this system I am going to create a folder called source that's all. So if
38:17
you create a folder here in this page then it become your search app.
38:24
Typically this is one of the way otherwise normally if you guys know rest API development
38:31
or full state development or web application development recently I started this course if you guys want to
38:36
join with ME so 7:00 I started they were yesterday only so we can create our own
38:42
app there's a different point but here I'm just creating a normal page index html and uh I'm just typing I am search
38:52
Google okay and and computer number
39:00
a that's all right right here and to check everything is working fine I just
39:06
log out from here okay and from here and now if you curl
39:12
this page from other computer so this curl if you do / search
39:23
Okay, they are saying move permanent but if you search in this way you get the
39:29
output. Okay, so um output is coming properly.
39:36
Nice. So first setup has been done. Let me do the same setup very quickly. Another computers also. So the computer
39:42
number u uh whatever the name would be has been done
39:49
and the same set I'm doing in web private number B.
39:56
I'm also using this system as a web server.
40:02
So login with a root account creating a directory
40:08
where HTML search
40:14
and in this directory I'm putting it I am search B
40:21
okay page name index htm that's all okay this is the computer number B setup and
40:28
uh if I try to do a curl just for quickly check
40:33
just for quick testing that here my search app with SL it's working fine so
40:40
my this two computer has been set up let's say this two app is already running has been set up I'm doing same
40:45
setup for mail also and for mailing I am using this OS
40:51
having this private IP address okay
41:00
I'm doing manually But here you guys can use automation tool like an simple
41:06
something like this to configure these things. Okay. So eco I
41:12
am mail a a means for computer.
41:18
Okay. Index st. So this has been set up
41:24
and I would like to check because if it's not working properly then your
41:30
load manager won't work. So it's very harder to sometimes check that is the issue we have. So web server is working
41:35
fine that's what we tested and last same way I'm going to configure
41:44
this system. So it will be same SSH
41:52
and I'll do sudu.
41:59
Okay. DL
42:04
mail I am male B.
42:14
That's all. So all the four web server or I can say the app server has been
42:19
configured. Okay. Now how we can use the ALB load
42:26
balancer here to do the things right. So these two part also been set up. Now
42:32
these two system working in different team let's say. So I would have to first create two different target groups.
42:39
Okay. How? So in the AC2 page in the load balancer as we have option called
42:46
target groups. So I'm going to configure load balancer right now. I'm first setting the target groups.
42:53
So I I don't have any target group right now. How we can set the target group? Let me show you how we can set the
42:59
target group. So setting up the target group. Okay. We can go and create the target
43:04
group from here. Okay. Tag group from here. And here guys
43:10
they're asking you okay where is your target put okay means they're asking
43:17
which way hold for second place
43:33
so uh they're saying you want to do uh technically what we are creating right
43:38
now I'm not configuring ALB will do after some time. I'm only configuring this target group that is work like a
43:44
load balancer. So they're asking you doing the load balancer or target group for for the target computer or the
43:50
instances or for the instances in your VPC specially AC2.
43:56
Okay. Or you want to do a target group with your on premises computers.
44:02
Just give the IP address to them. Or there's one topic guys going to come in the future class called lambda. We can
44:08
use target group with lambda functions also. Lambda is a serverless service. We
44:13
can directly deploy our programs there function to run. Okay. So anybody come to a load balancer they will automate to
44:20
lambda function and they will run the lambda function and run the lambda uh function and give the output back to the
44:26
client or you can add further application load balances. Okay. There's
44:32
a possibility we can add in the group some more load balancer also. they
44:37
further balance the load. So that can also possible means load balancer inside load balancer. Okay. Because normally
44:43
tiger group we going to use the ALB. Okay. So under ALB we have more LB in some use cases. Okay. So what you want
44:52
in my case I would have to do I want to print a target group for my instances.
44:58
Okay. How we do guys? Can you hold for a second please?
45:28
Okay. So in my case we are creating a target group that is like a load balances between the instances in your
45:36
specific VPC in Mumbai VPC we can specify. So I'm going for by default
45:41
setting guys the target group name let's say this is the target group for my
45:47
search. Okay. So this is target group we creating for the search instances. Okay.
45:54
Okay. Now you to write your protocol name. So right now guys my instances in
46:00
the target group. Okay. It's like a load bon guys. So you tell in this search which port number they
46:07
are running on and which protocol they are running on. They are running on HTTP but STP guys is
46:13
a protocol application layer work on a TCP concept. So HT protocol is TCP you
46:22
know reliable protocol. Okay. So that's what the port number work on a protocol called TCP. You can add H S H S H S H S
46:28
H S H S H S H S H S H STP also but it will be same maybe you can add H STP that's also work
46:33
the same okay so let me use STP so my pixel protocol is HTTP work on the port
46:40
number eight which VBC your instance is running right now okay
46:46
so in my case my this is the VPC we have and if you are using HTTP HTTP has a
46:53
multiple different version HTTP 1.1 HTTP2 also we have so mostly uh in real
47:00
world we use HD 1.1 that's the most common version available every time okay
47:07
so I'm using HTTP protocol version one or 1.1 also support here okay health
47:14
checks you guys know so behind the scenes they will work like a load balancer who target group so they keep
47:20
on checking the health of your instances so for the health check path you can use
47:25
less Yes, because we already have this path / mail available or SL search
47:34
available. So that's also can possible. Okay. So I'm checking the help in SL
47:40
search. Okay. Or maybe we can give the full name also index. That's also why but you can
47:47
write SL also because in the web server by default if you write SL they treat this it is like index page.
47:54
Okay. So whichever page name you want to check for the health what is health we discussed already yesterday class you
48:00
can type here advant health settings it will be same thing what we discussed
48:05
here okay we sending the health on the port number this is the threshold all
48:10
right so healthy threshold let me check for two times after two time they
48:17
connect this become healthy and then again two time maybe let's say four
48:23
interval let's say after 5 second I will keep on checking and if my web server send a request
48:33
connectivity guys when you guys connect up with a page we get a status code 200 when successful connected and if you
48:40
don't connect a page is not available then 404 error come up page not found so there's a multiple different uh code in
48:47
HKB protocol 200 means successfully connected okay that what we want So for example,
48:56
even though you guys know but uh but if you if you connect right
49:04
not this one what the IP would be. So behind the scene guys the output come up but behind the scene you will get a
49:11
success code okay you can use I option the call command okay you will see the
49:17
success code 200 and you can also see when you connect to with any protocol mostly they use HT 1.1
49:25
protocol and these are the some of the few HTTP headers it's not visible but it's running behind the scene so we can
49:31
use I options to see the header that send to and send come from this
49:36
particular server to the client. Okay. So that's what I'm using here. If
49:44
you successfully connected then 200 mess trail to the server or the load balancer
49:50
tag group that is successfully connected but tag you guys know tags we don't require right now
49:58
hyphen doesn't work. So let me use target group search
50:06
next. Now these are the list guys come up in this target group which all target you
50:11
want to register mean which all instances you want to register. So according to our plan I want to register
50:18
this web one and this web.
50:23
Okay. and both web guys are working on a protocol called uh TCP on this
50:30
particular port number. Okay. So we defined here the port number for this initially guys last page we defined the
50:36
port number 80 for my load balancer but here this is the port number for my instances.
50:43
Okay, I want to include right now I don't have any instance here in my target zero. But when if I include
50:50
then this two will be included in this target group.
50:56
Okay. So technically one target group has been created that has two instances
51:02
and you want to create this target group. I say yes that's all your one
51:07
target group has been created. Okay, created. If you click on the
51:14
target group, you can see anybody come in this target group with this protocol
51:20
on port number 80. Anybody come on this target group that is also like a load balancer on port number 80 with S3
51:26
protocol. In this case, okay, in this case they they connected
51:33
to any of these two targets. This one or this one. Okay,
51:40
this one or this one they connect to any of the instances right now if you see uh instance is
51:46
unused is still unused and your target group is
51:51
not associated target group is a way to manage technically it will do load balancing
51:56
for you but you have to use the target group and target group is mostly used by your application load balancers other
52:02
loaders also can use but mostly they used by ALB okay so till the time you connect with
52:08
ALB Okay. Or till the time you connect this target group with your load balancers.
52:14
Okay. Instance this option doesn't come up here. It will be not associated. You will see or your instance will be
52:20
unused. So we'll we'll guys connect this target
52:25
group in the ALB zone. But let me create one more target group called target me.
52:32
Same way. So I'm going to create one more target group exactly the same way
52:40
is for instances and target group is for mail. This target group anybody come on HTTP
52:47
protocol with eight port number 80. Then this is the VPC we have same
52:55
protocol health check is same and here they will check with the SL mail
53:04
because I'm going to connect the mail server mail is working let's say in the mail this part
53:09
health checking maybe threshold two we check time or let me check four these I
53:17
explain all in very detail my yesterday class okay since everything is
53:23
Okay. And I'm going to connect two mail server in this target group. Okay. And
53:31
port number 80. So anybody come on this mail server port number 80 or whatever
53:36
port number they would be they will be to the load balancer in this target code. Okay. Include
53:44
and finally create. So based on the plan based on the plan these are the two
53:51
target group guys we have created even this group is using two instances but two is unused
53:59
because this target group is not associated with any of the load balances.
54:04
So this part is done. The final part is that is pretty simple is to create the
54:11
application load balancer. Only thing in the application load balancer that is very unique is the creating this rule.
54:18
So we have to create the rule there. Okay. So let's go and create uh u the
54:27
load balancer. So now we have two target groups. This is one and second. And in
54:33
the load balancer I have one that was we had created yesterday CLB classic load
54:38
balancer. But I'm going to create one more load balancer called ALB. Right. So
54:43
how to correct? [Music]
54:48
So for this let me use this one. Even though there's guys option called migrate.
54:55
So the older classical load balancer can be migrated to newer one. It's
55:02
called ALB. Okay. It's called application load balancer. If you want to migrate the older the option they have but I let me
55:09
create a new one. So create load balancer application load balancer we
55:14
have okay and guys this what they're talking about the ALB can be connect to lambda can be connected to instances all
55:22
things explained to you but let me create here the
55:27
application load balancer this my application load balancer for web and
55:35
for mail okay that's what connected this explain
55:40
to you. Do you want uh your load balancer to be public facing or
55:47
internal facing? So let me car with the public facing. So anybody publicly can connect. If you want public facing you
55:53
need to put in the public sub that so I explain to you IP work IP 4 IP 4 and six
56:00
both that's what be your choice. Let me go for IP4. Okay. And network mapping you guys know
56:06
this is a VPC. So my low balance is going to put in this VPC.
56:12
Okay, in this VPC we have two different um two different
56:18
um uh uh ages we have in this VPC. So if
56:24
you want to recommend your application load balance will do a high availability
56:30
then put this application load balance in both the both the
56:36
um you know ags so that you internally AW will put
56:43
ALB in two different uh AGs together so to give the high aability
56:51
okay if one of the A goes down they will interconnect to Next ALB. So internally this diagram
56:58
won't be one ALB. Internally let's say client is here and behind the client. Now they have two ALB.
57:05
One is running in 1 A, one is running 1 B. Okay. This will have a different IP
57:10
address. This will IP address. So how client will do the load balancing? So between this they will use the DNS of
57:17
always. So client always create DNS. DS will convert this name into this IP first
57:24
time same name into this IP next time. So DS will do the further uh load
57:29
balancing. I will talk a little bit more about in my upcoming DNS class for three.
57:35
Okay. So that's what DNS will do. But here in this um uh AG you have subnet
57:43
one. Okay. This is subnet we are using here. Okay. And in this VPC
57:52
right this VPC actually was wrong. We had creat I think this VPC actually. So
57:57
in this VPC okay this I'm using and this VPC I used
58:02
create two subnet. Okay if you can't put in the private I
58:08
told you yesterday because you want your ALB to be public facing. So ALB have to
58:14
put in the public subnet where we have a internet cable. So I have to put into public subnet. Okay, even though if you
58:21
put a private they give this warning here. Okay, you put into public submit.
58:27
Okay, and your ALB uh is a kind of server program or kind
58:34
of device. So we require IP address. Why? Because when the client hit to the
58:40
DNS name, the DNS will convert into this IP address or this IP address. So they require some IP address. So this IP
58:46
address is been assigned automatically by uh that is a public IP obviously then
58:53
only the current can connect. So this public IP is automatically assigned by AWS.
59:00
Okay. So you have no control assigned by AWS. It means it means
59:06
there's a possibility in the future after sometimes the IP might change.
59:12
Okay. So that mean there's no harm as such in some cases. Okay, because client will always connect to
59:20
DS. So let's say IP is 100 right now. IP is 200 is a public IP in the which IP
59:26
110 and 210 or 211 doesn't matter. Okay, AWS behind the scene update the DNS
59:33
report the DS name is won't going to change name would be always same. So
59:39
client will connect to this DNS name and DNS name will auto convert to the new IP address. So you don't have to worry
59:46
about this. Okay. But in some cases, okay, changing the IP address some
59:52
issues. Okay. Maybe especially client side you have some kind of firewall.
59:58
Okay. And if IP changing of your server or lower band servers, okay, then
1:00:03
firewall might block the remaining IPs. Okay. Uh so what I mean by this? I will
1:00:10
explain this concept a little more in detail. Okay. I'm skipping this part but this is the one problem we have in ALP
1:00:17
and that is the reason we use NLP network load balancer together in
1:00:22
network load balancer we have a way to we can give this IP address of my network load balancer there's the next
1:00:29
topic okay uh that is make it permanent so why we need permanent I will have a
1:00:35
discussion on this we'll discuss in some time but I just want to tell you here
1:00:40
they give the public IP to SM AWS. So there is a possibility they
1:00:46
will change technical client will connect because the username but they can change this
1:00:52
changing might create some issue in some kind of client side security fiber blocking. Okay. Now this is the uh
1:01:01
security group. Okay. So five rule that control the traffic effect to your load balancer. So our security group you want
1:01:08
to add. So let me use a security group that allow all traffic. Let me use web
1:01:14
SSH. Okay. My load ber right now
1:01:20
is working on some port number. So let me allow this one or maybe allow all if you have. So what I want to use u let me
1:01:29
use this one. Don't default. Let me create a new I don't know what what I have. So let me
1:01:36
create a new make it simple. Okay. So let's say my application load
1:01:43
balancer security group allow
1:01:48
allow all. Okay. This a part of my VPC. Same VPC
1:01:55
and add rule. I'm allowing for all traffic. You can change but let me all.
1:02:05
So this is my ALB load balances. So security groups
1:02:12
ALB description.
1:02:19
Okay. So let me refresh. And
1:02:25
this come up. My ALB doesn't come up. Why? because uh
1:02:34
I would like to trade in a VPC called 30
1:02:41
60. I think I trade in a wrong VPC. Security group should be part of C or CPC. Okay.
1:02:49
So I have to and we have to create the security group. Let me get one more
1:02:55
time. my ALB allow
1:03:01
ALB description and you have to create in a security
1:03:06
group of your VPC in rule is all traffic.
1:03:14
So guys this is the security group for your ALB uh load balancer.
1:03:22
Okay. So anybody come to ALB this is security group we have allow all right
1:03:30
that's what so we're going to hold allow all I use
1:03:35
now guys this is what the rule I was talking about listener and the routing
1:03:41
okay listener and the router so what this line means this line means
1:03:48
okay anybody who come to your ALB load balancer.
1:03:56
ALB load balancer. Anybody come? Obviously client will come. Okay. On
1:04:02
protocol HTTP, it is written here. On ALB port number 80 is written here. You
1:04:09
want to change, you can change also. Okay. So, ALB will send this traffic
1:04:16
or route this traffic. This code routing ALB will listen on this port number and
1:04:23
protocol number is called listener. This is what we write here. This is a listener we have. But after they listen
1:04:31
they will route this traffic. Let's go routing where this action we have where
1:04:39
they will route. Okay. So they will route this traffic to bagger group one tagger group two and
1:04:46
much more. Okay. So in our case you can create group directly from here but we
1:04:52
already created so you don't have to create again. So they send this defect to a different action would be these are
1:04:58
targets we have. Okay. So let's say I want they will send to
1:05:05
the target group called search. So search will be the target group you
1:05:12
will have. Okay. You want to add more listener. Okay. So guys this is fin rule one rule
1:05:19
we have created you want to add more listener. So you can add more. I don't want this right. Okay. Listen I want
1:05:27
only one. For example in google.com you have one listener only. Right. This is
1:05:32
the name protocol HTTP and the port number is 80 or 443. They're using this
1:05:39
list is one only but based upon the path they are
1:05:46
changing the target group or changing the app. Okay. So that's what I wanted. So listener I want only one
1:05:55
sorry I only one so there's no two listeners but in one listener anybody
1:06:01
come on this board I want to create a multiple rules. So this is the one rule we created and this rule is called
1:06:07
default excel rule default mean anybody come on this IP and port number when I'm a Google
1:06:15
if nobody type anything so default r what they connect to the
1:06:20
search okay actual name and the path is search only right the actual path but don't
1:06:28
nobody type this path then default will be default would be what or this called
1:06:34
homepage will what right is search so that's what they're talking about here
1:06:39
default would be this one okay but we add more so extra service
1:06:45
global accelator we'll discuss what is global accelator in the future classes but this is the submary we have I don't
1:06:50
think so any change we have to do more here uh no okay and that's all
1:06:58
right now your uh application load balancer has been created
1:07:04
It is taking some time on registering your initial instances in this
1:07:11
particular target group. Right now we are connected only one target group but we can create a more by getting a rule
1:07:17
how I show you. Okay. And then you'll be ready. Okay. So let me view our load
1:07:24
balancer. So this is what the referenced is when provisioning means that is because they are kind of
1:07:31
one kind of program only or one kind of instance only. So they are provisioning
1:07:36
okay and sometime they will create but right now if you see here
1:07:42
this load balancer has been given a DNS name the same way I show you yesterday. Right now if you try to connect with
1:07:48
this name with this name nothing will work as such because they are still
1:07:54
launching behind the scene. Okay. By the meantime they're launching. Let's see something. So current detail of this
1:08:01
load balancer is a application load balancer internet facing running in this VPC
1:08:09
because I'm putting this ALB in the two AS means by default they are working as
1:08:15
a high aability right and security group this is what added okay so this is
1:08:22
security group for my ALB but we can rest it because this ALB running on port number 80 so I can say anybody come on
1:08:29
port number 80 that's what allow rather you allow all you can change and these are some other details
1:08:36
now uh if you see here the main thing of this particular ALB is
1:08:45
the listeners okay this ALB is only listen on port
1:08:51
number 80 mean this port is available for HTTP and by default rule
1:08:58
is we will forget uh sorry we will forward to this target group this is the
1:09:03
by default rule we have okay but I want to create more rules
1:09:11
okay the rule will be the way I show you already if somebody come and SL mail then different target go somebody come
1:09:17
and less they move to different uh target group that's what I want to
1:09:23
create but before this let's first they come become active active now become
1:09:28
active right and they go to description they are active but behind the scene
1:09:35
they connected to this uh target group so if I open this particular target
1:09:40
group target group this is called what character starts or
1:09:48
something like this so this target group okay
1:09:54
if I see let me close this target group. If I open this target group guys, last
1:10:01
time you can see the message was unused too but now it is too empty and empty.
1:10:06
Okay, because this target group is used by this application load balances
1:10:12
and this because in this target group we have two targets. Now both the target is healthy because we check the health
1:10:18
check everything is working fine. In the future this target group if they think
1:10:23
there's a lot of load coming up they can add a more instance they can add a more with register or we can also remove
1:10:30
that's called dre register so that can be done adding more is called scale out
1:10:36
removing something is in your in your you know target group or in the in your
1:10:43
load balancers is called scale in. Okay. So we can do scaling out and scale
1:10:49
in as per your demand and requirement. I am doing it manually here but when I
1:10:55
start the next topic maybe tomorrow class uh then autoscaling concept will
1:11:00
automatically do by checking the realtime uh traffic and other decisions.
1:11:05
Okay. So this is what we have. Now if I go back to this
1:11:12
um ALB and if you try to hit this particular URL
1:11:17
okay you will see I connect to this URL and now we can see this message
1:11:25
okay why this message come up because right now okay let's say this is the
1:11:30
google.com okay and in the google.com
1:11:36
uh where you type slash Yes. Okay. So they will connect to the by
1:11:42
default application that's in the Google desk called search. Same way it is connect to my by default application and
1:11:49
by defa application is this one in the B guys whatever the homepage they
1:11:56
have they can homepage by chance in this application. Okay, I have two different pages
1:12:05
that I created. One yesterday guys by SL SL and today I created SL search.
1:12:12
Okay. But because my client is typing slash so same slash go to my back end
1:12:20
and the back end all right if you any program sl they be kind to the what this
1:12:26
message was coming from the instance what I created yesterday but let's let's search
1:12:35
search okay you see guys they are trying to find and search And now they are
1:12:42
connected to I am Google. Okay.
1:12:47
But if you also want same data coming in SL so that is actually we can take a
1:12:52
rule or technically it may be done by the developer or the instances who is managing.
1:12:58
So in the server they can write and become some here or here. So by the same data so that can also so the multiple
1:13:04
way to do it. But yeah it is working. That's what I'm trying to tell you. It is working here. So anybody come to SL
1:13:10
search like google.com this name is google.com/s search the head to this instance if I
1:13:17
hit enter they move to this one if I hit enter a b a a b perfectly guys
1:13:26
they're working fantastically it's working okay so it means
1:13:33
it means anybody come on my application load balancer they balance the load but
1:13:40
before the balance the load they will first send your data to respective target group and then they do by doing a
1:13:48
balancing between the instances it will be most like what we have done yesterday
1:13:54
okay but the interesting fact you will find when we test less male
1:14:00
then it will be more interesting okay if it says male in this case right
1:14:08
now What is happening? What will happen? It will say no found.
1:14:13
Why? Because they are finding SL male again in the same target group. Because
1:14:18
right now I have only one rule that's going to def rule. Every top traffic is going to the same target group and in
1:14:26
the same instance they're looking for SL mail folder mail program that is not exist.
1:14:32
That was the error is coming. Okay. Even though in this first target group, if you create a folder as mail
1:14:38
and put the indies, it will open. Okay, it will work. But that's what
1:14:44
that's what I don't want here. I want anybody type SL mail, it will go to
1:14:51
different set of servers maybe by different team or different target groups.
1:14:56
Okay. And for this we have to create a rules. Okay. So how to get the rules? So for
1:15:05
the rule you have to go to your ALB in the listener. The default rule is always
1:15:12
send to the traffic. Any traffic doesn't match.
1:15:17
Any rule doesn't match. For example, mail is not matching. So they all send to your search target group. Okay. So
1:15:27
default means any rule doesn't match always send to default. Okay. You get things this is like a last get result.
1:15:34
Anything doesn't match you send here. Okay. But I want to create more rules.
1:15:41
Okay. Node listener more rules. So this option here view and edit the rules.
1:15:46
Okay. In your ALB only ALB. This is the duty of the ALB to create the rules. So here I'm going to create more rules.
1:15:54
And this is a before rule we have. Okay. And we'll say anybody come on port 80
1:16:01
if request otherwise not routed it means in any of the cases the request doesn't
1:16:07
match okay they always send to this target code 100% of
1:16:14
okay but I want to create a more rule so there's option guys in the top plus if
1:16:22
you add in the plus okay then here we can add a rule called
1:16:27
insert. Okay. And then click on the insert. Then this page come up.
1:16:35
Okay. And in this page we can write a condition if and then if this traffic
1:16:40
match then do this. If somebody sends less email
1:16:46
in the path routing on the path or the route then if this match then
1:16:55
send this to target code this if and so if and then
1:17:01
okay and if you don't add any condition by all match
1:17:07
okay if you don't type any condition in the if it means all the traffic should match and where you want to send the
1:17:14
traffic then we can use that then let me add a condition in that if if these are
1:17:21
options we have if the IP address of my client is this one so we can also set it in this way
1:17:27
okay the one of the great example would be you maybe um you you have some
1:17:33
specific client or some intel clients okay and maybe some client based on some region or country and you say if any
1:17:40
clients come from this region or this country there are some IP range in some countries come from these IP send this
1:17:46
data to this website let's say IP is coming from India then uh send this
1:17:54
request to some app that is written in Hindi as a language then tag will be
1:18:00
Hindi okay and query string what query string I told you already anybody send
1:18:06
something in the query string let's say send to this target group or somebody send in the HTTP header method send
1:18:13
here. Okay. So almost whatever in HTTP header
1:18:20
source IP par header grammar method. Okay. You can check this.
1:18:26
Okay. Because this application load balancer they have a capability to check the application header specially
1:18:34
and accordingly they check this. In our case, I want to check the path
1:18:40
and path is if somebody types SL or SL also SL mail or maybe let me write
1:18:48
SL mail or SL after SL also have both have the different meaning. Okay. So anybody
1:18:56
type anybody who type this can be more. Okay. In this case, okay, I
1:19:03
want if this is the case match in the path this route, okay, then my action
1:19:09
would be I want to send to or redirect to or to fix fix response. So, let me
1:19:16
forward to okay forward to uh target group which
1:19:23
one that we can choose this we have created. So it is sent to the target group.
1:19:31
Okay. Cook. So that's what we can do. Even the one more powerful thing we can
1:19:37
do here. Okay. This is very very interesting concept. So even though guys
1:19:43
we are not in the DevOps track in the DevOps track we discuss this kind of concept a lot. Okay. So now normally
1:19:50
what happen guys your applications keep on changing multiple versions is keep on coming up.
1:19:56
Okay. And what we do, let's say one version of my mail server running here
1:20:01
in the target group number one of the mail when my older version working with
1:20:07
multiple computers are running here. Okay. Everything working great. Okay. But let's a new version of my mail
1:20:14
come up. So we can launch some more computers. Okay. For the mail server with a newer version of mail app. And
1:20:22
let me give target group number two for mail. But this newer version has no guarantee.
1:20:27
There might be some bug. So there's a multiple different strategy of the deployment.
1:20:34
Okay. One of the strategy would be Kandry deployment. Kendry
1:20:39
means some of the traffic you can send here not all. Maybe you can say 1%
1:20:46
traffic you can send here and remaining 99% you can send here. And based on the
1:20:51
one from public feedback you can further plan to to send the all the 100%
1:21:00
in the new version. Okay. So that kind of level of planning also
1:21:06
we can do here. So we can add one more target group. Let's say this tiger male one male two and here we can
1:21:14
write the distributions. One means 100% is 2% but we write let's say 0.99
1:21:21
okay or is actually number between some any number let's say this is 99
1:21:26
and let's say this is one okay so out of 100 99 + 1 is 100 out 100
1:21:33
this is 99 is 99%. So 1% traffic go here let's say the mail version one letter is
1:21:39
one and 90% will go to mail number one two version the older one
1:21:47
okay so automatically anybody come to SL male or SL
1:21:54
okay they will move to different different target group but 99% older one this mature app already tested and newer
1:22:01
app just to text check overall further checking.
1:22:08
So these are kind kind of concept we use in devops world devops world uh deployment world or s sur or you know
1:22:17
for the strategy planning we can do I'm just giving this extra information normally in the devops track if you go
1:22:23
in advance these are kind of come a lot right now I don't need this but even
1:22:29
though guys if you do this this what it will do atomic for you but I don't require to do yeah
1:22:36
okay so this is what I create one rule
1:22:41
and if I come here I want to send to this guy. Okay, this target save.
1:22:49
Okay, similarly I want to create one more rule. Even the by default guys everybody would go to search but it's
1:22:55
not a good thing. Okay, search a different app all together. So I would like to create a one more rule.
1:23:03
Okay, insert a rule here. Anybody who come in this path math go/
1:23:11
search or maybe SL search/
1:23:18
in this case I want to send and forward to this guy to uh to my target Google
1:23:26
search. Okay. And any part that doesn't match
1:23:35
they will send to bio for search only. This is what the Google has used behind this. So anybody type CL/ search they go
1:23:44
to search. Anybody don't write anything by Celeste they will go to search
1:23:49
something like this they have done. Okay. So that's one point. Let me add one more
1:23:55
rule. Somebody might also try to go to this path. Let's say this is
1:24:02
the slash login maybe but it's or it's not there. Okay.
1:24:08
So in this case somebody t to say login authent I want to give a fixed message.
1:24:14
So without any of the target you can send a fixed response with some response
1:24:19
code also what response code you want to send because for browser header different responses different message.
1:24:26
Okay. So let's say you want to send refer 543 and say uh you are not allowed
1:24:33
to go here contact department something like this
1:24:38
text message HTML message right what kind of message you want to send that will be your choice okay this also can
1:24:46
be done so like this there's lots and lots of rule we can create and rule guys
1:24:51
again we read in the order first the rule array is If this rule match they will do this
1:24:59
okay then they don't go in the next line but if this rule doesn't match then check this if doesn't match check this
1:25:05
if match they will go here and do the things okay if this doesn't match then they go to last one this is the default
1:25:13
one okay so this is how they work okay so
1:25:20
these are guys these kind of rules you can create a lot okay and multiple Different conditions and also you can
1:25:26
write okay total number rule per say 100 these are conditions you can have we
1:25:32
have here in so this is guys the different different rule we have created
1:25:40
okay and you can also write a rule in between also if you think any rule you have to do before mail
1:25:47
you can do before also the rule will check in the order 1 2 3 any rule match first then they don't go in the last
1:25:53
line so this rule is work for my this ALB only for this listener.
1:25:59
Okay. Anybody come on port number 80 then this rule match. Anybody come on different port number this we will have
1:26:06
the different rules we can create and we can use we can you know reordering the rule by this arrow also we can remove
1:26:13
the rule all the things you can do. So let me go back now in this load balancer.
1:26:20
Okay. Now we have a one listener.
1:26:25
One listener and in this one listener. Okay. We have a rules
1:26:33
and in this one listen these are the rules we have. It's like if or else if as if else as else as if kind of
1:26:42
okay now this level of power we have in ALB. That's what I think we understood.
1:26:47
Now anybody come to my SL search
1:26:53
they can hit to my my search you know A and B A and B
1:27:02
working very much fantastically. It means they hit to my the
1:27:08
group number A this one.
1:27:14
But if anybody type SL mail,
1:27:21
okay, the hit to my mails here, mail number B A B A. So they hit to my mail
1:27:30
programs here working very much. Fantastic. Okay. If anybody type by chance they try
1:27:38
to login you want to send some messages there's no target group but one custom
1:27:44
message will go your page you can also create there will go to them but anybody
1:27:50
type anything okay in this case they will say you are
1:27:58
not fault but we can create some wild card also there any type something
1:28:04
anything we can create a wild card in this case um uh they will go to this
1:28:09
page. Why anybody come to my homepage stress? Okay, they come to my uh search because
1:28:17
I make my search as a default. Okay, search and s whatever the homepage
1:28:22
you have you can collect. Okay. So this is the guys about the ALB.
1:28:29
So almost all the main concept of the ALB I explained to you and this is a very detailed uh plan rules we have
1:28:36
created. Okay. And if you know if you go to your your target group also now this
1:28:45
male target group guys is also been enabled. Okay.
1:28:50
I don't know why it's not showing unused. Yeah it's healthy. It's healthy right. So that's all guys. So very very
1:28:57
powerful practical very useful and very much uh usable for
1:29:03
the real world. Almost everywhere we use this kind of load balancers.
1:29:08
Okay. So that's all guys about application level load balancer. Now there's one more level load balancer NLB
1:29:14
and GLB or G load balancer I can say. So in my next class I will quickly cover
1:29:20
this load balancer. After having this information then remaining load balancer doesn't take much time and there's some
1:29:26
more basic concept we have here sticky bit and something like this we also cover tomorrow then we move to uh
1:29:32
autoscaling groups. Right. That's all for today. Any query if you have you guys can ask me.
1:29:42
So excellent session sir. Thank you again very much.
1:29:54
So
1:30:00
person you asking enabling DNS host name auto shelling IP. Actually enabling DNS
1:30:06
host name is required. Uh if guys if your enabled DNS host name is not
1:30:12
enabled in the VPC then while uh while um
1:30:19
what I say launching the load balancer they will fail they might not work because load balancer have to assign
1:30:27
DNS name to your load balancers but in your VPC
1:30:34
if the DNS name uh enable enable is not there in the VPC
1:30:39
it will fail. So please go and check in the VPC does enable DNS is enabled or
1:30:44
not. In my case is I already enabled while explain the D VPC but go and check
1:30:49
in the VPC for this
1:30:55
it is better engineX actually depend different depend somebody asking me this is the cloud hosted solution right they
1:31:02
might be using engine X behind this we never know right but engine X or
1:31:08
something like this like H proxy engine X that is a product that we will put in our one server to create our own load
1:31:15
balancers. Same thing we can do with engineext also. The only difference is these
1:31:20
products we will create and or configure in our own setup and we are going to manage ourself
1:31:26
[Music] manage I will give some idea on SSL in load balancer in my next class.
1:31:36
uh nitu VPN is not the part of uh we have basic discussion of VPN in this
1:31:42
training we'll do like overview but VPN is actually the part of security class
1:31:48
and so advanced security class we will norally discuss the VP VPN there but there's some basic overview I will
1:31:54
definitely do in this class SCS level [Music]
1:31:59
okay what is stickiness or group level stickiness me in my next target tomorrow when I explain you stickiness I will
1:32:06
explain you what is good level stickiness also.
1:32:19
So you'll get don't worry. Uh even though
1:32:25
guys I think pitum announced today for the students for our meet on second and
1:32:30
third July or in second July. Uh so we'll discuss maybe after meet or
1:32:37
sometime uh some extra aura give you and having the proper aura with everyone
1:32:44
will give extra power and energy. Okay. So we never know how we get power and
1:32:52
energy for our for perfect life.
1:32:57
So that's all guys. uh we will u start uh we'll see you tomorrow with next
1:33:04
topic against the continuity of this topic only by take care see you
1:33:17
so you can create this kind of rule the way I show you today if any of the
1:33:23
system go in the maintenance mode or entire target group then you just come
1:33:28
here change the rule that's what you can do and say now anybody's coming in SL
1:33:34
mail we will send a direct message okay message will be contact to administr
1:33:39
something like this now having this load balancer something you have to do in the
1:33:44
maintenance mode will also very much manageable right so that's all bye guys
1:33:50
take you good

