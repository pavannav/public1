ript


0:03
So guys, uh welcome back and uh one more
0:22
minute guys. Okay, so guys let's continue with the next part.
0:28
So last class guys we have uh discussed about u load balancer right and one of
0:37
the very important load balancer guys uh that mostly we wanted to use always is
0:43
ALB application load balancer. Okay, one of the cool thing about uh
0:49
this load balancer is there's a capability to understand the application lab layer protocol.
0:57
Okay, especially the HTTP. Okay, and because of this we can create a multiple
1:02
rules where on based on this rule we can route our traffic to particular group of
1:10
computers that is called target group. Okay, that is one of the uh great capability of the ALP. That's what I
1:17
explained you in my last class in very very detail. Okay. But one more uh point guys uh that
1:26
can be a drawback of ALB can be a drawback of ALB uh would be
1:32
something like this. If you talk about the OSI layer of networking
1:38
and I told you guys there's a multiple layer layer 1, layer 2, layer three, layer four, five, six and seven. Okay.
1:46
any program any program that has a capability
1:52
to read your packet or network packet. So typically guys every packet has all
1:59
seven layers of the networking. They will go via some physical medium maybe
2:06
by Wi-Fi radio waves or electric current. Okay. Or either they have some
2:12
IP address this IP header uh TCP or UDP
2:17
header HTTP header. So every packets or I can say the network packets have
2:24
all the seven layers they go through. Okay, they go through all the seven layers right and it doesn't matter they
2:31
are TCPA protocol or UDP or any other this kind of protocols whatever they use
2:36
almost they go for all the seven layers okay but any program who wanted to read
2:44
layer four first they have to read layer three then they can reach to layer four
2:50
any layer who wanted to read a packet layer seven so they have to read all the
2:57
layers up up and up and up they go and then finally they reach to layer 7 and
3:02
they read the layer 7. So anybody who have done anytime a
3:07
network programming or network socket programming they might know this but
3:12
point is more deeper you go in the packet more data you have to read more
3:20
time it going to consume for program to read. It means if your program is going to the
3:27
application layer in the packet it take much time. Okay. And when they take much time it
3:34
means the overall time of reading the packet because till the time you don't read the packet how can you create the
3:40
rules on that particular application layer. So
3:46
this program guys is I'm talking about the application load balancer. So in application load balancer guys whichever
3:52
program they are running okay for this they have to go inside and deep
3:57
into the packet okay and almost every packet and every time they go in deep in
4:02
the packet till the application layer so overall reading the packet will take lot of time and then only we can they can
4:09
create see the rule and accordingly they route the traffic here or there
4:15
okay so so technically what I'm trying to tell you here is
4:20
In application uh load balancer right it
4:26
it take a lot of time always to read the packet that makes this application load
4:32
balancer on balancing the road balancing the load okay uh become uh it get lot of
4:40
latency I can say lat means the delay it will impact the performance of the
4:46
networking and overall performance I can So here the latency is very very high comparative
4:53
to other even though they as make this thing very super faster compared to the
4:58
other the protocol other product in the market but technically if you try to compare this latency is very high right
5:06
high means more delay they have okay that easy reason what that is reason
5:11
what they come up with they come up with they come up with one more type of load balancer where they intentionally make
5:17
that load benser latency very very low means quickly they can read the packet
5:24
and quickly they can route the traffic according to the target group.
5:29
Okay. So if you want uh uh performance
5:35
in the routing or the load balancing or if you want latency to be very very low
5:42
if you think there's a huge traffic is coming maybe hundreds and thousands and millions of requests per second is
5:48
coming directly using the ALB is never the right choice. Okay to to have the
5:55
low latency load balancer then the then then the NLB come in play network load
6:02
balancer come in play. Okay, the cool thing of network load balancer is they work at the network layer that is mostly
6:09
the layer number three sometime layer number four also that is one of the cool
6:14
thing of the network load balancer they won't go to the application layer
6:20
okay and because they won't go to application level so any HTTP header kind of rule you can't create an NLP
6:26
that is one limitation right but the that is not the main moto of the NLP NLP
6:32
they created in such a way that so that you don't have to go more deep into the
6:39
into the packet. So just by checking at the layer three or maybe sometime layer
6:45
four four we can check the load balancings right and balance the load
6:50
according to according to the respective target computers. Okay there the NLB
6:55
guys come in play. So NLB is again one kind of load balancer. The main moto is
7:00
if you think you have a huge load okay if you again let me use the AC2. If you
7:06
think you have a huge load and you want to serve these load maybe thousands of
7:12
millions of requests coming per second this kind of load you have then NLP is
7:19
the great choice to use. So this is the NLP I'm talking about
7:25
has to even though guys if you see from the diagram in ALB they're hitting HTTP HTTPS means application layer in NLB
7:32
they heading UDP and TCP means the transport layer or network layer layer three and layer four they are hitting
7:38
over here okay that what we can use but
7:43
again it is for ultra high performance all right that was the things handling
7:49
millions of request just set per second while maintaining the ultra high speed.
7:55
That is the main use case of the NLB. Okay. But now the point is
8:04
do you want speed then you can't go for the rules and
8:09
create a rule what I explained you yesterday. Based on the rule you want to serve the traffic here and there.
8:17
Okay. But if you want to serve the rule take a smart decisions okay then NLB you can't choose. So that
8:26
is a reason the good practice is normally it would be something like this. Normally what happen when we have
8:32
the client so the good architecture would be something like this
8:38
right we put NLB in the front of client directly. So client is hitting to the NLB.
8:47
Okay. And NLB has a capability to take millions of requests per second. They can take all the requests and behind the
8:54
scene NLB will load balancer the traffic to different different ALB actually. Now
9:00
here the ALB application load balancer can be used. It is compulsory. We can
9:06
connect NL NLB directly to our instances the way I see it till date. But this is
9:12
a great design we can plan. Okay. And in the ALB we have multiple target group.
9:18
So we have target group the way I explained yesterday or I can say last class. We have target group for S.
9:24
We target for meal. In the target group we have multiple instances running. In target group we have multiple EC2
9:30
instances running. Okay. So it will be something like this.
9:36
So this target group is having multiple instances. This this target has multiple instances of mail server and this can be
9:44
kind by this, this and this. Okay. Similarly, this can be done by this,
9:49
this and this. Okay, there would be a better design. In
9:55
this case, everything can be can be would be possible. Okay, the first thing
10:00
that possible is if a millions of requests come up and one NLB is more than enough to take these request rather
10:07
than uh discard any of the connection from the client. Okay, after having this
10:12
request NLB further distribute the load to different different ALB. Now ALB has a
10:19
capability to read application layer level protocol and based upon the
10:24
application uh rule they will further redirect the packet here or here the respect to
10:30
target groups. Okay. So let's say let's say we have 300 requests coming 100
10:37
requests go here 100 will go here and 100 will go here. Okay. And normally
10:43
guys typically if you compare ALB normally have as I'm
10:48
giving as rough rough exampam uh number here NLB ALB has guys normally latency of 300 millisecond and NLB normally has
10:57
latency of less than 100 millisecond it means out of 300 request let's say
11:04
NLB 100 handle 300 request then 100 100 these guys can be handled
11:10
okay I'm talking about latency It will be more or less I'm just giving a rough number here just to
11:16
just to compare. Okay, latency means delay. So this much time AL will take
11:24
and this much time normally NLP will take. So accordingly you can test your
11:30
environment you get you guys can maybe get less or more according you can plan number of ALB behind the NLB.
11:39
Right? So this is the idea. So otherwise otherwise
11:44
NLB is mostly the load balancer to give the ultra high
11:52
speed performance for the client and because this is a great architecture we have okay so that easy reason guys okay
12:01
NLP AWS given a capability in NLP we can use our own EIP EIP guys you know it is
12:07
a fixed IP address In ALB there's no way to fix the IP address. ALB whatever IP is given by AWS
12:15
is a assigned IP that can be changed but in NLB
12:21
okay we have a capability assign a fixed static IP that won't change what benefit
12:26
this mostly what happen guys in the real world or maybe in the corporate world okay let's say this is the corporate
12:32
enterprise we have they have lot of work stress in the corporates and normally
12:38
what they have they have firewall corporate firewalls okay and in the firewalls or maybe in
12:44
the sometime proxy they have a rule any traffic going out somewhere else we won't allow so
12:51
normally they have to write and allow some limited IP addresses
12:56
so if you use ALB and IP keep on changing in this case anybody from this corporate world try to connect IP
13:03
changing they won't able to connect the firewall or the corporate firewall block them
13:09
okay so normally what we have to do we have to again every time contact the security team and they will allow that
13:15
particular IP address if if it actually connect to the LP. But in NLP IP is
13:22
fixed and this IP we can give to the firewall team or the security team they will allow this IP address for the corporate so that anybody in this
13:30
corporate world they want to go out connect to this NLP they can connect that is also one of the great use case
13:35
of the NLP that is not possible in ALB NLB we can give the
13:42
fixed IP address and why they give this option because this is what the normal grid architecture we have okay we don't
13:50
allow So it's not good practice I can say to give directly give the ELB access to the public world. Why? Because of the
13:57
latency extra latency they have otherwise you can do it the way I show you in my last class. But I'm talking
14:02
about here the great practices and the best practices according to the need.
14:08
Okay. So that's what this idea is. So let me show you very quickly the even
14:13
though that this is what the NLB talking about ALB you can use or maybe you can directly go give the instance access
14:18
also. But if you want to create the NLB just click on the create give the NLB
14:23
name let's say my NLB load balancing
14:28
okay do you want to make it internet facing uh use it have the IP address put
14:35
in the VPC all the guys are same what I explain you till date I want to make the NLB my public right and here they have
14:44
option IP address now either you can take the IP from AWS that might change or you can take the elastic IP. Okay. So
14:53
in my Mumbai region I don't have the elastic IP. I go to my EC2 assign the uh
15:00
have the elastic IP and then assign over here. Okay. And again same thing here also we
15:08
can use the public and here also we can assign the elastic IP address in this.
15:14
Okay. This option was not there guys in ALB. In ALB only assign IP was there
15:20
that what I was trying to tell you in that class. Okay. But here we have both the options.
15:25
Mostly in this kind of use case what I was talking about we want to make the fixed IP. This come from EIP.
15:33
Okay. Right now I'm taking as one but you can go for EIP also.
15:38
Okay. Otherwise the concept are same here. Any traffic come on TCP guys.
15:45
There's no option for HTTP here. Why? because they are not working on application load balancer. So there's no
15:51
HTTP come up only TCP layer they work on any traffic come on port number 80 on
15:57
TCP because HT work on TCP only we will send this guy to target group
16:03
okay so let's say here the target group would be whatever you have you can put
16:08
so I don't have any target group okay because I assigned the target group in
16:13
this VPC yesterday that the target group may be useable but but you can create target group and assign
16:20
Okay, otherwise everything is same. Okay. So that is the guys one point but
16:26
in the tiger group let me show you very quickly when I creating the tiger group
16:35
target group now here we option we can directly connect our NLB2 directly to the instances the way I show you till
16:41
date this is possible if you want or you can connect to application load balancer
16:46
also this is what uh we have the diagram over here. Okay. So LB will connect to the ALB.
16:54
That is also possible. Okay. So let me give my my target group name my ALB target group.
17:03
Okay. Again they connect to the port number 80. So in my application load balancer guys we might have connect with
17:09
running with 80 port number. This is the VPC name. How to check the health. All
17:14
right. And uh next thing let me click next. Okay. Tell me the application load
17:20
balancer name or you want to add later that would be your choice. I already have the application load b I created in my last class working fine. Okay. And
17:28
create the target group. Now this is what the guys diagram created. So anytime you come to NLB there is to
17:35
alther distribute to the respective tiger group what I created in the last
17:40
class. Okay. Now here my u target tag group has
17:47
been created. This is called uh my ALB target
17:53
group. Okay. But here this guy is not assigned bit to any uh load balancer.
18:00
Okay. So he asking to create a network load balancer but I was creating already. So let me refresh. Now this
18:06
name come up. Okay. And finally this is the summary of
18:13
NLB. Now that's one thing CLB and ALB what I created till date is in a free TL this
18:21
service is free for whatever the time would be. But in a free tier account NLB is not free they will charge you. So if
18:29
you do this spectacle of NLB so just go in the check in the NLB pricing they will charge you that much amount. It's
18:35
not free in the free tier account. Okay. So you guys finally your network
18:41
load balancer has been created and this would be this kind of
18:48
okay this time maybe uh some of the part might fail because I have to check the security group also in ALB you have to
18:55
allow the security for the NLB or all IP address or NLB IP address or LB security
19:01
group. So this might the reason it might cause the the the error of connection or
19:07
the health check. Okay. Otherwise everything is right. Now
19:12
in LB we have this IP address. Behind the scene they assign to the AWS assign
19:18
IP address but we can make it fix also. That's what I told you. Okay. They still they they are provisioning the system.
19:25
Okay. And now after the provisioning right you can check the connectivity of the this
19:33
target instances. So these are listeners. it is connected to this particular target group and this target
19:40
group now has been assigned to this NLP that was I was talking about. Okay, this
19:45
status is is still assigning your health check is going on. Health res is in
19:51
progress. Okay, and this ALB guys, this ALB what I
19:57
created yesterday, okay, has been connected to the security group.
20:03
So you can check the security group what they allowing. So the security group
20:09
is allows
20:15
allow this inbound traffic that's allow actually. So there might be no such issue come up. Okay. So there's the idea
20:24
of when it will be nothing very very technical. Okay. But knowing the right use case is
20:30
very important that what explained to you when they active I'll show you it will working fine. Okay.
20:38
So that that is guys about NLP. Likewise uh we have one more type of um
20:46
one more type of um load balancer is a very very new load balancer. Okay. The
20:54
name is called gateway load balancer. Okay, the use case is very interesting.
21:00
I'm just explaining you the use case. Okay, because this topic is actually part of your advanced networking and
21:06
security. Okay, but knowing the use case is is is
21:11
that was we require in this level of training, right? So I something like this if this is the client.
21:19
Okay, any traffic come in. Okay, let's say we have a load balancer
21:25
maybe ALB load balancer and then we have a target group here one
21:31
target group number two they will send here and here depend upon
21:38
the rule. Okay. So ALB is a load balancer who
21:46
check the rule accordingly they they um send the traffic and route the traffic in respect to target group. But this
21:54
load balancer have no capability to do beyond this and they have no
22:00
capability to check any security related checks. Okay. What I mean by this normally you
22:07
know what happen when any traffic come from outside world. Okay, we don't know
22:12
are they doing any kind of attack or DOS attack okay or den DOS attack or maybe any kind
22:20
of further network attacks or sync fluid and other kind of attack they are trying to so normally what we have in the
22:28
corporate world we have a different security prevention system this is called IPS or IDS
22:34
these kind of security tools we have and some more security
22:40
security checking tools, okay, signature checking tools, multiple different tools we have. Okay, so mostly
22:48
what we want any traffic before they hit to ALB and they send to the respect to
22:54
target group, I want to check does they doing any kind of DOS attacks or any kind of security attacks. Okay. So what
23:00
I want any traffic that's come first they go here they check
23:07
if everything is good then I want this can be go to my internal application
23:13
load balancers okay but if they feel any traffic is
23:18
coming like a like a malicious traffic and something like
23:23
this then this tool has a cap they can drop it and they can block also multiple options they have Okay. So in this case
23:31
we have a lot of third party IPS and IDS and appliances available
23:36
okay that we can use to do this kind of security measures
23:41
okay but who send the traffic to these guys. So the here the the the option of
23:48
gateway load balancer or GW gateway load balancer come in.
23:55
So between your actual ALB or maybe you might have NLB also in the front of this
24:00
in the front of this before ALB and LB we have a gateway load balancer.
24:05
So what they do the traffic will be something like this. Now client will head to the gateway load balancer.
24:12
Now gateway load balancer first take this traffic send to the respective
24:18
security appliances or IPS appliances and devices.
24:23
Let them first they check the the security rules or secure tax rules. If
24:30
they allow then this traffic go again back to GB or gateway load balancer and
24:35
then further process will be same exactly the way it should work.
24:41
Okay. But in this case the GP is sending the traffic to these appliances and they
24:47
say no this is very secure dens network connections they block directly here. this packet won't be go to my Intel
24:54
network. Okay, in this kind of use cases, okay,
25:00
your gateway load balancer would be the one that can be useful. This one gateway
25:05
load balancer. So they send the traffic to this is the kind of security. So this
25:11
one the checklist or what are the comp security compliances whatever you guys
25:16
you have. Okay, there they also known as you know third party virtual appliances.
25:22
They support Geneva protocol means they have capability to get the traffic and
25:28
check and go back. So your security appliance have these kind of protocol support they will check the security
25:34
compliance policy controls and then only they send in to internal uh team or
25:40
internal systems I can say. Okay. So there's the GW
25:47
LP or load balancer is useful very very interesting otherwise initially it's very harder to configure uh this kind of
25:55
setup to first get the traffic into my security compliances then send to NLB
26:00
and LV was very very harder initially. Okay. Now because of this new service of
26:07
GB this this entire setup will be so much simpler. Okay. Right? Now if you
26:13
try to create will be almost the same almost the same
26:18
right but here here in the uh defactions you have to
26:24
send uh genome protocol gateway things although everything is seen you see but
26:31
you have to configure third party appliances for security okay then you have to test your target group
26:37
okay for example try to create a target group for
26:43
Okay. Then wherever instance guys you are running that has a this protocol support. Okay.
26:51
You have to connect this where in your target group. Maybe you're running directly on the load bench or maybe
26:56
running behind some apping load balancer that may be different point but this have should have support this. So that
27:04
is a part of guys of advanced security training. this topic but at least this much knowledge is enough to understand
27:09
the basic working of this particular uh load balancer that's so called GW or
27:16
gateway load balancer otherwise everything is same okay so as there's a three
27:23
so four different kind of load balancer I explain you everything okay apart from GW I I given you the entire practical of
27:31
all the load balancer ALB and B
27:36
ALB, NLB, GW, LB and CLB. So all those
27:42
things I explain to you in very much detail. Some of the small features also they have I will explain in some time.
27:48
Okay. And right now uh right now in my case the NLB is been active already. And
27:55
if you see the detail this is active. Okay. And if you see the
28:00
the listener here they are successfully connected to this ALB and here this ALB
28:08
has successfully been registered. See here it's been held.
28:13
Okay check if you check also is healthy. Now NLB is sending traffic
28:18
to application load balancer and we can use the ST IP also that I explained you already.
28:24
Okay. So uh that's all and if you go for NLB
28:33
okay the B bas is my last practical if my all last instance is up and active
28:39
and my target is active then you can use this link of NLB
28:45
okay and this is super fast ultra super fast to connect the instances
28:51
okay guys was it was actually up here it was working very much fine
28:58
very much fine what the instance they connected based upon the rules so this is the the this is what I I
29:05
almost something I created the setup here in this level of trade okay but I think you understood the idea
29:12
and the good thing is if you know how to do performance testing load testing on the networking if you belong to that
29:18
particular team right check the D traffic on NLB
29:25
see the performance instead for ALB see the performance you'll see this huge difference going to come up so that ultra ultra fast and very very less low
29:33
latency when they work on NL that is a good use case of the NLP
29:38
okay so that is one topic we have the
29:45
some small information about load balancers like a sticky bit and much
29:51
more thing small information I will show you guys explain in my upcoming discussion.
29:56
Right now today guys my plan was to talk this topic and also my plan was to talk
30:02
on the topic called auto scaling group that is very important topic autoscaling
30:07
group. Okay. Uh I thought to start this topic and almost try to cover this topic
30:13
but right now guys uh my current uh I I feel I'm feeling good actually. I I'm
30:20
feeling that that point in time right now. So I just want to uh conclude my today's class right now here because I
30:27
feel I'm not able to speak much and not feeling good also of some because of small health. Um uh
30:34
so I just want to conclude my today's class here in my next class I will start
30:40
this topic autoscaling that is very important topic plus some of the features of loads I will explain in my
30:45
next next class. Okay. So that's all guys. See you in next class and bye.

