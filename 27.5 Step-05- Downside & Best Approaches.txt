# 27.5 Step-05- Downside & Best Approaches

-: Whatever the canary deployment option,whatever we have seen is nothingbut a service load balancingwith the selector send in labels.But what should be the downside of this approachand then what are the effective best effort optionsavailable in the market,we are going to look into in this two steps, okay?So let's go back to our presentationand if you see here,the downside,what is there is,we are going to discuss now, right?So let's consideryou are going to have PR 50%and then canary 50% distribution you want to dowhich is like your live running environment 50% distributionand then canary and environmentyou want to distribute the traffic 50%.So with out of the box and Kuberneteswhat are the options available isonly playing with the number of replicaswhich is nothing but number of pods.So let's consideryou have one part for PRDand then one part for canary.So you can have 50-50 distributedor two parts for PRDand then two parts for canary,you can say 50-50 distributed.In the same way you have a casewhere you want to distribute 75% of your traffic to PRDand then 25% of your traffic to canary.So if that is the case,definitely you need to have four parts in your deployment.So 25 for this one,25 for this,and then 25 for this,which is nothingbut three parts for prdand then one part for canary.In the same wayif you want 90% traffic distributing for PRDand then 10% for canary,in that caseyou need to have nine parts for prdand then one part for canary.So like this based on the number of percentages,means like based on the percentage distributionhow you want to distribute between canaryand then broad environmentsyou need to play with the number of replicaswhich is nothing but pods.So which is,which will end up in incrementally increasing our portsand then the distribution might not be as easyand all these things.But if you are dealing with very less amountand then minor amount of ports and then stuff,this will give us the benefitinstead of going to complex structured environments like,istio AWS app mesh, okay?So these are not easy,they are definedand then they are evolving.But what I have seen with AWS app mesh or anything.So things are not straightforwardand little bit complex.So whether we want to increasethe complexity of our application,then we can enter into these service mesh concepts.If we are in need of those things for our applications.If really not in the need of those thingsare the features they're providingis not really needed for us todaythen we really don't need to go there.If things solve with the simple thingsthen try to solve it in a simple way.Now let's go to with the AWS app mesh or anythinghow it is going to look like.So if I say broad 95% and canary 95%, okay?So still, or for only a single partthe 5% traffic will be routedand if it is broad 70% in canary,30% also still whatever the traffic comingit'll try to route the from the entire traffic.30% it will route to the canaryand 70% to the remaining ports.So if you see herein both cases the number of ports doesn't changebecause the respective AWS app meshwill sit in front of these respective portsand act as a NY proxyand then decidehow we need to send the traffic to these things.You'll have app mesh related gatewayand then our,you can call it in Kubernetes terms ofAWSs app mesh controllerand then you'll also have NY proxyin front of this each parts sittingso that they will control the traffic,count the trafficand then control to this parts.In the same way,even if you want prod 20% and canary 80% alsostill this deployment might work for youwith only four number of parts.Only thing is this,this part is going to get overloaded.So at that time maybe you will saythat canary three replicasand then PR only one replica.So like that also we can change and use itbut on on a overall basis,whatever maybeyour percentage of distribution of traffic for prdand canary are changing.You really didn't change the number of pros in this parts,in this entire design.So that's the beauty of using the AWS app mesh or Istio.So the best options for doing the candidate deploymentsis Istio which is open sourceor AWS app MesH,AWS version of istiowith UI and then lots of stuff integratedwith AWS other services.So that's about canary deployments end to end.So in our next section we'll pick up another topicand then move on.So I'll see you in the next lecture.Until then,bye-bye.Thank you.