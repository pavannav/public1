# 29.2 Step-02- Install VPA Components & Sample Demo Application

-: Welcome back.So in this lecture we are going to work on step twostep three and then step four.So as part of step two we are supposed to havethe metrics server installed on our Kubernetes cluster.So metrics server we have already installed as part of HPA.So if you want we can go ahead and then checkthat Kubectl, get ports, hyphen N, which is in kube-system.We have it.So let's verify in kube-systemand we can see that metric servers happen running.So the next thing is we are going todeploy the vertical port auto scaler.So to do that we need to get clone auto scalerKubernetes Auto scaler, git repository.So we will come out of our existing git repositoryand I'll try to create aVPA demo folderand we'll go inside thatand then we'll git clone this repository, right?So once that is done we are going inside the VPA folderwhich is nothing but vertical pod auto scaler folderand then we are going to install it directly.So to uninstall it is VPA down dotand to install it is VPA up dot.So let's wait for it to complete.So we went inside CD auto scaler, vertical port auto scalerand then to install we are going to use this option, right?So let it install everything.And once installed we are going to verify the ports presentinside the kube-system name space.So it installed.So let's go aheadand then verify the VPA ports in kube-system, right?So now we can see VPA admission controllerVPA recommender and then VPA updater.So three parts are already running nowas part of whatever the VPA deployment we have done.So in our next step we are going to reviewand then deploy our application manifestwhich is deployment and then service inside that.Those are going to be a standard deploymentand then service.So in EKS VPA, vertical port auto scalerwe have two kube manifests.Inside that demo application is zero oneand original VPA manifest is zero two.Okay? So it is a standard kube Nginx deployment.Simple kube Nginx file with replicas as fourand to export it with NodePort serviceand internal Cluster IP service alsoIt will be available like thisbut this one you can access externally onlyif your cluster node groups are presenton the public subnets.So my cluster currently is in private subnets.You really don't need to access it externallyto generate the load.We generate the load using Apache bench containerand then pod inside the cluster only.So, but just for a names sakeI have created it as a standard so we can leave it as is.So now the important point to discuss insidethis is the resources section, okay?So in the resources sectionfor vertical port auto scaler we are telling meanslike we are telling the Kubernetes that we are going torequest a CPU as this much and then memory as this much.So these are very, very lowif you see for any container or any port, right?So these are very, very low five mb.And then what is0.05005 CPUwhich is very, very less, okay?But we are going to put very minimal to our applicationand then how our auto scaler vertical portauto scaler is going to performance tune your applicationwhen we put the lot of load on our applicationwe are going to see that.So to practically demonstrate it, we have reducedour memory and CPU requestsfor our deployment manifest to be very minimal.So now let's go back here.So that's what I want to discuss as part of this sections.So now these are the requestsand the limits we define in our VPA definition.So when we are doing the VPA definitionwe are going to discuss that.So let's go ahead and then deploy this.So this information I need to update a little bitjust give me one second.I just changed the pathof our application where it is located.Okay? So it is present in kube manifestand then my file is zero one VPN demo application dot YAML.So let me go ahead and then deploy thisso I can deploy from wherever it is kubectl, right?So we can deploy it. Okay?So only one thing is like we are notin that locationwe went to the vertical port auto scalerwe have cloned the repository and present there, right?So we'll go back to our course repository, right?So I'll come backand I'll go to my course repository main folder.And inside that I need to go to 16, which is nothingbut EKS, VPA, vertical part auto scaler, right?So now I'm going to deploy my application, right?So this looks good.So I'll say kubectl, get port SVC,deploy all the stuff.Okay, so now if you see we have the VPA demo deploymentfour ports are running, okay, all are up and running nowand it's SQL VPA demo service NodePort service with theinternal Cluster IP with 80 also available for us.So deployment four by four ready?So now describe one of the pod here.Okay, kubectl describe and then pod.And then this is the pod we want to describe. Okay?So I'll say any oneof the pod from our VPA demo, right?So if you see here the current informationwhatever we see is it has requested five Mand then five MI for our CPU and then memory.So just make a note of thatand then we'll see later what happens.So now we have completed the step four also.And this one if you want to access your applicationyou can access only if your application isin public subnet means like if you're cluster node group.So our cluster node group is in git nodes hyphenoh, why it is in private subnets.So we really don't have any external IP, so that's fine.Okay? So this step is optional.Why? Because our test is mainly related to VPA resources.We can ignore this.Okay? So in our next lecture we'll discussabout create and deploy our VPA manifestour review and then deploy our VPA manifestand then move on with the next steps.So I'll see you in the next lecture.Until then, bye bye.Thank you.