# 8.5 Step-05- Create Kubernetes Liveness & Readiness Probes

-: Welcome back.So we have just now completed step 0.1,Introduction for Liveness and then Readiness Probes.So now let's see what these are,and then how we are going to define themin our user management deployment manifest.Okay, so we are going to createboth liveness and then readiness probes.And the Liveness probe we are going to define using commandwhich is nothing but liveness probe with the command SH-Cand then necat-Z localhost 8095.And for Readiness probe we are going to do itwith HTTP Git and then pathwith our same user management health status URL,whatever we used to test earlier, right?So the same thing with port S 8095.And we are going to also provide initial dealer secondsand then period seconds.So we'll see what are those things.Usually initial delay secondsare nothing but number of secondsafter the container has startedand before Liveness or Readiness probes are initiated.So the amount of time after container startedand then Readiness or Liveness probes to be triggered.So the difference timehow much it need to wait before triggering these probes.So the reason for that is once we start the containerjust for the application to settle down,start and then settle down,we can give some amount of delay, right?So usually 10 seconds or 30 secondsor 50 seconds or 60 seconds, okay?So default is usually zero secondsmeans that default is zero seconds.And then minimum value allowed here is also zero seconds.But the core thing here iswe really don't want that edge to be givenand then it got failedLiveness probe, Readiness probe to be failed.So usually we'll give 10 seconds to 30 secondsbased on our application.But for our demo I have given 60 secondsso that until and unless these 60 seconds are completed,you are not going to see that the parties running.It'll not come into the state ready state.Okay? So always it'll be showing zero by onenot one by one in the ready state.We are going to identify that now,to differentiate that or to show that,I have put 60 seconds here.But in general, based on your application,you can put 10 20 or 30 seconds.Okay? So let's go ahead and then define Liveness probeand then Readiness probe in our application.Okay, so here is the thing.So now if you see here, so it is a image level,means like container level definitionthis Liveness and then Readiness probes.Okay? So here name,you see right name image portsand then raw methodthe same level we need to write our Liveness probe.Okay? So I can say Liveness probe, okay?I can minimize this and then now go upand then start writing for the Liveness probe.Okay, so it can be nowfor the Liveness probe it is going to be right.Execute the command.Okay? Soexecuteand we are going to have a command.Always I'm typing taband we are going to have three commands.Okay? So one is Ben asand which is going to be hyphen C, right hyphen Cand next is nnc hyphen Zand local host8 0 95, right?And another thingwhich we need to implement under Liveness probes, okay?So there will be accept, it'll exclude this commandand also it'll add the initial delay seconds.Okay, so which is going to be 60 seconds, okay?And there will be one more call period seconds, okayso which is nothing but how often in secondsto perform the probe default to 10 seconds.So every 10 seconds we will do the Liveness probe checkand then also the Readiness probe check.Okay, so we can say period secondsand then then in addition to these two thingswe will also have some other timeouts here.Okay? So there will be a documentation link hereexactly to the site.So if you see here at the end, you'll find other stuff toowhich is nothing but time out seconds,number of seconds after which the probe times out.Default is one second.Minimum value is also one unitto provide successful thresholds,minimum consecutive to successfor the probe to be considered successfulafter having failed or failure threshold.So like this, if you want to stillexclusively define other stufflike timeout and then success thresholds,failure thresholds,you can go aheadand then view this documentation linkand then add those.So for now we are giving initial delay secondsand then period seconds.So in the same way we are also going todefine the one more thing which is Readiness probe.Okay? So I am going to copy paste it,one we already have live written it, right?So another one we will try to copy paste it.So it is the same one-one is Liveness probe and next is Readiness probe.And here instead of execute commandwe are going to use hast t p get in hast tpi get.The core thing is to which path itneed to find it and port which one?8 0 9 5.So we have the user management health stage,health status page available in our application.So we provided that and port,and if you want you can define your host here.But default host is going going to the part IP only.So we really don't need to define that.As usual we'll have in she delaysecond sender period seconds.Okay? So anyway, Liveness probe we have defined herebut we can't test that.The reason is like our application,we are not crashingor we are not taking into any deadlock situation, okay?So we cannot replicate that in this respect to demo.But for Readiness probeyes we are going to see thatwhether after the container got started,it is going to wait 60 secondsto make the ready state of the container partto be one by one.We are going to see this descendant understand that.Okay, so let me save this.So I have saved it.So now we are good.So let's go back to our terminal and we should be in 0 50 3 Cuban net is Liveness and then Readiness props section.Okay? And we are going to say cube CTL applyhyphen F and then cube manifest.And then it should start creating all the stuff for usall the objects, whatever related to it.Storage cluster, persistent volumes, config mapsall the deployments.So we are going to say get ports hyphen w weare going to watch it.Okay? So first thing is it is going tocreate the Myer skill containertill the Myer skill container is created.Microservice port is going to waitbecause in IT container will be there, right?So until an, unless this is runningit'll be in the init container state.And once the innate container is successful, thenonly user management microservices applicationcontainer will start, right?So init container is successfuland then application container pour initializedand then it started and then you are seeing zeroby one and it is 28 seconds now and it is zero by one.Ideally by this time it shouldif there is no Readiness probe automatically it'll be oneby one here, okay?But we have the Readiness probe for 60 secondsfor the initial delay after the container got startedwhich is nothing but the application containeruser management rest app container.So it is going to wait for 60 seconds.Okay? So let's say now this is 28 secondsand after 60 seconds it is going to comeas one by one or after 60 to 68 seconds.Why? Because after that, again, you need torun the Readiness probe in 10 seconds intervals, right?So hardly within 70 secondswhich means 70 plus 28, 88 or 98 seconds.By that time, usually our application should be up.So let's wait for that and then see what happens.So now you can see after 95 seconds our application is up.Okay, so now if I go here and then verify this.So our application should be up and running.So our Readiness probe start started working here.Okay, so now I can say control Cgo ahead and then clean up the stuff.In our next lecture we are going to focuson requests and then limits.So those also very important concepts requiredfor our applications to define.So we are going to look into that request and limitsand then we'll move on to other concepts of name spaces.So I'll see you in the next lecture.Until then, bye bye.Thank you.