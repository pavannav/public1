# 11.7 Step-05- Verify AWS LBC Deployment and WebHook Service

-: Welcome back.As part of step 0403, we are going to verifythat our load balancer controller is installedand also it's equal and webhook services also got created.So let's start withwhether the controller is installed or not.So we'll set kubectl-n kube systemand get the deployments in our EKS cluster, right?So in kube system namespace,so we'll say kubectl-n kube system and get,and we can say deploy.So what all deployments available in kube system namespaceit is going to list for us.So you can see AWS load balancer controllerwhich was created two minutes before, right?So now if you want to also see in detail, right?If you want to describe that deployment and review itso we can describe it, right?So this is the name of the deployment, right?So, copy and pasteand instead of get commandwe'll use the describe command here, right?So I'll say describe.And you should see that the entire information about thisis going to be provided in detail.See name of the deploymentis AWS load balancer controller in namespace kube system.It was created and these are some of the labels of it.And the version it has installedas on to the latest is V2.3.1.So it has installed the 2.3.1and it has done using.So labels are the very important thing.So how it has installed, also you will know.So it is manager by Helm here, right?So instance name is AWS load balancer controllerand name also you can AWS load balancer controllerand it is manager by Helm.And version, also you are going to see 2.3.1and Helm chart version you can see 1.3.3.This is the Helm chart versionand this is the EKS load balancer controller versionis V2.3.1.So both are different.And now annotations,you can see deployment and meta health,some additional thingswhatever they have defined here, right?And another important thing you can see hereis in the selector labelsyou can see app Kubernetes io instanceand also app Kubernetes io name.And both have the AWS load balancer controller.So, and in addition to that replicas,it has created two desired replicasand strategy type deployment.Strategy type it is using is rolling updatesand rolling update strategyalso it is saying 25% max unavailable and 25% max search.So, and this is the port template.And if you see here,this is the very important pointwhere you can see service accountit is going to be associatedwith this AWS load balancer controller.And containers it has downloaded from the image repositorywhatever you have set, right?And ports it is using is 9443 and then 8080, right?And the cluster name is EKS demo one,whatever the arguments you have provided.Ingress class ALB AWS region code is this one,AWS VPC IDs, whatever you have provided.It also internally have the liveness probewhatever they have defined inside the packageand it has the volumesand it has some certificate mounted to itwhose name is AWS load balancer TLS.So this one just remember it.Why?Because if you see here AWS load balancer TLS.So that is what is mounted here.So this is the secret which is mounted as volumes here.Why?Because this respective load balancer controllerlistens on port 9443.So the communication to this load balancer controlleris going to be on SSL and it needs a TLS certificateassociated with that.And that TLS certificate is associated hereas volumes inside that using a secret,which means when you go and then verify that secret,we'll find that one also.And you can see the events normal scaling replicasthat everything looks good.There is no errors or anything from events perspective.So this is about the deployment, right?And now we'll also verify the service here,which is webhook service.So kubectl- and kube system.And then instead of deployment,so I'll say clear and instead of deploy, right?So we are going to say SVC.So we'll get the services in the kube system namespaceand you'll see kube DNS is one serviceand AWS load balancer webhook serviceis one more service and which is listeningon port 443, right?And here you have seen the port 9443.So, now we'll see the important things here.So this is 9443and the selector labels inside this right?The selector labels inside thisis also you have seen here, right?The selector labels is instance AWS load balancer controllerand name and AWS load balancer controller.So these are the selector match labelsshould be available inside the service labels, right?Service selector.So that traffic coming to this 443 portneed to be sent to that 9443 port.Those also we need to verifyfor our additional understanding only.So whatever we are discussingis for our additional understandingand dissecting each of the objectsand then seeing the internals of it.So let's come back here and see.Verify labels in serviceand select the labels in deployment, right?So this is the webhook servicewhich you are going to output using YAML, right?So what is this?So, get SVC and load balancer webhook service with YAML.And inside this you go to selector,and you see these two are the valuesinside the service selector, right?App Kubernetes io instance and app Kubernetes io name.And now verify the selector labelsin our AWS load balancer controller deployment, right?And you'll find here also,come back here and you'll find the selector match labelsand you can see the same thing.Whatever you are seeing in selector match labelsof the deployment, same you are seeing in the service here.So that very clearly tells usthat whatever the traffic coming to the webhook serviceon 443 it is sending to our deployment,AWS load balancer controller deployment.But, let's also verify this one more timeon which ports it is sending, right?So that's also very important, see?So the port it is using is 443which is the front end port for thisrespect to cluster IP service is 443.And the target port it is sending is webhook server port.So this webhook server port is nothing but 9443 port.So let's come back here, right,and verify that, right?So these are the container ports.And in container ports,you can see container port 9443whose name is webhook server, right?And the other 8080 portfor this load balancer controller is in metric server port.So this is very important.So, for the webhook services listeningthe cluster IP service is listening on 443and whatever the traffic comes to that webhook service,it is going to send to AWS load balancercontroller ports,for the deployment whatever the ports createdfor those ports on port 9443, right?Means like this container AWS load balancer controllercontainer is listening on 9443.So, good.So this clears out one important thingwhich is webhook serviceand also the AWS load balancer controller,how the communication is happening in between them also.We got a complete picture.So in our next lecture,we are going to verify additional logs and additional stuff.So, I'll see you in the next lecture.Until then, bye bye.Thank you.