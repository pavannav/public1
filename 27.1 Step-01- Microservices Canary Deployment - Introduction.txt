# 27.1 Step-01- Microservices Canary Deployment - Introduction

-: Welcome back.In this lecture we are going to understandabout what are microservices, canary deployments.And in this entire section we are also going todo the canary deploymentof our applications in EKs cluster.So let's start with, what are canary deployments?Canaries means incremental roll outs in a simple form.So with canaries the new versionof the application is slowly deployed to the Kuberneteswhile getting a very small amount of live traffic.So in our case we have the user management microservicewhich is also calling a notification microservice,for its use.So now, so we are also going to introduce one more versionof notification microservice, which is V2,and then also diverting some amountof graphic to that.So in short, a subset of live users are connectingto that new versionwhile the rest are still using that previous version.So if you see here 75%of traffic coming to notification microservice V1 versionand 25% going to notification microservice V2 version.So having both versions availablein production and then availablefor the user subset of users is called canary deployments.So once we feel that notification V2is well and good and then it is performing welland then if we want to cut over entire trafficso we can move the hundred percent of trafficto V2 version.So using canaries we can detect deployment issues very earlywhile they effect only a small subset of usersif we encounter any issueswith the canary version of our deployment.So in production environments we can quickly switch backto our original production version immediately, right?So all these options are available with canary deployments.So once we perform our canary deploymentand then if we go back to our x-ray and then see it,so it is going to look like this.So from client as a user, when you access the requestit goes to user management microserviceand then it'll go, few traffic will goto V1 notification microserviceand then few traffic will goto V2 notification microservice.So let's see that in GitHub repositorywhat we have planned for this entire section.So we are in AWS EKS Kubernetes Masterclassand we are entering our 14 microservicescanary deployment section, right?So we already discussed about the use case, right?So we are going to, from user management microservicewe are going to call both versions of notificationmicroservices, the use case,and we can distribute our traffic to V1 and V2 basedon the number of replicas we configure on ourrespective deployment file.So notification service V1 will have one deploymentand then NS V2 will have one more deployment.So example, if you configure four replicasin NS V1 deployment file, which is nothing,but let me open the visual studio code.So in visual studio code you seethat we have something called notification deploymentand then V2 notification deployment.So this is notification deployment V1 notificationmicroservice and this is V2 notification microservice.In notification deployment if you say replicas two hereand then for V2 also two then, which is nothing,but you are distributing the traffic 50%to NS V2 version and then 50% to NS V1 version.So like this, by altering the number of replicasbetween two deployments you can havethe canary successfully implementedwithout of the box in microservices.So on Kubernetes, so out of the boxwith whatever the availability we havewith basic deployments,we can do it without using any external services.Currently, not currently,like we didn't deploy them on our Kubernetes clusterlike STO or AWS app measure or whatever it is.Okay, so in our demo, so we are going to do itwith 50% traffic to NS V2and then 50% traffic to NS V1.So the list of docker images we are going touse here is user management microservice,the same one which is 3.0.0 AWS exhibit skill building,and we are going to use notification microservice V1,and this should be V2, I should update this.V1 is going to be 3.0.0 AWS X-rayand V2 is going to be 4.0.0 AWS X-ray.So this completes the introduction partof our microservices candidate deployments.And for next lecture we'll focus on the prerequisitesfor this respective section implementation.So I'll see you in the next lecture.Until then, bye bye.Thank you.