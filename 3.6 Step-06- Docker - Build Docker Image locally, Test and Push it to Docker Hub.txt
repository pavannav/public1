# 3.6 Step-06- Docker - Build Docker Image locally, Test and Push it to Docker Hub

-: Welcome back.In the previous lecture we have completedabout pulling a Docker imagefrom Docker Hub and then running it on our local mission.So now in 04 we are going to build a new Docker imageand then run it on locallyand then push it to the Docker hub.Okay, so let's see how we are going to do it, right?So as a prerequisite stepplease ensure you have your own Docker hub account.So you can goto hub.docker.com and then create your account here.Okay? So you can click on sign up for Docker huband then provide your docker ID emailand then password to complete those things.Okay, so I already have the Docker hub account.So what I'm going to do is I'm going to log in.Okay? So sign upfor your Docker Hub account and then put it ready.Okay, now moving on.The next thing is to run thebase Nginx container, right?So why we are going to run the base Nginx container.What we are going to doas part of this complete step serieslike we have a Nginx docker files folder here.Inside that you can find docker file and then index.html.So whenever you run a base Nginx image, it is going toprovide the Nginx related simple index.html.So what we are going to do is we are going tochange that to a different index dot htmland then so I'm going tosay welcome to stack simplify Nginx V one custom image,right, in the index.html.And in my docker file I'm going to say get the base imagefrom Nginx and then copy my index.htmlwhatever I have created to the USR share Nginx html, okay?Which is nothing but inside the image to this location.Copy it.And now if I run itso obviously instead of default Nginx index.htmlwe are going to get our index start html.So that image, whatever we are going to build itwe are going to push it to our docker hub.Okay? So let's see how we are going to do it.So first before that let's get our base Nginx imageand then run it and then see what it is showing.Okay, so in our previous step three, means, like inin section three what we have done is we haveused the docker pool command to get the imageand then run it using Docker run.But ideally if you want to run it, you caneven without using the docker poolyou can directly use the docker run to do it.Okay? So what I'm doing here is using docker runI'm saying - - nameand then I'm saying my Nginx default.Okay? So my container name I'm givingas my Nginx default and port mappingsmy local host is 80 and also the container port is 80and the image name is Nginx.Okay? So you can search for Nginx here, right?So, and then you get that default Nginx image, okay?So that one we are going to use.So I'm going to say docker run Nginx, okay, I'm copying it,and then going back okay to my terminal and then testing it.So unable to find the image locally.So it'll go and then download that image, okaypulling from the library Nginx.So once it is downloadedit is going to automatically start also.Okay? So it's downloaded and then started.So let's see, Docker PS, right?So whenever we see it is already runningso let's go to local host and then see what happens.Okay? So we can minimize this.So we can see here we are getting welcome to Nginx.So this is the default index.html of Nginx.So we are going to edit it and then change it.So that's what we are going to build a new docker image.Very simple docker image we are going to buildwith docker file.So let's see how we are going to do it.Okay, so let's go here in the step two, create a docker fileand copy our customized index.html here.So to do so what we are going to do isso we can go to any of the folders here, okay?And in documents, I'll create a folder call M K D A R, okayNginx image, okay?Inside that I'm first I'm going to createthat docker file, okay?So in docker file I'm going to copy these two lineswhich is nothing but from Nginxand then copy the index.htmlfrom local two, this location, right?So let me copy these two lines and then paste it, right?So I have created the docker file.So I also should have the index.html here, right?So I'll create the index.htmland I'll say welcome to stack simplify.And I'm going to say Nginx,I'm not following any HTML standardsor anything here, I'm saying Nginx, V1and this is going to be a custom image, okay?And this is a simple file, okay?Index.html.So now what we are going to do is we are going tobuild a docker image and then run it locally, right?So docker build -t and then you are dockerhubID/and your image name and then the tag you are going to useand where you are going to build it dot, means likefrom current location it need to take the docker fileand then also the respective index.html filethat's the reason, dot.So if it is, in your environment meanslike you have your own docker hub ID, right?So whatever you have created as part of prerequisitesso you need to replace this commandwith your docker hub ID here, okay?So just if, if your docker hub ID is ABCthen just put the ABC hereand then copy this entire thing in there, run it, okay?So docker and then build the image -twhich is nothing but a tag name, right?So stack simplifies /myNginx_imageone:V1and then dot.So okay, buildfrom the current location means the current location.I have that docker file.So build from there.Okay, so I'm copying this and then I will run it now.Okay, so now if I see docker images, my new image, okayso Nginx already downloadedand using that it created a tag,simplifymyNginx_imageonewith V1 tag and it is created four seconds before.Okay, so now I need to run it, right?So let me clear this and Docker run-: -name and my image name is going tobe my Nginx1 and port mapping is 80:80, right?So if you don't stop thisthen we are going to get the error.So let's go ahead and then stop our earlier one.So if you see my Nginx default is also using 80for local mission, right?So let me stop the old one, okay?And then now come back here and then run this one.Okay, so docker run my Nginx1 with port 80:80 andmy image name istag simplifies last my Nginx image 1 V1.Okay, so let's run it in your caseyou just replace it with your, your docker ID here, okay?Okay, you have run it now.So let's go to local host and then check it.So it's coming.Computer: Welcome to voice -Narrator: One second.Ideally it should come.So it's coming from the local cash.So let me try one more time.Yeah, so now it is coming.Okay, so it it camefrom the local cash whenever we tried here.So let me close this.So welcome to stack simplify Nginx V1 customimage we have got it.Okay, so now we have completed building the docker imageand then running it.Okay? So if you want, you can even stop it.Okay? So docker PS it is running nowdocker stop my Nginx 1, okay?And if you say docker PS no other containers are runningbut the stopper containersyou can see my Nginx 1 and then my Nginx default.Okay? So if you want to remove themyou can even remove them.Okay? So I'll say my Nginx 1and then all these things you can do via additional command.Now, docker...PS - a - q, right?Which is nothing, but you'll give the docker imagedocker container IDs, okay?So you can even remove them using this command.Okay? So now if you say docker, PS - a, nothing is there.Okay? So that's the reason why we are going touse -q is because to get that docker container IDs ordocker image IDs and then pass this outputto another command like this.Okay? So earlier we discussed this, right?So for that purpose I have excluded this commandand then shown it eventhough it is not in our current things, okay.So now moving on,we are going to tag and push the docker image to docker hub.So currently our docker image name ismyNginx_image1:V1 okay?So, but what I felt is likeor V1 is not my, not looks good.So we'll say we want - release, okay?So then if I want to change my docker images tag namethen we can use that docker tag, right?So docker tag command to do that.So let's do that now.So docker imagesand we'll have the tag simplify myNginx image one.So let's say docker tagand then stack simplify my Nginx image V1change it to V1 - release.Okay? So let's change that.Right, and if you see the images,so now you have both V1 and then also V1 release.Okay? So now let's push the V1 releaseto our Docker hub account.Okay, in your case, please replace your docker hub IDat every place wherever you see the stack simplify, right?So now I'm going to push this.Okay, it is pushing to my docker hub.So let's see once it is pushed.Okay, so let's go here,docker hub, right?So this is my dockor hub and my repositories are here.So let's wait for it to be completely pushed,and once it is pushed we can crosscheckwhether it is available on our docker hub repositoriesor not.Okay? It is pushed now, okay so lets see.The next step is to verify the same on the docker hub.Okay, so let's go here and then refresh it.And you can see my Nginx_image1just now came updated a few seconds agoand you can see the tag name is V1 -release.So this completes the creation of a new docker imagerun it as a container and then push to the docker hub.Okay? So we have seen that in a series of five steps.Okay? So I'll see you in the next lecture.Until then, bye bye.Thank you.