# 21.7 Step-07- EKS Fargate - Deploy 3 Apps & Test, 2 On Fargate and 1 on EC2Node Group

-: Welcome back.In this lecture we are going to deploy all the three appswhatever is present here, 0 1, 0 2, and then 0 3.At that time using cube CTL, apply hyphen Rhyphen F cube manifests 0 2 applications, right?And then verify those things.So before that, we already verifiedif RDLDB is up and running.So for UMS service to be functional.Okay, so now let me copy this.Cubist cube CTL apply hyphen.All right,so let me go here and then clear the stuff.And I am in 0 9 0 to far get profiles Advancer Yamel.So Cube CTL, apply, hyphen R, hyphen F sothat all recursively all whatever the foldersinside that Yammel files are therethose things going to get created.So namespace NS app one createdand inside that deployment service English createdand namespace NS app to creatorand inside that deployment service and English creatorsame for NS UMS also.Okay, so now once it is created we need to go aheadand then verify the stuff, right?So I'll say clear, you see it here.Get ingress and hyphen iPhone, all hyphen name spaces.So we'll see thatin all name spaces Ingres got created or not.So app one, Ingress service got createdand this is the address for it.App two got createdthis is the address.UMS English service got createdand this is the address.Okay, so that's good thing.So on the next thing isso we need to verify how the parts are coming up.Okay, so let me clearand then I'll secure it hereget parts,and then if you want to seefrom specific namespace you can say hyphen Nand then I'll say NS app one.And then if I want I can even sayhyphen one four, seeing the far get noteswhatever it is going to schedule, right?But NS app one belongs to our specific easy to worker notes.So that's the reason if I say NS, Apple and Hyphen,it is pres-it is running unmanaged note groups.So this doesn't have any Target profile, but if I go hereand then verify for app two, so it should be runningon a Target node in the same way for NSUMS, right?Get parts for NSUMS.Again, it should be showing for far get notes soSo if you want we can even see all at a timeusing cube CTL get ports, hyphen, hyphen, allname spaces and hyphen O wide.So even we'll get the cube systemand then default name spaces, but that's fine.Okay, so you can find four Target notes.So SOS app two related app twoand then user management microservice.These are running with Target.So another important thing isso we already know that one is to one ratio.How many Target notes usehow many parts you're going to schedulethat many Target notes gets created.So if you go here and then verify Ingenics app twois going to be scheduled on Target.So it's replica R twoin the same way User management microservice deploymentalso replicates R two.So which means, get notes high for no wire.So you should have six notes here, right?So four for Target, 1, 2, 3, 4 for Targetand two for our regular EKS manager node groups.So that's good thing.So we verified all these things.Now, let's go aheadand then verify ALB and then target groups.So verify ALB, ISS, and then rules.So let's go to EC2 and go to load balances,right?So we went to load balancesand we have three Ingres serviceswhich are three load balances getting created now.And if you see here it's equaland rules are also getting created.Okay? So and now we'll go to target groupsthree target groups created out of which you can see.One is with instancebecause we can figured it to be created with instance, okay?And if you see it here, so it's comingup and then it's already showing healthy, okay?And because that is app one nix will come faster, right?So that's the thing.And this is going to be app too.And this is also healthyand mostly this shows also he not we'll crosscheck, okay?It'll take time for our UMS because we have the livelinessand readiness probes inside that, right?So, but anyway,we'll crosscheck how that board is coming up.Okay? So hyphen N, NS hyphen UMS, right?And see what's going on there.So it's up, it's up.Okay, so no issues, no restarts, everything is good.So if you want we can even see logs hyphen F cubecity logs, hyphen F and the port name is this one,right?And I am going to say hyphen N, NS, UMS. Okay?So to see that logs also good, right?So started user management application.JM is runningokay from 51within 51 seconds it took to create it.Okay? So initializing the spring dispatchereverything looks goodfor our UMS application also it might take a while for us.So let me do a refresh here.All target groups refreshand go back here and then these are also healthy.Good. So that's good.So now the next thing here is target groups verifiedand then load balancers verified.So now we are going to verify that route 53, right?So we'll go and then verify route 53all the new domains got created.So go to hosted zones, right?And then we will go inside Q1cloud.com, right?Q1 cloud, okay.And if you see herewe should have something called app oneapp two and then UMS those looks good.So one thing we can even crosscheck isNS look for ensuringWhy? Because sometimes it takes, DNS changes takes,takes timeor when we are rewriting the stuffwe are doing it for the first time nothing will happen.But same manifest if you delete and then recreatesometimes you are going to have route 53 issues.Okay? So that's the reason always good to verify, right?So app one and we'll also verifyfor app two and then we'll also verify for UMS.Okay?So in addition to this you also need to crosscheck thiswith the DNS names here.Ideally if, if you feel like there are issueswith your application access, so you need to go hereand go to EC2, and go to load balancer.So what you're going to do is NS lookup your MS coupon cloud.com got two IP's here, right?3.3 and then 18.95.So now I'll go to the load balancer here, I-the way I check it, crosscheck it.Any route 53 caching issues is happening or not is this way.Okay?So go to tax and this is app fundingrest service and the next one is app two.And this is you are missing this service from tags.I found that.Okay, so I'll go to descriptionand I'll copy this DNS name and then I'll sayand let's look up right and then I'll paste it here.Okay? And now if you see it here, 3.3from my load balancer DNS name, I'm getting 3.3and then this 3.3, whatever it matches for me.So which clearlyand even 95and 95 which clearly confirms that I am good innow I can go ahead and then access my applications.Okay, so sometimes when you're rewriting the stuffand then redeploying, redeploying, redeployingideally there will be route 53 cache related issues.So that's the reason cross-checking like this are waitingfor half an hour, 30 minutes and then again coming backand redeploying usually fixes the stuff.Okay,now let's go back and then access the applications.Okay, so we have three applications to access.So this is app one application, open link in new tab, right?So it's working right?App one dot Q1 cloud.com is up and running.So this should be app two, I need to correct it.Okay? So I will correct it.Okay, so I have fixed it app2 Q1 cloud slash app two dot index start html.Okay, so now app two also with different colors available.Now user management microservice health status, II'm cross-checking, okay, it's up and running.So if you want to list users directly on browseryou'll get them right.So these are the users we have in this application.We can see it here or you can go ahead and then addin our Postman project, the end on test itwhich you we have done already multiple times.Okay?So one we can go ahead and then now delete these thingsand then clear the stuff.Okay, so I'll go here and then delete this.Okay, so now we have completed all the workand then testings.So we are going to delete all of our zero two applicationsokay? So I'll say Cube, CTL, delete hyphen R, hyphen Fcube manifest.And then zero two applications.So whatever we have created, everything should getdeleted now.So once deleted we should not see anything here.So let me close these things, rightAnd these things, okayAnd here in Ingres services, nothing should be there.All should go away, right?It's going away, it'll take a while.So target groups, it's going down.So let's wait for a while to get these things deleted.One thing we need to know about Target profilesis whenever you deploy the pod insidewhenever you schedule our workloads on Targetwhat happens is it'll take a little bitof time to create a Target nodeand then schedule the pod inside that.So why, because we really don't have a node.It need to create a nodeand then it need to install the cube let inside that.And then using that cube let it needs to registerto our EKS cluster control plan and then checkfor our respective scheduler and then get the dataand then schedule means like get that respective partand then schedule on that Target node.So it'll take a little bit of time.Example, it takes only 10 less than two secondsor three seconds to complete a schedulingof a pod on easy to manage notes.Then it might take 10 seconds to get scheduledon Target. Something like that. Okay?So there will be a delay even for delay also meanslike deletion also you can see it'll, it'll be a delay.So on manager note group it has deleted immediatelybut on Target it took a little bit of time, right?So that's about what I'm trying to clarify heredifference between that, okay?This is only the difference from scheduling perspectivenot on performance perspective.Okay, so now we have deleted that.So let's go back hereto our GI and then delete the profiles, right?So we are going to delete the profiles.The names app two on UMS only.Hyphen profile is not there.I am going to fix that.This looks good now.EKS, CTL, delete target profile from cluster EKS demo onename is FP app two.And then wait.Okay, so waitwhat it does is it'll EKS CTL will wait todaythis profile is deletedand one thing you need to remember here is like only oneafter the one Target profile only we can delete it.So you can remove weightand then if you want to execute two commandsit is not going to delete.So only one, one Target profile will be deleted firstand then next you can delete that second one.Okay, so in orderly manner we need to delete these things.We'll take closeto three to five minutes to delete these profiles.So once deleted, everything will be clearfrom Target profiles perspectivefor us when we go back to her GitHub repo.So if you see here, so there is a reference GitHub issuefor EL being rest with cross name spaces.So the issue and then those related informationand then discussions about from 2015 onwardsabout these cross name spaces you can find hereabout workarounds and then all those things.So whatever we have discussed here, right?So whatever is not possible hereit's related current ongoing in GitHub issueyou can find the information here.So this completes the Target relatedtwo important sections.One is Target profile basicand then Target profile advanced.Okay? So in our next lectures we'll focus on another topicmaybe like microservices are DevOps.So I'll see you in the next lecture.Until then, bye bye.Thank you.