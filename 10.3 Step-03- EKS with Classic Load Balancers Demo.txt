# 10.3 Step-03- EKS with Classic Load Balancers Demo

-: Welcome back.In this lecture we are going to implement this entire thing.So which is nothing but audio's database is already createdand then ready for us.So what we are going to do is,we are going to deploy the MySQL external name service,and our user management deployment.And also we are going to writea classic load balancer service cube and it is manifest.And then deploy all these three thingsand then ensure that everything is working as expected,for us when we access our application via browser.So let's go ahead and then do that now.So we will go back to our browserand we are going to zero seven zero twoclassic load balances CLB, right?And as a step one,we are supposed to create our loadbalancer.yml, right?So let's go back to our visual studio codeand if you see in zero seven zero two in cube manifest.So we'll have the external name servicewhich we have copied from our previous RDS database section.It is going to be same thing.And user management microservice also no changesinside that after integrating with the RDS database.So nothing we are going to copy the same.Secrets also same.It is the same and even the load balancer service, right?Which is nothing, but previously it is a note port service.The same thing we have copied here.Okay?So now what we are going to dois that respect your note port service.Whatever we have created as part of RDS service,means like RDS database integration.So now we are going to change it to load balancer type.So what we need to do.Earlier we used to create a load balance note port service.So now we are going to create itas a load balancer type, okay?Our services, our Kubernetes service.Whatever we are going to create is a load balancerand we already know that default.Whenever we create this manifestand deploy it in Kubernetes,it is going to create a classic load balancer by default.And one more important thing here is.Because we are using the load balancer type,we really don't need to mention this note put here.Okay?So that one is remoteand the type is load balancer is implemented.So done.Okay, so this default is going to be CLB.And now one more important thing here is port.Okay?So eight zero nine five browser also you can say.CLB DNS URL colon eight zero nine five,or you can even use the listener portals J key.So which means like browser default port, right?Means like you really don't need to provide any port there.So you can use J key in addition to that,if you want to change the name of your service, right?So little bit like CLB user management.Rest app, something like this, okay?CLB user management rest app.And if you want you can even add service whatever you want.Okay?So I'll say CLB which is nothing,but classic load balancer user management rest app.So that's all.We have done only three changes.One is very more than note port herefrom our note port serviceand we ensure that the type is going to be load balancer.Which means we remove the note port hereand then add a load balancer.And then we change the port to browser default port.So whenever we access our load balancerwill be created with a listener port 80, right?Our service port is nothingbut our load balancer port here right?So which means on a browser,you really don't need to give eight zero nine five,something like that.Okay?So that's about it.Now this is completed.It'll go to our next step here.Which is nothing but deploy this manifest.Okay?So I'm going to edit this section little bit.So ideally this should be cube hyphen manifests here.So I didn't edit that.Now I have edited it.It should be good now.So now let's go ahead and then deploy it, okay?So we'll go to zero seven and inside zero seven,we are going to go to zero seven zero two, right?And inside that we are going to say Q CTLapply hyphen F cube manifest.So where we have all the files there, okay?So now it is going to first create our MySQL serviceand also do the user management microservice deploymentand it's a secrets thing.And also deploy the CLB user management rest app service.Okay?So now we can say get SVC, should create a load balancer.And it also provided the load balancer URL here, right?You can see and the port is EAT, okay?So now it also created the external name service also.Whatever we have implemented.So let me clear Q CTL.I'll say get ports here, okay?And it's waiting for two come up.So if you want we can parallelly check the logsof our application.So it came up successfully.No issues with the database.So Q CTL get SVC.Right?So this is the load balancer.Usually it'll take some timeto get the load balancer pinned up, createdand then available for us.So let's go here and go to EKS.Now we'll go to service, easy to service,and inside that we'll go to left navigation load balances.Okay?So network and security load balancing, load balances.So now you can see here the classic load balanceris getting created.You can see type is classic, right?And states still not available for us.So we can wait.So instances is out of disturb but they're out of service,because of maybe our port is still coming up.Once it comes up it'll take a while to registerand then ready.So let's wait for a while.So it is in service now.So it is available for us.So health checks are passing.So we can copy the DNS name from here.Whatever is provided, right?So this is the DNS name off of our ALB.So you can, we can directly use thisor we can even copy the DNS name from this section, okay?And copy this, and we can go to browser,and say that DNS URL slash user MGMTslash health hyphen status, right?So we can see it, user management services open running.Want to even test the entire flow till the RDS database.So we can even go to our postmanand then create a user and then test it.So first to list the users.So there should not be any users available by default.So let me cancel this.So first we need to provide the environment here, right?So let's go to settingsand then add a environment and it should be URL, right?And we are going to say CLB, right?And we are going to say http://,the entire AB DNS URL, right?And then add it right?And close it and go to CLB environment, okay?And let me close this.Close thisLet's close everything here,and we'll go to list users once and then test it.Okay?The environment we have selected CLB,which is nothing but classic load balancer.So nothing 200, no, no data available inside that.So let's go ahead and then create a user now, okay?So it is going to create a admin to user.So let's create it.So user created and the error is relatedto notification service we can ignore.And one more time list services.And we should have the user available for us.So which completes the entire flow.Which means from your browser,you have access to the load balancer.And then load balancer has forwarded the requestto one of the pod here.And this pod has been sentto the MySQL external name service.And from external name service, we went to RDS DB,and then created that respective user.So entire flow we have tested.So in our next lecture,we'll focus on network load balancer.So far now we'll go ahead and then delete all these things.Okay?So I'll change this also to cube manifest.So not an issue.So let's go back here, and cube seat here,and delete high fund half, and then cube manifestAnd everything whatever we have createdshould get deleted now.So from Kubernetes you have createdthe classic load balancer in AWSand then you are also deleting the classic load balancerin AWS.So we really didn't touch any management console.We didn't create anything here, okay?So everything is automatic for a C.Now everything is gone.So once we delete itand our classic load balancer also got deleted.So this completes the classic load balancer demoand then we'll see the network load balancer demo shortly.So I'll see you in the next lecture.Until then, bye bye.Thank you.