# 11.2 Step-00-02- Ingress Introduction Part 2

-: Welcome back.In this section we are going to understandabout ALB ingress controller on a very high level.So before going to ALB ingress controller,we are going to look into AWS application load balancer.So let's see what is application load balancer,and then what it supports,and how this application load balancercan be created from Kubernetes manifestsusing ALB ingress manifest,using ALB ingress controller.So we are going to see all those thingsin our this respective section, okay?So let's move onwith the what is application load balancer in AWS, right?So ALB is a super advanced,next generation load balancer in AWS.So it supports tons of features.Let's see what are those to get a high level ideaon how much it is capable of, okay?So it supports path-based routingwhich is nothing but context path-based routingfor our applications.So single load balancer can be leveragerfor using for multiple applicationshosted on AWS based on context paths, okay?In the same way it supports host-based routing.So which meansin addition to context path-based routing,we can deploy multiple applications.And then using different host names,we can route to those respective applications,back of this load balancer.Example, apps.couponcloud.com will go to applications, okay?And users.couponcloud.comcan go to user management REST services.So something like that, okay?And next is supportfor routing based on fields inside the requestlike HTTP headers, HTTP methods,query parameters, and source IP addresses.So by seeing these three features itself,we can understand that it's not only a load balancer,it is also a routing solution on the HTTP level, okay?And supports for redirecting requestfrom one URL to another.So more or less standard Apache web serveror NGINX related features, it has, okay?Supporting for a returning a custom HTTP response to,and supporting for registering Lambda functions as targets.So anything deployed in AWS WAN servicealways integrates with multiple other services.In the same way, multiple Lambda functions also,we can register themto this respective load balancer targets.In the same way, it supports for load balancersto authenticate users of our applicationsthrough their corporate or social identitiesbefore routing requests.So this is a latest feature available.And then it is for providing the out-of-box authenticationfor our applications hosted on this respective load balancerwith our corporate or social identities.So it also supports containerized applications,mainly, AWS ECS out of-the-box integrated with this,respect to application load balancer.It also supports monitoring the healthof each service independentlyas health checks are defined at the target group level.Okay?So that is also one important feature.It supports registering targets by IP addresses.So due to this support,we are able to leverage this very effectivelyin target with EKS, okay?So because of this respective feature, okay?And inside VPC or outside VPC also,it can do this stuff, okay?Using the IP address.And all in all, ALBs latest and greatest load balancerwith many good features.So this is about what application load balanceris capable of and what it can do.So now if this type of load balancers,if we can use it as a ingress service for usfrom Kubernetes,so we are going to have a leverage of all these featuresfor our applications hosted on Kubernetes.So that's the beauty of AWS here, okay?So which means like AWS application load balancercan be provisioned for our Kubernetesusing Kubernetes ingress manifest, okay?So let's move on.So let's see, what is this ALB IC?ALB IC is nothing but ALB ingress controller, right?So ALB IC triggers the creationof an application load balancerand the necessary support AWS resourceswhenever an ingress resourceis created in the EKS cluster, okay?With the annotation name kubernetes.io,ingress.class is equal to ALB.Okay?So the ALB ingress controller supports two traffic modes,instance mode and then IP mode.We also seen that application load balancersupports both the traffic modes instance and IP.So the same things are availablein ALB ingress controller also.Okay, let's see what are those in detail.And so this is one more documentation linkfor this ALB ingress controller.So you can review this link,and then understand annotations inside that and everythingwhenever you are going through it.And when you are going in the advanced sections,you'll understand more and then more about it.Okay?So now let's see the instance mode.So in instance mode,ingress controller registers nodes within your clusteras targets for the ALB.So which is nothing but,nodes are nothing but our worker nodes in our EKS clusterwill be registeredto the targets inside the application load balancer.So traffic reaching the ALBs routed to NodePortfor your service and the proxy to the products.So which meanslike whatever the NodePort services we are going to createin front of our applications,means like in front of our application deployments.So first ALB routes to those NodePort servicesand that NodePort service is routing to our ports, okay?So this is the default traffic mode availablein our ALB ingress manifest, okay?And you really don't need to defineor specify that implement instance mode.By default, it is applicable for us,but we can also explicitly specify it,like this with target type as instance annotationin our ingress manifest if we want it.And we have the IP mode.So in IP mode, it register pathsas that targets for the ALB.Here, if you see it register the EKS worker nodesas targets for our ALB target types, okay?But here, it registers the ports as targets for the ALB.So traffic reaching the ALBis directly routed to our ports for our service.So now here, if you want to use IP,then you can use the target type as IP.So now why these two instance modesand then how it is useful for us from AWS EKS perspective.That's the core thing here, right?So when you are using worker nodes,means like manager node groups in your EKS cluster,by default, you can use instance mode.Or if you want to use IP mode,still you have an option of using the IP mode.But when you are using only Fargate-only profile,which means in your cluster,you really don't have any other node groups,manager node groups like EC2 instances,you are just only using Fargate profiles,at that point of time, you need to use,and if you want to use application load balancer,then you need to use only IP mode.Why?Because Fargate nodes doesn't support the NodePort service.Why?Because we really don't have controlon Fargate related nodes,whatever it has created in the background,because that is a serverless concept, right?So that's about the reason you need to use IP mode.So whenever you are using Fargate, for those thingsif you need ingress manifest, you can use IP mode.And whenever you are using manager node groups,you can use either instance mode or IP mode.So that's about these traffic modes.So now moving on.So let's see how ALB ingress works.So this diagram, I directly took it from their website,and we will see what it is,and then from step by step process, how it looks like.And the link for this diagram is available here in detail.Okay?So now you see this is a Kubernetes cluster, okay?And these are AWS resources.So we already saidthat whenever we provision our ingress manifeston the Kubernetes cluster,it is going to create a AWS resources.So what are those AWS resourcesis what we are going to see now, right?So in the step one, the controller watches for,which is nothing but the Kubernetes controllerwatches for ingress events from API server.And when it finds ingress resourcesthat satisfies the requirements,it begins the creation of these AWS resources.So what are those AWS resources?You can see number two, which is application load balancer.So application load balancer is created in AWSfor the new ingress resource provisionin a Kubernetes cluster, okay?But one thing here is this application load balancerwill have a version of ELB v2, okay?So whenever you see we have two types of resourcesin elastic load balancers in AWS.And this application load balancer,whatever it is getting created, is ELB v2.So that's one important note you need to remember, okay?Why?Because whenever you are giving IAM permissions,and all those stuff,you need to ensurethat ELB v2 also included in those stuff, okay?And the next thing is target groups, okay?So now the point number threeis target groups are created in AWSfor each unique Kubernetes service describedin ingress resource, okay?So whatever the application related NodePort services,you have defined in your manifest,so those related stuff has been created.And with that, including those NodePort services,it is also goingto create whatever the ports you have defined also, right?So now another important thingin your ingress manifest is listeners, right?So whatever the listeners you specifyfor your application load balancer,those gets created here,which is ATR 443, whatever you define.So those listeners also will get createdin your application load balancer.So finally, rules, right?So as we said that application load balancersupports context path-based routing.So which is nothing but /*, /products, /accounts, okay?So /* should go to one target group,/products should go to one target group,and then /account should go to one target group.So all these things are supportedin our respective application load balancer,which we are provisioning you as a Kubernetes manifest.Okay?So now another thing here is like,if you want to delete, right?So if you want to delete all these things,just to delete our Kubernetes ingress manifest here,means like ingress resource,whatever we have provisioned deleted,and then all these things will get deleted.So that's about the ingress on a very high level.