# 4.7 Step-04- Kubernetes NodePort Service and Pods Demo

-: Welcome back.In this lecture, we are going to create a portand then expose it to the internetusing the NodePort service.So just now we have completed theNodePort service introduction in our step three,and then we are moving to the step four.So now let's understand these ports one more time,which is nothing but port, TargetPort, and then NodePort.So port is nothing but port on which NodePort service leadsin Kubernetes cluster internally.So which is nothing but your cluster IP portand the target port is nothingbut we define container port hereon which our application is running.And then NodePort.So NodePort is nothing but worker node porton which we can access our application.So these things are very important wheneverwe are defining our YAML in a declarative waywhenever we are creating a service.But even now if we need to understand about portand then target port because in our upcoming steps here,like we are going to understand more about this,the target port, and then it's importance,all those things, okay?So now let's go ahead and thencreate the port one more time,whatever we have created in our previous step.So let me copy this and then create our first port now.So port got created, I'll say kubectl get portsand then my port is getting created and it is running now.Good.So now we are going to expose port as a service.So the command here is Cube CTL expose.And then that respective to port with what is the port nameof that port.And then the type is a NodePort service with port is 80,which is nothing but my service port is 80,and name of my service is My First Service.So let's go ahead and then expose that now.It's exposed.So now if you want to see the services,Cube CTL get service.Right?And you can see the default kubernetes servicewith the cluster IP is available here.And we also got My First Service with NodePortof type NodePort and it also has the cluster IPand the cluster IP port is 80 and the NodePort is 31084.And you also have the aliaswhich is nothing but kubectl get SVC, okay?So how for ports, PO, the alias for services is SVC.Even with SVC, we get the same output.So the 80 here, whatever you are seeing is the cluster IPservice port and 31084 is our respective node port.Worker node port.So now the next thing is how to accessthe application, right?So you also need to get your worker node public IPto access it.So let's get that using Cube CTL get nodes -O wide.So you'll get the public IP of your cluster here.So which is nothing but this one.And take it and then access it.And what is the port?31084.And our application is accessible now.Welcome to Stack Simplified Kubernetes Fundamental Demoand our application version is V1.So now let's go back here and then see one thing, okay?So get ports -O wide, right?So this is running on 145 server, right?And then you accessed the external IP of 118 server,which is nothing but another server,but still it is accessible.The reason is the services across the worker nodes,whatever the service you create,it will be across the worker nodes.We'll see more in our replica setsand then deployments and then services,but what I'm trying to say is both nodes will havethe same 31084 assigned and via any of the nodes,we'll be able to access our service.Just now, we accessed it with 173,we can even access it 213and then we'll get the same response.31084, right?It's the same thing.So servers will get created across the worker nodes.So that's about it.So now, one thing we need to understand here is target port.So if you see here in this expose command,we didn't define the target port.So which means, what it means is whatever the service portwe have assigned,the system feels that the target port,which is nothing but the container portis also going to be 80 only.So it will take it by default the same value.Now if you try to change this to 81,so obviously, what happens, you can see now, right?So your port is 81 and then you're not definingany target port.So which is different, right?Our container port is 80 and then you're trying todefine your service port as 81.So let's see what happens, right?So let me copy it and come back and then paste it, right?Okay, service got created, but will it be accessible for us?So get SVC, right?And this is the service and we got 31100.If we access it, is not going to work because our portis not running on port 81.So in these cases, which means like your service want torun on different port and your backend is on different port.So you need to always define yourtarget port parameter also.For now, let's access this and see what happens, right?So let me come here.And the port is 31100.Right? It failed.So in the same way,so now, let's go here and then access it withdefine it with target port 80 and then create a service.So we'll create this service as service three.I have done service two one more time, I will correct it.So this is service three.Right?So now get port.So here, you have defined your target portwhich is nothing but your container port as 80, right?So now we'll say SVC and its port is 31961.Ideally, it should be accessible now for us.Okay, so 31961 is the port.So let's access it.So now we have got our application.If we want, we can even take the new taband then access it and then accessible.So that's about the importance of target port.So if you want to use our service port a different oneother than the default port,what our container is listening on,so then you also need to define your target portin your Cube CTL expose command.So that's about it.In our next lecture,we'll focus on interact with port and then other steps.I'll see you in the next lecture.Until then, bye bye.Thank you.