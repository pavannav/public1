# 7.1 Step-01- EKS Storage Introduction

-: Welcome back.In this lecture we are going to understand aboutAWS EKS storage.So in EKS storage we have different typeof drivers and then provisioners.So if you see here we have entry, EBS, provisioner, EBSCSI driver, EFS CSI driver, and then FSX 4 cluster CSI.So entry EBS provisioner is a legacy oneand will be soon deprecated.So we are not going to look into that.In the future it is going to be with the CSI drivers only.So what does that CSI mean islike container storage interface.So with EBS, which is nothing but elastic block storagewhich is for persistent volumes.So we can use EBSCSI driver and we also have Elastic file systemwhich is a fully manager file system by AWS.So if you want to use it, we can use EFSCSI driver in addition to that regular FSX four cluster.CSI will be availablefor Windows file systems in other stuff.But the core thing here is we are going to primarily discusson EBS CSI driver in our upcoming continuous lectures.And then we are going to use this EBS CSI driverleverage this driverand then use the EBS service in AWS to havethe persistent volume mounts forever Myer scale database.But let's see this a little bit about these drivers.So these are the latestand greatest available today and they are in beta releasesbut they're also ready for production useandas on today.So these drivers are not supported on AWS EKS Fargatewhich is nothing but serverless infrastructure.And it allows EKS clusters to manage lifecycleof EBS volumes for persistent storageor EFS file systems and FXS for luster file systems.So entire lifecycle of these respective serviceswhich is EBS or EFS or FXScan also be managed using these drivers from EKS.So now EBS and then EFS are supported forKubernetes 1point 14 and then later options and FSX for clusterCSA supported from 1 point 16 and then latest options.So now moving on.So let's see a little bit more about the EBS CSA driverright? So before going in, so let's understand whatis this elastic block store before moving on?Okay, so EBS provides block level storage volumes for usedwith easy to and then container instances.So we can mount these volumes as devices on our EC2Rcontainer instances.So EBS volumes that are attach it to an instance are exposedas storage volumes that persist independently from the lifeof the EC 2 R container instance.In simple terms, even if we terminate our EC2instance, instance are if even if we terminateor if our container instance got terminatedor our respect to Kubernetes port got terminatedstill volume is persisted independently.So we really don't need to worry about the data storedin those volumes, right?So we can dynamically change the configurationof a volume attached to an instance.We can increase the size of the instancemeans like we can increase the sizeof the volume or decrease the size of the volume.We can do all those things.Okay? So AWS recommends EBSfor data that must be quickly accessibleand requests long term persistence.So EBS is well suited forboth database style applications that rely on random readsand rights and to throw put intensive applicationsthat perform long continuous reads and then right?So for in both ways it is useful.So now let's see what we are going to build on a high level.So in a EKS clusterso we are going to create a deployment which is nothingbut the Myer scale deployment.So for this respective Myer scale deploymentwe are going to leverage the elastic block storeas the volume mounts inside this deployment, which meansfor this Myer scale database, we are going touse data volume mounts as from elastic block store.So in addition to thatas part of this deployment, whenever we are creating, rightso we need to learn few other Kubernetes concepts here.One is storage classespersistent volume claims, config maps, and we areon mental variables, volumes and then volume modes.So all these things we are going to learnas part of this entire use case.In addition to thatso unlike earlier, which means like earlierwe used to use it persistent volumes first meanslike as a Kubernetes administratorI used to create a storage classand a persistent volume and then I need to goand then claim that volume using persistent volume claiming.So, but now we are going to use the anotherlater feature dynamic volume provisioning here.Okay? So that is going to come inand then we'll discuss whenever it comeswe'll discuss in detail about that.But for now, let's move on with what we haveas part of that, as usual, again, we are going to understandabout note port service and then deployment of my SQL.So I also change these two cluster trip servicebecause this deployment is going to use my scaledeployment is going to use the cluster IP service.So moving on.So once we complete this meanslike creating the storage class related Kubernetesmanifest persistent volume related manifestand then config map related manifestand deployment with environmental variables, volumesand then volume mounts and then cluster IP manifest.So once we complete 1, 2, 3, 4, file,file manifestthen we'll move on.Oh, the next thing which is nothingbut our user management service.So we have created a persistent databasebut how we are are going to know that by, by integrating itwith an application, we will know better, right?So that's the reason I have created a simple springboarduser management microservice.So wherein you'll be able to create the userswhenever a user is created, it'll comeand then store it in the Myer scale database.And whenever you delete the userit'll be deleted from the Myer skill database.Whenever you list to the users, it'll fetch the usersfrom the Myer skill database and then show it to youfrom your postman client or from browser or whatever, right?So whatever the client we are using.So all those things we can do.So that type of application we are going to deploy hereand then create a deployment for that.So which means we'll create a deployment with the respectto environmental variables here, which is nothingbut why do we need to have environmental variablesin this deployment is nothingbut these environmental variables will have thatdatabase information to connect to this respect to database.So what is the DB hostand then what is the DB username DB passwordand what is the schema we are going to use?So all those things.So the schema, whatever we are going to create inside thismy skill databases, user management schemawhich we will define in this config map.And then that will get created.So we'll create a deploymentwith environmental variables to connectto this respect to Myer skill here.And in addition to thatwe are also going to create a note port service tool.Access the users means like for a, for access to userswe are going to create a note port serviceso we can access it via internet.So all these things we are going to do.So let's go back one more time to our GitHub repoandgo to our EKS storagewith EBS elastic block store.Okay, so if you see here we are going to use EBS CSI driverand use EBS volumesfor persistent storage to my scale database.So the core topics involved here are firstinstalling the EBS CSI driver on our Kubernetes clusterand then create the Myers scale database deploymentand then cluster IP service and finallycreate the user management microservice deploymentand then note port service.So as part of that, the following Kubernetesconcepts are covered storage classes, persistent volumesconflict maps, environmental variables, and thennote port services, environment, wells, all these things.And in addition to thatafter this entire section is completedthe entire EBS section is completed.All these things.And then if you still have doubtsor if you want to implement few thingswhatever is not referred in this section, againyou can definitely goto these references and then look into.So why, because we are using here onlythat dynamic volume provisioning herebut you can even do the static provisioningor even resize your disc.There will be different options available here.And then you can use these thing reference links tounderstand better and then change whatever you want orin your real world environments based on your requirements.Whatever you want to do, you can use these things.Okay? So I'll see you in the next lectureby moving on with the installing EBS CSA driver.Until then, bye bye.Thank you.