# 13.1 Step-01- Introduction to Ingress Context Path Based Routing

Instructor: Welcome back.In this section we are goingto implement Kubernetes ingress context path based routingin application load balancer.So let's see the network designfor this entire implementation.So we already created a VPCand inside a VPC we have public and private subnets.We already created a EKS cluster control planeand also EKS private node group in the private subnets.In addition to that, we also installedthe ingress controller.So now we are going to deploy three apps.So for those three apps we are going to havethose three deployment manifestsand node port service manifests.So those are nothing but app1 node port serviceand app1 deployment app2 node port serviceand app2 deployment and app3 node port serviceand app3 deployment.And we are also going to define an ingress servicewith context path based routing rules.So wherein we are going to define a rules like /app1goes to app1 node port service,which eventually goes to the app1 podand slash app2 context path goes to app2 node port servicewhich eventually goes to the app2 pod.And anything with route context goes to app3 podvia app3 node port service.So as a user, whenever I access my applicationwith <ALB-DNS-URL>/ with route context,so the request will go to app3 podvia node port service and ingress service.And the rule is '/'.And when you access your URL with /app1,so it comes to your ingress serviceand it checks for the rule /app1and it routes to app1 node port service.From there it will reach the app1 pod.And same applies to the app2.So whenever user accesses with /app2as the context path in the browser,request comes to the ingress serviceand validates its rule for /app2, the configured serviceis going to be app2 node port service.So it will go there and from there it will go to app2 pod.So this is what is going to happenwhenever we implement that context path based routing.So far we have seen the network designfor ingress context path based routingusing the AWS resources.So you can see EKS cluster control planepublic subnets, private subnets, worker nodes,all these things.Also see the same architecture in a different wayusing the Kubernetes objects.How it is going to workinside the Kubernetes cluster, right?So you have in AWS Cloudyou have created the AWS EKS cluster.And in EKS cluster in the Kube system namespaceyou have installed the ingress controller.So ingress controller related deploymentwhich eventually creates the ingress controller podsand also you have the ingress web hook service.So now whenever as a Kubernetes admin using kubectl clientwhenever you deploy the Kubernetes objects, right?So in those objects, whenever you deployingress service related Kubernetes object or a resource,so this ingress controller keeps watchingthe K8s API server which is EKS cluster API serverfor finding any ingress services deployed.And if it finds any ingress services deployed,immediately it is going to createthe ingress service for us.And this ingress service is nothingbut whenever this ingress service is createdit's equivalent AWS application load balanceris created in the AWS Cloud.And this ingress service alreadyhas context path based routing rules inside that.And those also will be defined inside this ingress serviceand equivalent routing rules also will get createdin the AWS application load balancer, right.Now, one important thing is so using the K8s adminusing kubectl client only,you'll also deploy the node port servicesand also deploymentsfor your nginx app1, app2, and then app3.And whenever user accesses with the /app1 contextso the request will go to app1 nginx app1 pod.So via ingress service and the rulesit will crosscheck the rulesand it will go to that app1 serviceif the context path is app1and go to that node port serviceAnd from there it will go to the pod.Same applies for app2 and same appliesfor the route context.Another important thing which we need to be aware of is,AWS application load balancer and ingress serviceare not two different objects.In other lines, so it is like AWS application load balanceris not proxying its request to ingress service.So both are combinedly a single object.So for depiction purpose in EKS clusteryou call it as ingress service and in AWS Cloudyou call it as AWS application load balancer.So whenever as a Kubernetes admin,whenever you provide the ingress serviceKubernetes manifest for K8s API serverwhen this ingress controller watchesand creates the ingress service.So this ingress service is nothing but it creates equivalentAWS application load balancer object, that's all.So which means users whenever they access anything/app1, /index.html or anything,so this entire thing is a single objectand from here the request to goes to the your respectivenode port service and from there it will goto your respective application pod.But anything under this red boundaryis called a single object.So this clarifies that there is no proxybetween AWS application load balancer and ingress service.Next.So this completes the introductory partof EKS ALB ingress context path base routing.In our next lecture, we are going to go aheadand then practically implement the same use.I'll see you in the next lecture.Until then, bye-bye, thank you.